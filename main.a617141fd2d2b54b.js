var rae=Object.defineProperty,sae=Object.defineProperties,oae=Object.getOwnPropertyDescriptors,sk=Object.getOwnPropertySymbols,aae=Object.prototype.hasOwnProperty,lae=Object.prototype.propertyIsEnumerable,ak=Math.pow,ok=(Mr,on,dt)=>on in Mr?rae(Mr,on,{enumerable:!0,configurable:!0,writable:!0,value:dt}):Mr[on]=dt,X_=(Mr,on)=>{for(var dt in on||(on={}))aae.call(on,dt)&&ok(Mr,dt,on[dt]);if(sk)for(var dt of sk(on))lae.call(on,dt)&&ok(Mr,dt,on[dt]);return Mr},lk=(Mr,on)=>sae(Mr,oae(on));(self.webpackChunkandresjosehr_portfolio=self.webpackChunkandresjosehr_portfolio||[]).push([[179],{318:(Mr,on,dt)=>{"use strict";function ht(n){return"function"==typeof n}let lt=!1;const vt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else lt&&console.log("RxJS: Back to a better error behavior. Thank you. <3");lt=n},get useDeprecatedSynchronousErrorHandling(){return lt}};function pn(n){setTimeout(()=>{throw n},0)}const Zn={closed:!0,next(n){},error(n){if(vt.useDeprecatedSynchronousErrorHandling)throw n;pn(n)},complete(){}},ot=Array.isArray||(n=>n&&"number"==typeof n.length);function gn(n){return null!==n&&"object"==typeof n}const Jt=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class $e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_unsubscribe:i,_subscriptions:r}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof $e)t.remove(this);else if(null!==t)for(let s=0;s<t.length;++s)t[s].remove(this);if(ht(i))try{i.call(this)}catch(s){e=s instanceof Jt?Mn(s.errors):[s]}if(ot(r)){let s=-1,o=r.length;for(;++s<o;){const a=r[s];if(gn(a))try{a.unsubscribe()}catch(l){e=e||[],l instanceof Jt?e=e.concat(Mn(l.errors)):e.push(l)}}}if(e)throw new Jt(e)}add(e){let t=e;if(!e)return $e.EMPTY;switch(typeof e){case"function":t=new $e(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof $e)){const s=t;t=new $e,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof $e){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function Mn(n){return n.reduce((e,t)=>e.concat(t instanceof Jt?t.errors:t),[])}$e.EMPTY=((n=new $e).closed=!0,n);const Ci="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class an extends $e{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Zn;break;case 1:if(!e){this.destination=Zn;break}if("object"==typeof e){e instanceof an?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new ga(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new ga(this,e,t,i)}}[Ci](){return this}static create(e,t,i){const r=new an(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class ga extends an{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;ht(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==Zn&&(o=Object.create(t),ht(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;vt.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=vt;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):pn(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;pn(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);vt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),vt.useDeprecatedSynchronousErrorHandling)throw i;pn(i)}}__tryOrSetError(e,t,i){if(!vt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return vt.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(pn(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const hs="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ui(n){return n}function No(...n){return Nn(n)}function Nn(n){return 0===n.length?Ui:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let wt=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function cl(n,e,t){if(n){if(n instanceof an)return n;if(n[Ci])return n[Ci]()}return n||e||t?new an(n,e,t):new an(Zn)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||vt.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),vt.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){vt.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function ll(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof an?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=ks(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[hs](){return this}pipe(...t){return 0===t.length?this:Nn(t)(this)}toPromise(t){return new(t=ks(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function ks(n){if(n||(n=vt.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const ke=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class ln extends $e{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class gt extends an{constructor(e){super(e),this.destination=e}}let Ye=(()=>{class n extends wt{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Ci](){return new gt(this)}lift(t){const i=new Br(this,this);return i.operator=t,i}next(t){if(this.closed)throw new ke;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new ke;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new ke;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new ke;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new ke;return this.hasError?(t.error(this.thrownError),$e.EMPTY):this.isStopped?(t.complete(),$e.EMPTY):(this.observers.push(t),new ln(this,t))}asObservable(){const t=new wt;return t.source=this,t}}return n.create=(e,t)=>new Br(e,t),n})();class Br extends Ye{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):$e.EMPTY}}function xr(n){return n&&"function"==typeof n.schedule}class fs extends an{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const co=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},Ur=function Pd(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Yr=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function yi(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Qn=n=>{if(n&&"function"==typeof n[hs])return(n=>e=>{const t=n[hs]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Yr(n))return co(n);if(yi(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,pn),e))(n);if(n&&"function"==typeof n[Ur])return(n=>e=>{const t=n[Ur]();for(;;){const i=t.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${gn(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function ei(n,e,t,i,r=new fs(n,t,i)){if(!r.closed)return e instanceof wt?e.subscribe(r):Qn(e)(r)}class Ji extends an{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function ze(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new Us(n,e))}}class Us{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new Ln(e,this.project,this.thisArg))}}class Ln extends an{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}function gs(n,e){return new wt(t=>{const i=new $e;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function Zi(n,e){return e?function dk(n,e){if(null!=n){if(function ck(n){return n&&"function"==typeof n[hs]}(n))return function mn(n,e){return new wt(t=>{const i=new $e;return i.add(e.schedule(()=>{const r=n[hs]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(yi(n))return function cr(n,e){return new wt(t=>{const i=new $e;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(Yr(n))return gs(n,e);if(function uk(n){return n&&"function"==typeof n[Ur]}(n)||"string"==typeof n)return function Uf(n,e){if(!n)throw new Error("Iterable cannot be null");return new wt(t=>{const i=new $e;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[Ur](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof wt?n:new wt(Qn(n))}function Vi(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(Vi((r,s)=>Zi(n(r,s)).pipe(ze((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new hk(n,t)))}class hk{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new fk(e,this.project,this.concurrent))}}class fk extends Ji{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,i)}_innerSub(e,t,i){const r=new fs(this,t,i),s=this.destination;s.add(r);const o=ei(this,e,void 0,void 0,r);o!==r&&s.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,i,r,s){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Od(n=Number.POSITIVE_INFINITY){return Vi(Ui,n)}function Ld(n,e){return e?gs(n,e):new wt(co(n))}function Hr(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return xr(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof wt?n[0]:Od(e)(Ld(n,t))}function Y_(){return function(e){return e.lift(new pk(e))}}class pk{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new gk(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class gk extends an{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class tx extends wt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new $e,e.add(this.source.subscribe(new _k(this.getSubject(),this))),e.closed&&(this._connection=null,e=$e.EMPTY)),e}refCount(){return Y_()(this)}}const mk=(()=>{const n=tx.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class _k extends gt{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function K_(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new vk(r,e));const s=Object.create(i,mk);return s.source=i,s.subjectFactory=r,s}}class vk{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function bk(){return new Ye}function Cn(n){for(let e in n)if(n[e]===Cn)return e;throw Error("Could not find renamed property on target object.")}function vn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(vn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Z_(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const wk=Cn({__forward_ref__:Cn});function zt(n){return n.__forward_ref__=zt,n.toString=function(){return vn(this())},n}function Rt(n){return ix(n)?n():n}function ix(n){return"function"==typeof n&&n.hasOwnProperty(wk)&&n.__forward_ref__===zt}class Ue extends Error{constructor(e,t){super(function Q_(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Mt(n){return"string"==typeof n?n:null==n?"":String(n)}function Sr(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Mt(n)}function Vf(n,e){const t=e?` in ${e}`:"";throw new Ue(-201,`No provider for ${Sr(n)} found${t}`)}function Jr(n,e){null==n&&function Fn(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function de(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Nt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ey(n){return rx(n,Hf)||rx(n,ox)}function rx(n,e){return n.hasOwnProperty(e)?n[e]:null}function sx(n){return n&&(n.hasOwnProperty(ty)||n.hasOwnProperty(Dk))?n[ty]:null}const Hf=Cn({\u0275prov:Cn}),ty=Cn({\u0275inj:Cn}),ox=Cn({ngInjectableDef:Cn}),Dk=Cn({ngInjectorDef:Cn});var Et=(()=>((Et=Et||{})[Et.Default=0]="Default",Et[Et.Host=1]="Host",Et[Et.Self=2]="Self",Et[Et.SkipSelf=4]="SkipSelf",Et[Et.Optional=8]="Optional",Et))();let ny;function ma(n){const e=ny;return ny=n,e}function ax(n,e,t){const i=ey(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Et.Optional?null:void 0!==e?e:void Vf(vn(n),"Injector")}function _a(n){return{toString:n}.toString()}var Vs=(()=>((Vs=Vs||{})[Vs.OnPush=0]="OnPush",Vs[Vs.Default=1]="Default",Vs))(),Hs=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(Hs||(Hs={})),Hs))();const Rk="undefined"!=typeof globalThis&&globalThis,Nk="undefined"!=typeof window&&window,Ik="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xn=Rk||"undefined"!=typeof global&&global||Nk||Ik,Dc={},Tn=[],zf=Cn({\u0275cmp:Cn}),iy=Cn({\u0275dir:Cn}),ry=Cn({\u0275pipe:Cn}),lx=Cn({\u0275mod:Cn}),Po=Cn({\u0275fac:Cn}),Fd=Cn({__NG_ELEMENT_ID__:Cn});let Pk=0;function tn(n){return _a(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Vs.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Tn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Hs.Emulated,id:"c",styles:n.styles||Tn,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=Pk++,i.inputs=hx(n.inputs,t),i.outputs=hx(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(cx):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(ux):null,i})}function cx(n){return ur(n)||function ya(n){return n[iy]||null}(n)}function ux(n){return function ul(n){return n[ry]||null}(n)}const dx={};function kt(n){return _a(()=>{const e={type:n.type,bootstrap:n.bootstrap||Tn,declarations:n.declarations||Tn,imports:n.imports||Tn,exports:n.exports||Tn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(dx[n.id]=n.type),e})}function hx(n,e){if(null==n)return Dc;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const ye=tn;function Er(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function ur(n){return n[zf]||null}function ms(n,e){const t=n[lx]||null;if(!t&&!0===e)throw new Error(`Type ${vn(n)} does not have '\u0275mod' property.`);return t}function uo(n){return Array.isArray(n)&&"object"==typeof n[1]}function Gs(n){return Array.isArray(n)&&!0===n[1]}function ay(n){return 0!=(8&n.flags)}function jf(n){return 2==(2&n.flags)}function qf(n){return 1==(1&n.flags)}function Ws(n){return null!==n.template}function Uk(n){return 0!=(512&n[2])}function pl(n,e){return n.hasOwnProperty(Po)?n[Po]:null}class zk{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Dn(){return px}function px(n){return n.type.prototype.ngOnChanges&&(n.setInput=Wk),Gk}function Gk(){const n=mx(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Dc)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Wk(n,e,t,i){const r=mx(n)||function $k(n,e){return n[gx]=e}(n,{previous:Dc,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new zk(l&&l.currentValue,e,o===Dc),n[i]=e}Dn.ngInherit=!0;const gx="__ngSimpleChanges__";function mx(n){return n[gx]||null}let hy;function fy(){return void 0!==hy?hy:"undefined"!=typeof document?document:void 0}function ti(n){return!!n.listen}const _x={createRenderer:(n,e)=>fy()};function vi(n){for(;Array.isArray(n);)n=n[0];return n}function Xf(n,e){return vi(e[n])}function vs(n,e){return vi(e[n.index])}function py(n,e){return n.data[e]}function Pc(n,e){return n[e]}function Qr(n,e){const t=e[n];return uo(t)?t:t[0]}function yx(n){return 4==(4&n[2])}function gy(n){return 128==(128&n[2])}function va(n,e){return null==e?null:n[e]}function vx(n){n[18]=0}function my(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const mt={lFrame:Tx(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function bx(){return mt.bindingsEnabled}function fe(){return mt.lFrame.lView}function sn(){return mt.lFrame.tView}function Gt(n){return mt.lFrame.contextLView=n,n[8]}function Ti(){let n=wx();for(;null!==n&&64===n.type;)n=n.parent;return n}function wx(){return mt.lFrame.currentTNode}function ho(n,e){const t=mt.lFrame;t.currentTNode=n,t.isParent=e}function _y(){return mt.lFrame.isParent}function yy(){mt.lFrame.isParent=!1}function Yf(){return mt.isInCheckNoChangesMode}function Kf(n){mt.isInCheckNoChangesMode=n}function Cr(){const n=mt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Oc(){return mt.lFrame.bindingIndex++}function Lo(n){const e=mt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function l3(n,e){const t=mt.lFrame;t.bindingIndex=t.bindingRootIndex=n,vy(e)}function vy(n){mt.lFrame.currentDirectiveIndex=n}function Sx(){return mt.lFrame.currentQueryIndex}function wy(n){mt.lFrame.currentQueryIndex=n}function u3(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Ex(n,e,t){if(t&Et.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Et.Host||(r=u3(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=mt.lFrame=Cx();return i.currentTNode=e,i.lView=n,!0}function Jf(n){const e=Cx(),t=n[1];mt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Cx(){const n=mt.lFrame,e=null===n?null:n.child;return null===e?Tx(n):e}function Tx(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Dx(){const n=mt.lFrame;return mt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ax=Dx;function Zf(){const n=Dx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Tr(){return mt.lFrame.selectedIndex}function ba(n){mt.lFrame.selectedIndex=n}function ni(){const n=mt.lFrame;return py(n.tView,n.selectedIndex)}function Qf(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function ep(n,e,t){Rx(n,e,3,t)}function tp(n,e,t,i){(3&n[2])===t&&Rx(n,e,t,i)}function My(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Rx(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(v3(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function v3(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Hd{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function np(n,e,t){const i=ti(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];Sy(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function Nx(n){return 3===n||4===n||6===n}function Sy(n){return 64===n.charCodeAt(0)}function ip(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Ix(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Ix(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function Px(n){return-1!==n}function Lc(n){return 32767&n}function Fc(n,e){let t=function S3(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Ey=!0;function rp(n){const e=Ey;return Ey=n,e}let E3=0;function Gd(n,e){const t=Ty(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,Cy(i.data,n),Cy(e,null),Cy(i.blueprint,null));const r=sp(n,e),s=n.injectorIndex;if(Px(r)){const o=Lc(r),a=Fc(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function Cy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Ty(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function sp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function op(n,e,t){!function C3(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Fd)&&(i=t[Fd]),null==i&&(i=t[Fd]=E3++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function Fx(n,e,t){if(t&Et.Optional)return n;Vf(e,"NodeInjector")}function kx(n,e,t,i){if(t&Et.Optional&&void 0===i&&(i=null),0==(t&(Et.Self|Et.Host))){const r=n[9],s=ma(void 0);try{return r?r.get(e,i,t&Et.Optional):ax(e,i,t&Et.Optional)}finally{ma(s)}}return Fx(i,e,t)}function Bx(n,e,t,i=Et.Default,r){if(null!==n){const s=function R3(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Fd)?n[Fd]:void 0;return"number"==typeof e?e>=0?255&e:D3:e}(t);if("function"==typeof s){if(!Ex(e,n,i))return i&Et.Host?Fx(r,t,i):kx(e,t,i,r);try{const o=s(i);if(null!=o||i&Et.Optional)return o;Vf(t)}finally{Ax()}}else if("number"==typeof s){let o=null,a=Ty(n,e),l=-1,c=i&Et.Host?e[16][6]:null;for((-1===a||i&Et.SkipSelf)&&(l=-1===a?sp(n,e):e[a+8],-1!==l&&Hx(i,!1)?(o=e[1],a=Lc(l),e=Fc(l,e)):a=-1);-1!==a;){const u=e[1];if(Vx(s,a,u.data)){const d=A3(a,e,t,o,i,c);if(d!==Ux)return d}l=e[a+8],-1!==l&&Hx(i,e[1].data[a+8]===c)&&Vx(s,a,e)?(o=u,a=Lc(l),e=Fc(l,e)):a=-1}}}return kx(e,t,i,r)}const Ux={};function D3(){return new kc(Ti(),fe())}function A3(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=ap(a,o,t,null==i?jf(a)&&Ey:i!=o&&0!=(3&a.type),r&Et.Host&&s===a);return null!==u?Wd(e,o,u,a):Ux}function ap(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&Ws(f)&&f.type===t)return l}return null}function Wd(n,e,t,i){let r=n[t];const s=e.data;if(function b3(n){return n instanceof Hd}(r)){const o=r;o.resolving&&function Mk(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${n}${t}`)}(Sr(s[t]));const a=rp(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?ma(o.injectImpl):null;Ex(n,i,Et.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function y3(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=px(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&ma(l),rp(a),o.resolving=!1,Ax()}}return r}function Vx(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Hx(n,e){return!(n&Et.Self||n&Et.Host&&e)}class kc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Bx(this._tNode,this._lView,e,i,t)}}function zn(n){return _a(()=>{const e=n.prototype.constructor,t=e[Po]||Dy(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Po]||Dy(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Dy(n){return ix(n)?()=>{const e=Dy(Rt(n));return e&&e()}:pl(n)}function Fo(n){return function T3(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(Nx(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Ti(),n)}const Uc="__parameters__";function Hc(n,e,t){return _a(()=>{const i=function Ay(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Uc)?l[Uc]:Object.defineProperty(l,Uc,{value:[]})[Uc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class tt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=de({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const I3=new tt("AnalyzeForEntryComponents");function bs(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),bs(i,e)):e!==n&&e.push(i)}return e}function fo(n,e){n.forEach(t=>Array.isArray(t)?fo(t,e):e(t))}function Gx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function lp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qd(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function es(n,e,t){let i=zc(n,e);return i>=0?n[1|i]=t:(i=~i,function L3(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Ny(n,e){const t=zc(n,e);if(t>=0)return n[1|t]}function zc(n,e){return function jx(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Xd={},Py="__NG_DI_FLAG__",up="ngTempTokenPath",z3=/\n/gm,Xx="__source",W3=Cn({provide:String,useValue:Cn});let Yd;function Yx(n){const e=Yd;return Yd=n,e}function $3(n,e=Et.Default){if(void 0===Yd)throw new Ue(203,"");return null===Yd?ax(n,void 0,e):Yd.get(n,e&Et.Optional?null:void 0,e)}function q(n,e=Et.Default){return(function Ak(){return ny}()||$3)(Rt(n),e)}const dp=q;function Oy(n){const e=[];for(let t=0;t<n.length;t++){const i=Rt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Ue(900,"");let r,s=Et.Default;for(let o=0;o<i.length;o++){const a=i[o],l=j3(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(q(r,s))}else e.push(q(i))}return e}function Kd(n,e){return n[Py]=e,n.prototype[Py]=e,n}function j3(n){return n[Py]}const Jd=Kd(Hc("Inject",n=>({token:n})),-1),po=Kd(Hc("Optional"),8),Gc=Kd(Hc("SkipSelf"),4);let fp,pp;function $c(n){var e;return(null===(e=function Fy(){if(void 0===fp&&(fp=null,xn.trustedTypes))try{fp=xn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return fp}())||void 0===e?void 0:e.createHTML(n))||n}function tS(n){var e;return(null===(e=function ky(){if(void 0===pp&&(pp=null,xn.trustedTypes))try{pp=xn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return pp}())||void 0===e?void 0:e.createHTML(n))||n}class rS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ma(n){return n instanceof rS?n.changingThisBreaksApplicationSecurity:n}function Qd(n,e){const t=function uB(n){return n instanceof rS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class dB{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString($c(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class hB{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=$c(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=$c(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const pB=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,gB=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function gp(n){return(n=String(n)).match(pB)||n.match(gB)?n:"unsafe:"+n}function oS(n){return(n=String(n)).split(",").map(e=>gp(e.trim())).join(", ")}function go(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function eh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const aS=go("area,br,col,hr,img,wbr"),lS=go("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cS=go("rp,rt"),By=eh(aS,eh(lS,go("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),eh(cS,go("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),eh(cS,lS)),Uy=go("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Vy=go("srcset"),uS=eh(Uy,Vy,go("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),go("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mB=go("script,style,template");class _B{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!By.hasOwnProperty(t))return this.sanitizedSomething=!0,!mB.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!uS.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Uy[a]&&(l=gp(l)),Vy[a]&&(l=oS(l)),this.buf.push(" ",o,'="',dS(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();By.hasOwnProperty(t)&&!aS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(dS(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const yB=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vB=/([^\#-~ |!])/g;function dS(n){return n.replace(/&/g,"&amp;").replace(yB,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(vB,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mp;function Hy(n){return"content"in n&&function wB(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var bi=(()=>((bi=bi||{})[bi.NONE=0]="NONE",bi[bi.HTML=1]="HTML",bi[bi.STYLE=2]="STYLE",bi[bi.SCRIPT=3]="SCRIPT",bi[bi.URL=4]="URL",bi[bi.RESOURCE_URL=5]="RESOURCE_URL",bi))();function xa(n){const e=th();return e?tS(e.sanitize(bi.HTML,n)||""):Qd(n,"HTML")?tS(Ma(n)):function bB(n,e){let t=null;try{mp=mp||function sS(n){const e=new hB(n);return function fB(){try{return!!(new window.DOMParser).parseFromString($c(""),"text/html")}catch(n){return!1}}()?new dB(e):e}(n);let i=e?String(e):"";t=mp.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=mp.getInertBodyElement(i)}while(i!==s);return $c((new _B).sanitizeChildren(Hy(t)||t))}finally{if(t){const i=Hy(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(fy(),Mt(n))}function ws(n){const e=th();return e?e.sanitize(bi.URL,n)||"":Qd(n,"URL")?Ma(n):gp(Mt(n))}function th(){const n=fe();return n&&n[12]}const pS="__ngContext__";function hr(n,e){n[pS]=e}function Gy(n){const e=function nh(n){return n[pS]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function $y(n){return n.ngOriginalError}function kB(n,...e){n.error(...e)}class gl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=function FB(n){return n&&n.ngErrorLogger||kB}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&$y(e);for(;t&&$y(t);)t=$y(t);return t||null}}const vS=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(xn))();function bS(n){return n.ownerDocument}function mo(n){return n instanceof Function?n():n}var ts=(()=>((ts=ts||{})[ts.Important=1]="Important",ts[ts.DashCase=2]="DashCase",ts))();function qy(n,e){return undefined(n,e)}function ih(n){const e=n[3];return Gs(e)?e[3]:e}function Xy(n){return ES(n[13])}function Yy(n){return ES(n[4])}function ES(n){for(;null!==n&&!Gs(n);)n=n[4];return n}function qc(n,e,t,i,r){if(null!=i){let s,o=!1;Gs(i)?s=i:uo(i)&&(o=!0,i=i[0]);const a=vi(i);0===n&&null!==t?null==r?NS(e,t,a):ml(e,t,a,r||null,!0):1===n&&null!==t?ml(e,t,a,r||null,!0):2===n?function BS(n,e,t){const i=_p(n,e);i&&function sU(n,e,t,i){ti(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function lU(n,e,t,i,r){const s=t[7];s!==vi(t)&&qc(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];rh(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function Jy(n,e,t){if(ti(n))return n.createElement(e,t);{const i=null!==t?function Yk(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===i?n.createElement(e):n.createElementNS(i,e)}}function TS(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,my(r,-1)),t.splice(i,1)}function Zy(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&TS(r,i),e>0&&(n[t-1][4]=i[4]);const s=lp(n,10+e);!function JB(n,e){rh(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function DS(n,e){if(!(256&e[2])){const t=e[11];ti(t)&&t.destroyNode&&rh(n,e,t,3,null,null),function eU(n){let e=n[13];if(!e)return Qy(n[1],n);for(;e;){let t=null;if(uo(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)uo(e)&&Qy(e[1],e),e=e[3];null===e&&(e=n),uo(e)&&Qy(e[1],e),t=e&&e[4]}e=t}}(e)}}function Qy(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function rU(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Hd)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function iU(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):vi(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&ti(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Gs(e[3])){t!==e[3]&&TS(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function AS(n,e,t){return function RS(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Hs.None||r===Hs.Emulated)return null}return vs(i,t)}(n,e.parent,t)}function ml(n,e,t,i,r){ti(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function NS(n,e,t){ti(n)?n.appendChild(e,t):e.appendChild(t)}function IS(n,e,t,i,r){null!==i?ml(n,e,t,i,r):NS(n,e,t)}function _p(n,e){return ti(n)?n.parentNode(e):e.parentNode}function PS(n,e,t){return LS(n,e,t)}let LS=function OS(n,e,t){return 40&n.type?vs(n,t):null};function yp(n,e,t,i){const r=AS(n,i,e),s=e[11],a=PS(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)IS(s,r,t[l],a,!1);else IS(s,r,t,a,!1)}function vp(n,e){if(null!==e){const t=e.type;if(3&t)return vs(e,n);if(4&t)return tv(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return vp(n,i);{const r=n[e.index];return Gs(r)?tv(-1,r):vi(r)}}if(32&t)return qy(e,n)()||vi(n[e.index]);{const i=kS(n,e);return null!==i?Array.isArray(i)?i[0]:vp(ih(n[16]),i):vp(n,e.next)}}return null}function kS(n,e){return null!==e?n[16][6].projection[e.projection]:null}function tv(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return vp(i,r)}return e[7]}function nv(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&hr(vi(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)nv(n,e,t.child,i,r,s,!1),qc(e,n,r,a,s);else if(32&l){const c=qy(t,i);let u;for(;u=c();)qc(e,n,r,u,s);qc(e,n,r,a,s)}else 16&l?US(n,e,i,t,r,s):qc(e,n,r,a,s);t=o?t.projectionNext:t.next}}function rh(n,e,t,i,r,s){nv(t,i,n.firstChild,e,r,s,!1)}function US(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)qc(e,n,r,l[c],s);else nv(n,e,l,o[3],r,s,!0)}function VS(n,e,t){ti(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function iv(n,e,t){ti(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function HS(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const zS="ng-template";function uU(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==HS(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function GS(n){return 4===n.type&&n.value!==zS}function dU(n,e,t){return e===(4!==n.type||t?n.value:zS)}function hU(n,e,t){let i=4;const r=n.attrs||[],s=function gU(n){for(let e=0;e<n.length;e++)if(Nx(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!dU(n,l,t)||""===l&&1===e.length){if($s(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!uU(n.attrs,c,t)){if($s(i))return!1;o=!0}continue}const d=fU(8&i?"class":l,r,GS(n),t);if(-1===d){if($s(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==HS(f,c,0)||2&i&&c!==h){if($s(i))return!1;o=!0}}}}else{if(!o&&!$s(i)&&!$s(l))return!1;if(o&&$s(l))continue;o=!1,i=l|1&i}}return $s(i)||o}function $s(n){return 0==(1&n)}function fU(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function mU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function WS(n,e,t=!1){for(let i=0;i<e.length;i++)if(hU(n,e[i],t))return!0;return!1}function _U(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function $S(n,e){return n?":not("+e.trim()+")":e}function yU(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!$s(o)&&(e+=$S(s,r),r=""),i=o,s=s||!$s(i);t++}return""!==r&&(e+=$S(s,r)),e}const xt={};function W(n){jS(sn(),fe(),Tr()+n,Yf())}function jS(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&ep(e,s,t)}else{const s=n.preOrderHooks;null!==s&&tp(e,s,0,t)}ba(t)}function bp(n,e){return n<<17|e<<2}function js(n){return n>>17&32767}function rv(n){return 2|n}function ko(n){return(131068&n)>>2}function sv(n,e){return-131069&n|e<<2}function ov(n){return 1|n}function iE(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];wy(r),o.contentQueries(2,e[s],s)}}}function sh(n,e,t,i,r,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,vx(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function Xc(n,e,t,i,r){let s=n.data[e];if(null===s)s=function gv(n,e,t,i,r){const s=wx(),o=_y(),l=n.data[e]=function FU(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),function a3(){return mt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Vd(){const n=mt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ho(s,!0),s}function Yc(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function oh(n,e,t){Jf(e);try{const i=n.viewQuery;null!==i&&Sv(1,i,t);const r=n.template;null!==r&&rE(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&iE(n,e),n.staticViewQueries&&Sv(2,n.viewQuery,t);const s=n.components;null!==s&&function PU(n,e){for(let t=0;t<e.length;t++)eV(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,Zf()}}function Kc(n,e,t,i){const r=e[2];if(256==(256&r))return;Jf(e);const s=Yf();try{vx(e),function Mx(n){return mt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&rE(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&ep(e,c,null)}else{const c=n.preOrderHooks;null!==c&&tp(e,c,0,null),My(e,0)}if(function ZU(n){for(let e=Xy(n);null!==e;e=Yy(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&my(s,1),r[2]|=1024}}}(e),function JU(n){for(let e=Xy(n);null!==e;e=Yy(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];gy(i)&&Kc(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&iE(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&ep(e,c)}else{const c=n.contentHooks;null!==c&&tp(e,c,1),My(e,1)}!function NU(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)ba(~r);else{const s=r,o=t[++i],a=t[++i];l3(o,s),a(2,e[s])}}}finally{ba(-1)}}(n,e);const a=n.components;null!==a&&function IU(n,e){for(let t=0;t<e.length;t++)QU(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Sv(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&ep(e,c)}else{const c=n.viewHooks;null!==c&&tp(e,c,2),My(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,my(e[3],-1))}finally{Zf()}}function OU(n,e,t,i){const r=e[10],s=!Yf(),o=yx(e);try{s&&!o&&r.begin&&r.begin(),o&&oh(n,e,i),Kc(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function rE(n,e,t,i,r){const s=Tr(),o=2&i;try{ba(-1),o&&e.length>20&&jS(n,e,20,Yf()),t(i,r)}finally{ba(s)}}function sE(n,e,t){if(ay(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function mv(n,e,t){!bx()||(function GU(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Gd(t,e),hr(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Ws(l);c&&XU(e,t,l);const u=Wd(e,n,a,t);hr(u,e),null!==o&&YU(0,a-r,u,l,0,o),c&&(Qr(t.index,e)[8]=u)}}(n,e,t,vs(t,e)),128==(128&t.flags)&&function WU(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=function c3(){return mt.lFrame.currentDirectiveIndex}();try{ba(o);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];vy(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&fE(c,u)}}finally{ba(-1),vy(a)}}(n,e,t))}function _v(n,e,t=vs){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function oE(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=xp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function xp(n,e,t,i,r,s,o,a,l,c){const u=20+i,d=u+r,h=function LU(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:xt);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function cE(n,e,t,i){const r=vE(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&bE(n).push(i,r.length-1))}function uE(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function ns(n,e,t,i,r,s,o,a){const l=vs(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(xE(n,t,u,i,r),jf(e)&&function UU(n,e){const t=Qr(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function BU(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,ti(s)?s.setProperty(l,i,r):Sy(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function yv(n,e,t,i){let r=!1;if(bx()){const s=function $U(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];WS(t,o.selectors,!1)&&(r||(r=[]),op(Gd(t,e),n,o.type),Ws(o)?(pE(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,gE(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=Yc(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=ip(t.mergedAttrs,d.hostAttrs),mE(n,t,e,c,d),qU(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function kU(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===s||GS(e)?null:KU(d,s);o.push(h),a=uE(d,c,a),l=uE(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function jU(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Ue(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=ip(t.mergedAttrs,t.attrs),r}function hE(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function zU(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function fE(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function pE(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function qU(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ws(e)&&(t[""]=n)}}function gE(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function mE(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=pl(r.type)),o=new Hd(s,Ws(r),null);n.blueprint[i]=o,t[i]=o,hE(n,e,0,i,Yc(n,t,r.hostVars,xt),r)}function XU(n,e,t){const i=vs(e,n),r=oE(t),s=n[10],o=Sp(n,sh(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function _o(n,e,t,i,r,s){const o=vs(n,e);!function vv(n,e,t,i,r,s,o){if(null==s)ti(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?Mt(s):o(s,i||"",r);ti(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function YU(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function KU(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function _E(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function QU(n,e){const t=Qr(e,n);if(gy(t)){const i=t[1];80&t[2]?Kc(i,t,i.template,t[8]):t[5]>0&&bv(t)}}function bv(n){for(let i=Xy(n);null!==i;i=Yy(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];Kc(o,s,o.template,s[8])}else s[5]>0&&bv(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Qr(t[i],n);gy(r)&&r[5]>0&&bv(r)}}function eV(n,e){const t=Qr(e,n),i=t[1];(function tV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),oh(i,t,t[8])}function Sp(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function wv(n){for(;n;){n[2]|=64;const e=ih(n);if(Uk(n)&&!e)return n;n=e}return null}function xv(n,e,t){const i=e[10];i.begin&&i.begin();try{Kc(n,e,n.template,t)}catch(r){throw ME(e,r),r}finally{i.end&&i.end()}}function yE(n){!function Mv(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=Gy(t),r=i[1];OU(r,i,r.template,t)}}(n[8])}function Sv(n,e,t){wy(0),e(n,t)}const sV=(()=>Promise.resolve(null))();function vE(n){return n[7]||(n[7]=[])}function bE(n){return n.cleanup||(n.cleanup=[])}function ME(n,e){const t=n[9],i=t?t.get(gl,null):null;i&&i.handleError(e)}function xE(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Bo(n,e,t){const i=Xf(e,n);!function CS(n,e,t){ti(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function Ep(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Z_(r,a):2==s&&(i=Z_(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const ah=new tt("INJECTOR",-1);class SE{get(e,t=Xd){if(t===Xd){const i=new Error(`NullInjectorError: No provider for ${vn(e)}!`);throw i.name="NullInjectorError",i}return t}}const Ev=new tt("Set Injector scope."),lh={},lV={};let Cv;function EE(){return void 0===Cv&&(Cv=new SE),Cv}function CE(n,e=null,t=null,i){const r=TE(n,e,t,i);return r._resolveInjectorDefTypes(),r}function TE(n,e=null,t=null,i){return new cV(n,t,e||EE(),i)}class cV{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&fo(t,a=>this.processProvider(a,e,t)),fo([e],a=>this.processInjectorType(a,[],s)),this.records.set(ah,Jc(void 0,this));const o=this.records.get(Ev);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:vn(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Xd,i=Et.Default){this.assertNotDestroyed();const r=Yx(this),s=ma(void 0);try{if(!(i&Et.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function _V(n){return"function"==typeof n||"object"==typeof n&&n instanceof tt}(e)&&ey(e);a=l&&this.injectableDefInScope(l)?Jc(Tv(e),lh):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Et.Self?EE():this.parent).get(e,t=i&Et.Optional&&t===Xd?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[up]=o[up]||[]).unshift(vn(e)),r)throw o;return function q3(n,e,t,i){const r=n[up];throw e[Xx]&&r.unshift(e[Xx]),n.message=function X3(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=vn(e);if(Array.isArray(e))r=e.map(vn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):vn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(z3,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[up]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{ma(s),Yx(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(vn(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processInjectorType(e,t,i){if(!(e=Rt(e)))return!1;let r=sx(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=sx(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{fo(r.imports,d=>{this.processInjectorType(d,t,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];fo(f,p=>this.processProvider(p,h,f||Tn))}}this.injectorDefTypes.add(o);const l=pl(o)||(()=>new o);this.records.set(o,Jc(l,lh));const c=r.providers;if(null!=c&&!a){const u=e;fo(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=Zc(e=Rt(e))?e:Rt(e&&e.provide);const s=function dV(n,e,t){return AE(n)?Jc(void 0,n.useValue):Jc(DE(n),lh)}(e);if(Zc(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Jc(void 0,lh,!0),o.factory=()=>Oy(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===lh&&(t.value=lV,t.value=t.factory()),"object"==typeof t.value&&t.value&&function mV(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Rt(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Tv(n){const e=ey(n),t=null!==e?e.factory:pl(n);if(null!==t)return t;if(n instanceof tt)throw new Ue(204,!1);if(n instanceof Function)return function uV(n){const e=n.length;if(e>0)throw qd(e,"?"),new Ue(204,!1);const t=function Ck(n){const e=n&&(n[Hf]||n[ox]);if(e){const t=function Tk(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Ue(204,!1)}function DE(n,e,t){let i;if(Zc(n)){const r=Rt(n);return pl(r)||Tv(r)}if(AE(n))i=()=>Rt(n.useValue);else if(function fV(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Oy(n.deps||[]));else if(function hV(n){return!(!n||!n.useExisting)}(n))i=()=>q(Rt(n.useExisting));else{const r=Rt(n&&(n.useClass||n.provide));if(!function gV(n){return!!n.deps}(n))return pl(r)||Tv(r);i=()=>new r(...Oy(n.deps))}return i}function Jc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function AE(n){return null!==n&&"object"==typeof n&&W3 in n}function Zc(n){return"function"==typeof n}let Gn=(()=>{class n{static create(t,i){var r;if(Array.isArray(t))return CE({name:""},i,t,"");{const s=null!==(r=t.name)&&void 0!==r?r:"";return CE({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=Xd,n.NULL=new SE,n.\u0275prov=de({token:n,providedIn:"any",factory:()=>q(ah)}),n.__NG_ELEMENT_ID__=-1,n})();function EV(n,e){Qf(Gy(n)[1],Ti())}let Cp=null;function Qc(){if(!Cp){const n=xn.Symbol;if(n&&n.iterator)Cp=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Cp=i)}}}return Cp}function ch(n){return!!Nv(n)&&(Array.isArray(n)||!(n instanceof Map)&&Qc()in n)}function Nv(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function yo(n,e,t){return n[e]=t}function fr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function _l(n,e,t,i){const r=fr(n,e,t);return fr(n,e+1,i)||r}function Ms(n,e,t,i,r,s){const o=_l(n,e,t,i);return _l(n,e+2,r,s)||o}function nn(n,e,t,i){const r=fe();return fr(r,Oc(),e)&&(sn(),_o(ni(),r,n,e,t,i)),nn}function tu(n,e,t,i){return fr(n,Oc(),t)?e+Mt(t)+i:xt}function ae(n,e,t,i,r,s,o,a){const l=fe(),c=sn(),u=n+20,d=c.firstCreatePass?function FV(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Xc(e,n,4,o||null,va(c,a));yv(e,t,u,va(c,l)),Qf(e,u);const d=u.tViews=xp(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];ho(d,!1);const h=l[11].createComment("");yp(c,l,h,d),hr(h,l),Sp(l,l[u]=_E(h,l,h,d)),qf(d)&&mv(c,l,d),null!=o&&_v(l,d,a)}function D(n,e=Et.Default){const t=fe();return null===t?q(n,e):Bx(Ti(),t,Rt(n),e)}function Fv(){throw new Error("invalid")}function j(n,e,t){const i=fe();return fr(i,Oc(),e)&&ns(sn(),ni(),i,n,e,i[11],t,!1),j}function kv(n,e,t,i,r){const o=r?"class":"style";xE(n,t,e.inputs[o],o,i)}function O(n,e,t,i){const r=fe(),s=sn(),o=20+n,a=r[11],l=r[o]=Jy(a,e,function _3(){return mt.lFrame.currentNamespace}()),c=s.firstCreatePass?function iH(n,e,t,i,r,s,o){const a=e.consts,c=Xc(e,n,2,r,va(a,s));return yv(e,t,c,va(a,o)),null!==c.attrs&&Ep(c,c.attrs,!1),null!==c.mergedAttrs&&Ep(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];ho(c,!0);const u=c.mergedAttrs;null!==u&&np(a,l,u);const d=c.classes;null!==d&&iv(a,l,d);const h=c.styles;return null!==h&&VS(a,l,h),64!=(64&c.flags)&&yp(s,r,l,c),0===function t3(){return mt.lFrame.elementDepthCount}()&&hr(l,r),function n3(){mt.lFrame.elementDepthCount++}(),qf(c)&&(mv(s,r,c),sE(s,c,r)),null!==i&&_v(r,c),O}function k(){let n=Ti();_y()?yy():(n=n.parent,ho(n,!1));const e=n;!function i3(){mt.lFrame.elementDepthCount--}();const t=sn();return t.firstCreatePass&&(Qf(t,n),ay(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function M3(n){return 0!=(16&n.flags)}(e)&&kv(t,e,fe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function x3(n){return 0!=(32&n.flags)}(e)&&kv(t,e,fe(),e.stylesWithoutHost,!1),k}function Qe(n,e,t,i){return O(n,e,t,i),k(),Qe}function Ca(n,e,t){const i=fe(),r=sn(),s=n+20,o=r.firstCreatePass?function rH(n,e,t,i,r){const s=e.consts,o=va(s,i),a=Xc(e,n,8,"ng-container",o);return null!==o&&Ep(a,o,!0),yv(e,t,a,va(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];ho(o,!0);const a=i[s]=i[11].createComment("");return yp(r,i,a,o),hr(a,i),qf(o)&&(mv(r,i,o),sE(r,o,i)),null!=t&&_v(i,o),Ca}function Ta(){let n=Ti();const e=sn();return _y()?yy():(n=n.parent,ho(n,!1)),e.firstCreatePass&&(Qf(e,n),ay(n)&&e.queries.elementEnd(n)),Ta}function bn(){return fe()}function dh(n){return!!n&&"function"==typeof n.then}const Bv=function lC(n){return!!n&&"function"==typeof n.subscribe};function Pe(n,e,t,i){const r=fe(),s=sn(),o=Ti();return function uC(n,e,t,i,r,s,o,a){const l=qf(i),u=n.firstCreatePass&&bE(n),d=e[8],h=vE(e);let f=!0;if(3&i.type||a){const m=vs(i,e),g=a?a(m):m,v=h.length,y=a?b=>a(vi(b[i.index])):i.index;if(ti(t)){let b=null;if(!a&&l&&(b=function sH(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,f=!1;else{s=Uv(i,e,d,s,!1);const E=t.listen(g,r,s);h.push(s,E),u&&u.push(r,y,v,v+1)}}else s=Uv(i,e,d,s,!0),g.addEventListener(r,s,o),h.push(s),u&&u.push(r,y,v,o)}else s=Uv(i,e,d,s,!1);const p=i.outputs;let _;if(f&&null!==p&&(_=p[r])){const m=_.length;if(m)for(let g=0;g<m;g+=2){const S=e[_[g]][_[g+1]].subscribe(s),M=h.length;h.push(s,S),u&&u.push(r,i.index,M,-(M+1))}}}(s,r,r[11],o,n,e,!!t,i),Pe}function dC(n,e,t,i){try{return!1!==t(i)}catch(r){return ME(n,r),!1}}function Uv(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?Qr(n.index,e):e;0==(32&e[2])&&wv(a);let l=dC(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=dC(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function oe(n=1){return function d3(n){return(mt.lFrame.contextLView=function h3(n,e){for(;n>0;)e=e[15],n--;return e}(n,mt.lFrame.contextLView))[8]}(n)}function oH(n,e){let t=null;const i=function pU(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?WS(n,s,!0):_U(i,s))return r}else t=r}return t}function bC(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?js(s):ko(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];cH(n[a],e)&&(l=!0,n[a+1]=i?ov(u):rv(u)),a=i?js(u):ko(u)}l&&(n[t+1]=i?rv(s):ov(s))}function cH(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&zc(n,e)>=0}const Ai={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wC(n){return n.substring(Ai.key,Ai.keyEnd)}function uH(n){return n.substring(Ai.value,Ai.valueEnd)}function MC(n,e){const t=Ai.textEnd;return t===e?-1:(e=Ai.keyEnd=function fH(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Ai.key=e,t),uu(n,e,t))}function xC(n,e){const t=Ai.textEnd;let i=Ai.key=uu(n,e,t);return t===i?-1:(i=Ai.keyEnd=function pH(n,e,t){let i;for(;e<t&&(45===(i=n.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(n,i,t),i=EC(n,i,t),i=Ai.value=uu(n,i,t),i=Ai.valueEnd=function gH(n,e,t){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<t;){const l=n.charCodeAt(o++);if(59===l)return a;34===l||39===l?a=o=CC(n,l,o,t):e===o-4&&85===s&&82===r&&76===i&&40===l?a=o=CC(n,41,o,t):l>32&&(a=o),s=r,r=i,i=-33&l}return a}(n,i,t),EC(n,i,t))}function SC(n){Ai.key=0,Ai.keyEnd=0,Ai.value=0,Ai.valueEnd=0,Ai.textEnd=n.length}function uu(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function EC(n,e,t,i){return(e=uu(n,e,t))<t&&e++,e}function CC(n,e,t,i){let r=-1,s=t;for(;s<i;){const o=n.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function ft(n,e){return function Ys(n,e,t,i){const r=fe(),s=sn(),o=Lo(2);s.firstUpdatePass&&DC(s,n,o,i),e!==xt&&fr(r,o,e)&&RC(s,s.data[Tr()],r,r[11],n,r[o+1]=function xH(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=vn(Ma(n)))),n}(e,t),i,o)}(n,e,null,!0),ft}function mH(n,e){for(let t=function hH(n){return SC(n),xC(n,uu(n,0,Ai.textEnd))}(e);t>=0;t=xC(e,t))AC(n,wC(e),uH(e))}function Xs(n){Ks(es,bo,n,!0)}function bo(n,e){for(let t=function dH(n){return SC(n),MC(n,uu(n,0,Ai.textEnd))}(e);t>=0;t=MC(e,t))es(n,wC(e),!0)}function Ks(n,e,t,i){const r=sn(),s=Lo(2);r.firstUpdatePass&&DC(r,null,s,i);const o=fe();if(t!==xt&&fr(o,s,t)){const a=r.data[Tr()];if(IC(a,i)&&!TC(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Z_(l,t||"")),kv(r,a,o,t,i)}else!function MH(n,e,t,i,r,s,o,a){r===xt&&(r=Tn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let _,p=null;u===d?(l+=2,c+=2,h!==f&&(p=d,_=f)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,_=f),null!==p&&RC(n,e,t,i,p,_,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function wH(n,e,t){if(null==t||""===t)return Tn;const i=[],r=Ma(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function TC(n,e){return e>=n.expandoStartIndex}function DC(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Tr()],o=TC(n,t);IC(s,i)&&null===e&&!o&&(e=!1),e=function _H(n,e,t,i){const r=function by(n){const e=mt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=hh(t=Hv(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=Hv(r,n,e,t,i),null===s){let l=function yH(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==ko(i))return n[js(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=Hv(null,n,e,l[1],i),l=hh(l,e.attrs,i),function vH(n,e,t,i){n[js(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function bH(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=hh(i,n[s].hostAttrs,t);return hh(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function aH(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=js(o),l=ko(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||zc(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=js(n[a+1]);n[i+1]=bp(h,a),0!==h&&(n[h+1]=sv(n[h+1],i)),n[a+1]=function wU(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=bp(a,0),0!==a&&(n[a+1]=sv(n[a+1],i)),a=i;else n[i+1]=bp(l,0),0===a?a=i:n[l+1]=sv(n[l+1],i),l=i;c&&(n[i+1]=rv(n[i+1])),bC(n,u,i,!0),bC(n,u,i,!1),function lH(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&zc(s,e)>=0&&(t[i+1]=ov(t[i+1]))}(e,u,n,i,s),o=bp(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function Hv(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=hh(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function hh(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),es(n,o,!!t||e[++s]))}return void 0===n?null:n}function AC(n,e,t){es(n,e,Ma(t))}function RC(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Rp(function YS(n){return 1==(1&n)}(c)?NC(l,e,t,r,ko(c),o):void 0)||(Rp(s)||function XS(n){return 2==(2&n)}(c)&&(s=NC(l,null,t,r,a,o)),function cU(n,e,t,i,r){const s=ti(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:ts.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=ts.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,Xf(Tr(),t),r,s))}function NC(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===xt&&(h=d?Tn:void 0);let f=d?Ny(h,i):u===i?h:void 0;if(c&&!Rp(f)&&(f=Ny(l,i)),Rp(f)&&(a=f,o))return a;const p=n[r+1];r=o?js(p):ko(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Ny(l,i))}return a}function Rp(n){return void 0!==n}function IC(n,e){return 0!=(n.flags&(e?16:32))}function re(n,e=""){const t=fe(),i=sn(),r=n+20,s=i.firstCreatePass?Xc(i,r,1,e,null):i.data[r],o=t[r]=function Ky(n,e){return ti(n)?n.createText(e):n.createTextNode(e)}(t[11],e);yp(i,t,o,s),ho(s,!1)}function ii(n){return Ri("",n,""),ii}function Ri(n,e,t){const i=fe(),r=tu(i,n,e,t);return r!==xt&&Bo(i,Tr(),r),Ri}function zC(n,e,t){!function vo(n){Ks(AC,mH,n,!1)}(tu(fe(),n,e,t))}function Gr(n,e,t){const i=fe();return fr(i,Oc(),e)&&ns(sn(),ni(),i,n,e,i[11],t,!0),Gr}const bl=void 0;var HH=["en",[["a","p"],["AM","PM"],bl],[["AM","PM"],bl,bl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bl,"{1} 'at' {0}",bl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function VH(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let hu={};function eT(n){return n in hu||(hu[n]=xn.ng&&xn.ng.common&&xn.ng.common.locales&&xn.ng.common.locales[n]),hu[n]}var Le=(()=>((Le=Le||{})[Le.LocaleId=0]="LocaleId",Le[Le.DayPeriodsFormat=1]="DayPeriodsFormat",Le[Le.DayPeriodsStandalone=2]="DayPeriodsStandalone",Le[Le.DaysFormat=3]="DaysFormat",Le[Le.DaysStandalone=4]="DaysStandalone",Le[Le.MonthsFormat=5]="MonthsFormat",Le[Le.MonthsStandalone=6]="MonthsStandalone",Le[Le.Eras=7]="Eras",Le[Le.FirstDayOfWeek=8]="FirstDayOfWeek",Le[Le.WeekendRange=9]="WeekendRange",Le[Le.DateFormat=10]="DateFormat",Le[Le.TimeFormat=11]="TimeFormat",Le[Le.DateTimeFormat=12]="DateTimeFormat",Le[Le.NumberSymbols=13]="NumberSymbols",Le[Le.NumberFormats=14]="NumberFormats",Le[Le.CurrencyCode=15]="CurrencyCode",Le[Le.CurrencySymbol=16]="CurrencySymbol",Le[Le.CurrencyName=17]="CurrencyName",Le[Le.Currencies=18]="Currencies",Le[Le.Directionality=19]="Directionality",Le[Le.PluralCase=20]="PluralCase",Le[Le.ExtraData=21]="ExtraData",Le))();const Np="en-US";let tT=Np;function Wv(n,e,t,i,r){if(n=Rt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Wv(n[s],e,t,i,r);else{const s=sn(),o=fe();let a=Zc(n)?n:Rt(n.provide),l=DE(n);const c=Ti(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Zc(n)||!n.multi){const f=new Hd(l,r,D),p=jv(a,e,r?u:u+h,d);-1===p?(op(Gd(c,o),s,a),$v(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=jv(a,e,u+h,d),p=jv(a,e,u,u+h),_=f>=0&&t[f],m=p>=0&&t[p];if(r&&!m||!r&&!_){op(Gd(c,o),s,a);const g=function Bz(n,e,t,i,r){const s=new Hd(n,t,D);return s.multi=[],s.index=e,s.componentProviders=0,ST(s,r,i&&!t),s}(r?kz:Fz,t.length,r,i,l);!r&&m&&(t[p].providerFactory=g),$v(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(g),o.push(g)}else $v(s,n,f>-1?f:p,ST(t[r?p:f],l,!r&&i));!r&&i&&m&&t[p].componentProviders++}}}function $v(n,e,t,i){const r=Zc(e),s=function pV(n){return!!n.useClass}(e);if(r||s){const l=(s?Rt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function ST(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function jv(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Fz(n,e,t,i){return qv(this.multi,[])}function kz(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Wd(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),qv(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],qv(r,s);return s}function qv(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function cn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function Lz(n,e,t){const i=sn();if(i.firstCreatePass){const r=Ws(n);Wv(t,i.data,i.blueprint,r,!0),Wv(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class ET{}class Hz{resolveComponentFactory(e){throw function Vz(n){const e=Error(`No component factory found for ${vn(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let xs=(()=>{class n{}return n.NULL=new Hz,n})();function zz(){return gu(Ti(),fe())}function gu(n,e){return new Tt(vs(n,e))}let Tt=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=zz,n})();function Gz(n){return n instanceof Tt?n.nativeElement:n}class wl{}let wi=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function $z(){const n=fe(),t=Qr(Ti().index,n);return function Wz(n){return n[11]}(uo(t)?t:n)}(),n})(),jz=(()=>{class n{}return n.\u0275prov=de({token:n,providedIn:"root",factory:()=>null}),n})();class yh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const qz=new yh("13.2.3"),Xv={};function Fp(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(vi(s)),Gs(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Fp(l[1],l,c,i)}const o=t.type;if(8&o)Fp(n,e,t.child,i);else if(32&o){const a=qy(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=kS(e,t);if(Array.isArray(a))i.push(...a);else{const l=ih(e[16]);Fp(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class vh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Fp(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Gs(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Zy(e,i),lp(t,i))}this._attachedToViewContainer=!1}DS(this._lView[1],this._lView)}onDestroy(e){cE(this._lView[1],this._lView,null,e)}markForCheck(){wv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){xv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function iV(n,e,t){Kf(!0);try{xv(n,e,t)}finally{Kf(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function QB(n,e){rh(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ue(902,"");this._appRef=e}}class Xz extends vh{constructor(e){super(e),this._view=e}detectChanges(){yE(this._view)}checkNoChanges(){!function rV(n){Kf(!0);try{yE(n)}finally{Kf(!1)}}(this._view)}get context(){return null}}class TT extends xs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ur(e);return new Yv(t,this.ngModule)}}function DT(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const Kz=new tt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>vS});class Yv extends ET{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function vU(n){return n.map(yU).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return DT(this.componentDef.inputs)}get outputs(){return DT(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function Jz(n,e){return{get:(t,i,r)=>{const s=n.get(t,Xv,r);return s!==Xv||i===Xv?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(wl,_x),a=s.get(jz,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function lE(n,e,t){if(ti(n))return n.selectRootElement(e,t===Hs.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):Jy(o.createRenderer(null,this.componentDef),c,function Yz(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function VE(n,e){return{components:[],scheduler:n||vS,clean:sV,playerHandler:e||null,flags:0}}(),f=xp(0,null,null,1,0,null,null,null,null,null),p=sh(null,f,h,d,null,null,o,l,a,s);let _,m;Jf(p);try{const g=function BE(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=Xc(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Ep(l,c,!0),null!==n&&(np(r,n,c),null!==l.classes&&iv(r,n,l.classes),null!==l.styles&&VS(r,n,l.styles)));const u=i.createRenderer(n,e),d=sh(t,oE(e),null,e.onPush?64:16,t[20],l,i,u,s||null,null);return o.firstCreatePass&&(op(Gd(l,t),o,e.type),pE(o,l),gE(l,t.length,1)),Sp(t,d),t[20]=d}(u,this.componentDef,p,o,l);if(u)if(i)np(l,u,["ng-version",qz.full]);else{const{attrs:v,classes:y}=function bU(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!$s(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);v&&np(l,u,v),y&&y.length>0&&iv(l,u,y.join(" "))}if(m=py(f,20),void 0!==t){const v=m.projection=[];for(let y=0;y<this.ngContentSelectors.length;y++){const b=t[y];v.push(null!=b?Array.from(b):null)}}_=function UE(n,e,t,i,r){const s=t[1],o=function HU(n,e,t){const i=Ti();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),mE(n,i,e,Yc(n,e,1,null),t));const r=Wd(e,n,i.directiveStart,i);hr(r,e);const s=vs(i,e);return s&&hr(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=Ti();e.contentQueries(1,o,l.directiveStart)}const a=Ti();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ba(a.index),hE(t[1],a,0,a.directiveStart,a.directiveEnd,e),fE(e,o)),o}(g,this.componentDef,p,h,[EV]),oh(f,p,null)}finally{Zf()}return new Qz(this.componentType,_,gu(m,p),p,m)}}class Qz extends class Uz{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new Xz(r),this.componentType=e}get injector(){return new kc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Uo{}class AT{}const mu=new Map;class IT extends Uo{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new TT(this);const i=ms(e);this._bootstrapComponents=mo(i.bootstrap),this._r3Injector=TE(e,t,[{provide:Uo,useValue:this},{provide:xs,useValue:this.componentFactoryResolver}],vn(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Gn.THROW_IF_NOT_FOUND,i=Et.Default){return e===Gn||e===Uo||e===ah?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Kv extends AT{constructor(e){super(),this.moduleType=e,null!==ms(e)&&function t4(n){const e=new Set;!function t(i){const r=ms(i,!0),s=r.id;null!==s&&(function RT(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${vn(e)} vs ${vn(e.name)}`)}(s,mu.get(s),i),mu.set(s,i));const o=mo(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new IT(this.moduleType,e)}}function Da(n,e,t,i){return OT(fe(),Cr(),n,e,t,i)}function Js(n,e,t,i,r){return function LT(n,e,t,i,r,s,o){const a=e+t;return _l(n,a,r,s)?yo(n,a+2,o?i.call(o,r,s):i(r,s)):bh(n,a+2)}(fe(),Cr(),n,e,t,i,r)}function PT(n,e,t,i,r,s,o){return function kT(n,e,t,i,r,s,o,a,l){const c=e+t;return Ms(n,c,r,s,o,a)?yo(n,c+4,l?i.call(l,r,s,o,a):i(r,s,o,a)):bh(n,c+4)}(fe(),Cr(),n,e,t,i,r,s,o)}function Jv(n,e,t,i,r,s,o,a){const l=Cr()+n,c=fe(),u=Ms(c,l,t,i,r,s);return fr(c,l+4,o)||u?yo(c,l+5,a?e.call(a,t,i,r,s,o):e(t,i,r,s,o)):function uh(n,e){return n[e]}(c,l+5)}function bh(n,e){const t=n[e];return t===xt?void 0:t}function OT(n,e,t,i,r,s){const o=e+t;return fr(n,o,r)?yo(n,o+1,s?i.call(s,r):i(r)):bh(n,o+1)}function Ni(n,e){const t=sn();let i;const r=n+20;t.firstCreatePass?(i=function a4(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=pl(i.type)),o=ma(D);try{const a=rp(!1),l=s();return rp(a),function kV(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,fe(),r,l),l}finally{ma(o)}}function Ii(n,e,t){const i=n+20,r=fe(),s=Pc(r,i);return function wh(n,e){return n[1].data[e].pure}(r,i)?OT(r,Cr(),e,s.transform,t,s):s.transform(t)}function Zv(n){return e=>{setTimeout(n,void 0,e)}}const Ae=class h4 extends Ye{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const d=e;a=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=Zv(l),a&&(a=Zv(a)),c&&(c=Zv(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof $e&&e.add(u),u}};function f4(){return this._results[Qc()]()}class Qv{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Qc(),i=Qv.prototype;i[t]||(i[t]=f4)}get changes(){return this._changes||(this._changes=new Ae)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=bs(e);(this._changesDetected=!function P3(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Sn=(()=>{class n{}return n.__NG_ELEMENT_ID__=m4,n})();const p4=Sn,g4=class extends p4{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=sh(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),oh(t,i,e),new vh(i)}};function m4(){return Bp(Ti(),fe())}function Bp(n,e){return 4&n.type?new g4(e,n,gu(n,e)):null}let Rr=(()=>{class n{}return n.__NG_ELEMENT_ID__=_4,n})();function _4(){return HT(Ti(),fe())}const y4=Rr,UT=class extends y4{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return gu(this._hostTNode,this._hostLView)}get injector(){return new kc(this._hostTNode,this._hostLView)}get parentInjector(){const e=sp(this._hostTNode,this._hostLView);if(Px(e)){const t=Fc(e,this._hostLView),i=Lc(e);return new kc(t[1].data[i+8],t)}return new kc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=VT(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=e&&!function jd(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new Yv(ur(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(Uo,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function e3(n){return Gs(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new UT(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function tU(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],Gx(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function nU(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=tv(s,o),l=i[11],c=_p(l,o[7]);return null!==c&&function ZB(n,e,t,i,r,s){i[0]=r,i[6]=e,rh(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),Gx(e0(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=VT(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Zy(this._lContainer,t);i&&(lp(e0(this._lContainer),t),DS(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=Zy(this._lContainer,t);return i&&null!=lp(e0(this._lContainer),t)?new vh(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function VT(n){return n[8]}function e0(n){return n[8]||(n[8]=[])}function HT(n,e){let t;const i=e[n.index];if(Gs(i))t=i;else{let r;if(8&n.type)r=vi(i);else{const s=e[11];r=s.createComment("");const o=vs(n,e);ml(s,_p(s,o),r,function oU(n,e){return ti(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=_E(i,e,r,n),Sp(e,t)}return new UT(t,n,e)}class t0{constructor(e){this.queryList=e,this.matches=null}clone(){return new t0(this.queryList)}setDirty(){this.queryList.setDirty()}}class n0{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new n0(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==jT(e,t).matches&&this.queries[t].setDirty()}}class zT{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class r0{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new r0(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class s0{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new s0(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,w4(t,s)),this.matchTNodeWithReadOption(e,t,ap(t,e,s,!1,!1))}else i===Sn?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ap(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Tt||r===Rr||r===Sn&&4&t.type)this.addMatch(t.index,-2);else{const s=ap(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function w4(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function x4(n,e,t,i){return-1===t?function M4(n,e){return 11&n.type?gu(n,e):4&n.type?Bp(n,e):null}(e,n):-2===t?function S4(n,e,t){return t===Tt?gu(e,n):t===Sn?Bp(e,n):t===Rr?HT(e,n):void 0}(n,e,i):Wd(n,n[1],t,e)}function GT(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:x4(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function o0(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=GT(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&o0(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];o0(f[1],f,c,i)}}}}}return i}function un(n){const e=fe(),t=sn(),i=Sx();wy(i+1);const r=jT(t,i);if(n.dirty&&yx(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?o0(t,e,i,[]):GT(t,e,r,i);n.reset(s,Gz),n.notifyOnChanges()}return!0}return!1}function Vo(n,e,t){const i=sn();i.firstCreatePass&&($T(i,new zT(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),WT(i,fe(),e)}function kn(n,e,t,i){const r=sn();if(r.firstCreatePass){const s=Ti();$T(r,new zT(e,t,i),s.index),function C4(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}WT(r,fe(),t)}function dn(){return function E4(n,e){return n[19].queries[e].queryList}(fe(),Sx())}function WT(n,e,t){const i=new Qv(4==(4&t));cE(n,e,i,i.destroy),null===e[19]&&(e[19]=new n0),e[19].queries.push(new t0(i))}function $T(n,e,t){null===n.queries&&(n.queries=new r0),n.queries.track(new s0(e,t))}function jT(n,e){return n.queries.getByIndex(e)}function Hp(...n){}const yu=new tt("Application Initializer");let vu=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Hp,this.reject=Hp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(dh(s))t.push(s);else if(Bv(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(q(yu,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const xh=new tt("AppId"),W4={provide:xh,useFactory:function G4(){return`${h0()}${h0()}${h0()}`},deps:[]};function h0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cD=new tt("Platform Initializer"),wo=new tt("Platform ID"),f0=new tt("appBootstrapListener");let uD=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const Ss=new tt("LocaleId"),dD=new tt("DefaultCurrencyCode");class $4{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let zp=(()=>{class n{compileModuleSync(t){return new Kv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=mo(ms(t).declarations).reduce((o,a)=>{const l=ur(a);return l&&o.push(new Yv(l)),o},[]);return new $4(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const q4=(()=>Promise.resolve(0))();function p0(n){"undefined"==typeof Zone?q4.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Bt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ae(!1),this.onMicrotaskEmpty=new Ae(!1),this.onStable=new Ae(!1),this.onError=new Ae(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function X4(){let n=xn.requestAnimationFrame,e=xn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function J4(n){const e=()=>{!function K4(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,m0(n),n.isCheckStableRunning=!0,g0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),m0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return hD(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),fD(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return hD(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),fD(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,m0(n),g0(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Bt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Y4,Hp,Hp);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Y4={};function g0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function m0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function hD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fD(n){n._nesting--,g0(n)}class Z4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ae,this.onMicrotaskEmpty=new Ae,this.onStable=new Ae,this.onError=new Ae}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let _0=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bt.assertNotInAngularZone(),p0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())p0(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(q(Bt))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),pD=(()=>{class n{constructor(){this._applications=new Map,y0.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return y0.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class Q4{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let Zs,y0=new Q4;const gD=new tt("AllowMultipleToken");class mD{constructor(e,t){this.name=e,this.token=t}}function _D(n,e,t=[]){const i=`Platform: ${e}`,r=new tt(i);return(s=[])=>{let o=yD();if(!o||o.injector.get(gD,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:Ev,useValue:"platform"});!function iG(n){if(Zs&&!Zs.destroyed&&!Zs.injector.get(gD,!1))throw new Ue(400,"");Zs=n.get(vD);const e=n.get(cD,null);e&&e.forEach(t=>t())}(Gn.create({providers:a,name:i}))}return function rG(n){const e=yD();if(!e)throw new Ue(401,"");return e}()}}function yD(){return Zs&&!Zs.destroyed?Zs:null}let vD=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function sG(n,e){let t;return t="noop"===n?new Z4:("zone.js"===n?void 0:n)||new Bt({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:Bt,useValue:a}];return a.run(()=>{const c=Gn.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(gl,null);if(!d)throw new Ue(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{v0(this._modules,u),h.unsubscribe()})}),function oG(n,e,t){try{const i=t();return dh(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(d,a,()=>{const h=u.injector.get(vu);return h.runInitializers(),h.donePromise.then(()=>(function jH(n){Jr(n,"Expected localeId to be defined"),"string"==typeof n&&(tT=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Ss,Np)||Np),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=bD({},i);return function tG(n,e,t){const i=new Kv(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Qs);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Ue(403,"");t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(q(Gn))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();function bD(n,e){return Array.isArray(e)?e.reduce(bD,n):Object.assign(Object.assign({},n),e)}let Qs=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new wt(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new wt(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Bt.assertNotInAngularZone(),p0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Bt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=Hr(a,l.pipe(function nx(){return n=>Y_()(K_(bk)(n))}()))}bootstrap(t,i){if(!this._initStatus.done)throw new Ue(405,"");let r;r=t instanceof ET?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function nG(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Uo),a=r.create(Gn.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(_0,null),u=c&&a.injector.get(pD);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),v0(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Ue(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;v0(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(f0,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(q(Bt),q(Gn),q(gl),q(xs),q(vu))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();function v0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let MD=!0,xD=!1;function Aa(){return xD=!0,MD}let pi=(()=>{class n{}return n.__NG_ELEMENT_ID__=cG,n})();function cG(n){return function uG(n,e,t){if(jf(n)&&!t){const i=Qr(n.index,e);return new vh(i,i)}return 47&n.type?new vh(e[16],e):null}(Ti(),fe(),16==(16&n))}class TD{constructor(){}supports(e){return ch(e)}create(e){return new mG(e)}}const gG=(n,e)=>e;class mG{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||gG}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<AD(i,r,s)?t:i,a=AD(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ch(e))throw new Ue(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function LV(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Qc()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new _G(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new DD),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new DD),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class _G{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class DD{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new yG,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function AD(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class RD{constructor(){}supports(e){return e instanceof Map||Nv(e)}create(){return new vG}}class vG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Nv(e)))throw new Ue(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new bG(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class bG{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ND(){return new Sh([new TD])}let Sh=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||ND()),deps:[[n,new Gc,new po]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Ue(901,"")}}return n.\u0275prov=de({token:n,providedIn:"root",factory:ND}),n})();function ID(){return new bu([new RD])}let bu=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||ID()),deps:[[n,new Gc,new po]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(i)return i;throw new Ue(901,"")}}return n.\u0275prov=de({token:n,providedIn:"root",factory:ID}),n})();const wG=[new RD],xG=new Sh([new TD]),SG=new bu(wG),EG=_D(null,"core",[{provide:wo,useValue:"unknown"},{provide:vD,deps:[Gn]},{provide:pD,deps:[]},{provide:uD,deps:[]}]),RG=[{provide:Qs,useClass:Qs,deps:[Bt,Gn,gl,xs,vu]},{provide:Kz,deps:[Bt],useFactory:function NG(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:vu,useClass:vu,deps:[[new po,yu]]},{provide:zp,useClass:zp,deps:[]},W4,{provide:Sh,useFactory:function CG(){return xG},deps:[]},{provide:bu,useFactory:function TG(){return SG},deps:[]},{provide:Ss,useFactory:function DG(n){return n||function AG(){return"undefined"!=typeof $localize&&$localize.locale||Np}()},deps:[[new Jd(Ss),new po,new Gc]]},{provide:dD,useValue:"USD"}];let IG=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(q(Qs))},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({providers:RG}),n})(),$p=null;function eo(){return $p}const rn=new tt("DocumentToken");let xl=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:function(){return function FG(){return q(PD)}()},providedIn:"platform"}),n})();const kG=new tt("Location Initialized");let PD=(()=>{class n extends xl{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return eo().getBaseHref(this._doc)}onPopState(t){const i=eo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=eo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){OD()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){OD()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(q(rn))},n.\u0275prov=de({token:n,factory:function(){return function BG(){return new PD(q(rn))}()},providedIn:"platform"}),n})();function OD(){return!!window.history.pushState}function S0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function LD(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ho(n){return n&&"?"!==n[0]?"?"+n:n}let Sl=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:function(){return function UG(n){const e=q(rn).location;return new FD(q(xl),e&&e.origin||"")}()},providedIn:"root"}),n})();const E0=new tt("appBaseHref");let FD=(()=>{class n extends Sl{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return S0(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ho(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Ho(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Ho(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(q(xl),q(E0,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),VG=(()=>{class n extends Sl{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=S0(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Ho(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Ho(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(q(xl),q(E0,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Eh=(()=>{class n{constructor(t,i){this._subject=new Ae,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=LD(kD(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ho(i))}normalize(t){return n.stripTrailingSlash(function zG(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,kD(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ho(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ho(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Ho,n.joinWithSlash=S0,n.stripTrailingSlash=LD,n.\u0275fac=function(t){return new(t||n)(q(Sl),q(xl))},n.\u0275prov=de({token:n,factory:function(){return function HG(){return new Eh(q(Sl),q(xl))}()},providedIn:"root"}),n})();function kD(n){return n.replace(/\/index.html$/,"")}var Mi=(()=>((Mi=Mi||{})[Mi.Zero=0]="Zero",Mi[Mi.One=1]="One",Mi[Mi.Two=2]="Two",Mi[Mi.Few=3]="Few",Mi[Mi.Many=4]="Many",Mi[Mi.Other=5]="Other",Mi))();const jG=function QC(n){return function Ar(n){const e=function zH(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=eT(e);if(t)return t;const i=e.split("-")[0];if(t=eT(i),t)return t;if("en"===i)return HH;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[Le.PluralCase]};class tg{}let b5=(()=>{class n extends tg{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(jG(i||this.locale)(t)){case Mi.Zero:return"zero";case Mi.One:return"one";case Mi.Two:return"two";case Mi.Few:return"few";case Mi.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(q(Ss))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();function YD(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let L0=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(ch(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${vn(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(D(Sh),D(bu),D(Tt),D(wi))},n.\u0275dir=ye({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class M5{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zi=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new M5(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),KD(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{KD(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(D(Rr),D(Sn),D(Sh))},n.\u0275dir=ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function KD(n,e){n.context.$implicit=e.item}let nr=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new x5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){JD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){JD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(D(Rr),D(Sn))},n.\u0275dir=ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class x5{constructor(){this.$implicit=null,this.ngIf=null}}function JD(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${vn(e)}'.`)}let QD=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split(".");null!=(i=null!=i&&s?`${i}${s}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(D(Tt),D(bu),D(wi))},n.\u0275dir=ye({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),Ts=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(D(Rr))},n.\u0275dir=ye({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Dn]}),n})(),Gi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({providers:[{provide:tg,useClass:b5}]}),n})();const nA="browser";function wu(n){return n===nA}let K5=(()=>{class n{}return n.\u0275prov=de({token:n,providedIn:"root",factory:()=>new J5(q(rn),window)}),n})();class J5{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Z5(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=iA(this.window.history)||iA(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function iA(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class rA{}class V0 extends class Q5 extends class LG{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function OG(n){$p||($p=n)}(new V0)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function e8(){return Dh=Dh||document.querySelector("base"),Dh?Dh.getAttribute("href"):null}();return null==t?null:function t8(n){ng=ng||document.createElement("a"),ng.setAttribute("href",n);const e=ng.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Dh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return YD(document.cookie,e)}}let ng,Dh=null;const sA=new tt("TRANSITION_ID"),i8=[{provide:yu,useFactory:function n8(n,e,t){return()=>{t.get(vu).donePromise.then(()=>{const i=eo(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[sA,rn,Gn],multi:!0}];class H0{static init(){!function eG(n){y0=n}(new H0)}addToWindow(e){xn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},xn.getAllAngularTestabilities=()=>e.getAllTestabilities(),xn.getAllAngularRootElements=()=>e.getAllRootElements(),xn.frameworkStabilizers||(xn.frameworkStabilizers=[]),xn.frameworkStabilizers.push(i=>{const r=xn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?eo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let r8=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const ig=new tt("EventManagerPlugins");let Ah=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(q(ig),q(Bt))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class oA{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=eo().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let aA=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Rh=(()=>{class n extends aA{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(lA),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(lA))}}return n.\u0275fac=function(t){return new(t||n)(q(rn))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();function lA(n){eo().remove(n)}const z0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},G0=/%COMP%/g;function rg(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?rg(n,r,t):(r=r.replace(G0,n),t.push(r))}return t}function dA(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let sg=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new W0(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Hs.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new u8(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Hs.ShadowDom:return new d8(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=rg(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(q(Ah),q(Rh),q(xh))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class W0{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(z0[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=z0[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=z0[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ts.DashCase|ts.Important)?e.style.setProperty(t,i,r&ts.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ts.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,dA(i)):this.eventManager.addEventListener(e,t,dA(i))}}class u8 extends W0{constructor(e,t,i,r){super(e),this.component=i;const s=rg(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function a8(n){return"_ngcontent-%COMP%".replace(G0,n)}(r+"-"+i.id),this.hostAttr=function l8(n){return"_nghost-%COMP%".replace(G0,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class d8 extends W0{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=rg(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let h8=(()=>{class n extends oA{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(q(rn))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const fA=["alt","control","meta","shift"],p8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pA={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},g8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let m8=(()=>{class n extends oA{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>eo().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(fA.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function _8(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&pA.hasOwnProperty(e)&&(e=pA[e]))}return p8[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),fA.forEach(s=>{s!=r&&g8[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(q(rn))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const w8=_D(EG,"browser",[{provide:wo,useValue:nA},{provide:cD,useValue:function y8(){V0.makeCurrent(),H0.init()},multi:!0},{provide:rn,useFactory:function b8(){return function Kk(n){hy=n}(document),document},deps:[]}]),M8=[{provide:Ev,useValue:"root"},{provide:gl,useFactory:function v8(){return new gl},deps:[]},{provide:ig,useClass:h8,multi:!0,deps:[rn,Bt,wo]},{provide:ig,useClass:m8,multi:!0,deps:[rn]},{provide:sg,useClass:sg,deps:[Ah,Rh,xh]},{provide:wl,useExisting:sg},{provide:aA,useExisting:Rh},{provide:Rh,useClass:Rh,deps:[rn]},{provide:_0,useClass:_0,deps:[Bt]},{provide:Ah,useClass:Ah,deps:[ig,Bt]},{provide:rA,useClass:r8,deps:[]}];let gA=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:xh,useValue:t.appId},{provide:sA,useExisting:xh},i8]}}}return n.\u0275fac=function(t){return new(t||n)(q(n,12))},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({providers:M8,imports:[Gi,IG]}),n})(),mA=(()=>{class n{constructor(t){this._doc=t,this._dom=eo()}addTag(t,i=!1){return t?this._getOrCreateElement(t,i):null}addTags(t,i=!1){return t?t.reduce((r,s)=>(s&&r.push(this._getOrCreateElement(s,i)),r),[]):[]}getTag(t){return t&&this._doc.querySelector(`meta[${t}]`)||null}getTags(t){if(!t)return[];const i=this._doc.querySelectorAll(`meta[${t}]`);return i?[].slice.call(i):[]}updateTag(t,i){if(!t)return null;i=i||this._parseSelector(t);const r=this.getTag(i);return r?this._setMetaElementAttributes(t,r):this._getOrCreateElement(t,!0)}removeTag(t){this.removeTagElement(this.getTag(t))}removeTagElement(t){t&&this._dom.remove(t)}_getOrCreateElement(t,i=!1){if(!i){const o=this._parseSelector(t),a=this.getTags(o).filter(l=>this._containsAttributes(t,l))[0];if(void 0!==a)return a}const r=this._dom.createElement("meta");return this._setMetaElementAttributes(t,r),this._doc.getElementsByTagName("head")[0].appendChild(r),r}_setMetaElementAttributes(t,i){return Object.keys(t).forEach(r=>i.setAttribute(this._getMetaKeyMap(r),t[r])),i}_parseSelector(t){const i=t.name?"name":"property";return`${i}="${t[i]}"`}_containsAttributes(t,i){return Object.keys(t).every(r=>i.getAttribute(this._getMetaKeyMap(r))===t[r])}_getMetaKeyMap(t){return S8[t]||t}}return n.\u0275fac=function(t){return new(t||n)(q(rn))},n.\u0275prov=de({token:n,factory:function(t){let i=null;return i=t?new t:function x8(){return new mA(q(rn))}(),i},providedIn:"root"}),n})();const S8={httpEquiv:"http-equiv"};let _A=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(q(rn))},n.\u0275prov=de({token:n,factory:function(t){let i=null;return i=t?new t:function E8(){return new _A(q(rn))}(),i},providedIn:"root"}),n})();function Ge(...n){let e=n[n.length-1];return xr(e)?(n.pop(),gs(n,e)):Ld(n)}"undefined"!=typeof window&&window;class Oi extends Ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ke;return this._value}next(e){super.next(this._value=e)}}const bA={};class O8{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new L8(e,this.resultSelector))}}class L8 extends Ji{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(bA),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++){const r=e[i];this.add(ei(this,r,r,i))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i,r,s){const o=this.values,l=this.toRespond?o[i]===bA?--this.toRespond:this.toRespond:0;o[i]=t,0===l&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const og=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function El(...n){return function F8(){return Od(1)}()(Ge(...n))}const Go=new wt(n=>n.complete());function ag(n){return n?function k8(n){return new wt(e=>n.schedule(()=>e.complete()))}(n):Go}function Mu(n){return new wt(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?Zi(t):ag()).subscribe(e)})}function si(n,e){return"function"==typeof e?t=>t.pipe(si((i,r)=>Zi(n(i,r)).pipe(ze((s,o)=>e(i,s,r,o))))):t=>t.lift(new B8(n))}class B8{constructor(e){this.project=e}call(e,t){return t.subscribe(new U8(e,this.project))}}class U8 extends Ji{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,i)}_innerSub(e,t,i){const r=this.innerSubscription;r&&r.unsubscribe();const s=new fs(this,t,i),o=this.destination;o.add(s),this.innerSubscription=ei(this,e,void 0,void 0,s),this.innerSubscription!==s&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,i,r,s){this.destination.next(t)}}const wA=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function An(n){return e=>0===n?ag():e.lift(new V8(n))}class V8{constructor(e){if(this.total=e,this.total<0)throw new wA}call(e,t){return t.subscribe(new H8(e,this.total))}}class H8 extends an{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function lg(...n){const e=n[n.length-1];return xr(e)?(n.pop(),t=>El(n,t,e)):t=>El(n,t)}function cg(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new z8(n,e,t))}}class z8{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new G8(e,this.accumulator,this.seed,this.hasSeed))}}class G8 extends an{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function hn(n,e){return function(i){return i.lift(new W8(n,e))}}class W8{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new $8(e,this.predicate,this.thisArg))}}class $8 extends an{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function Cl(n){return function(t){const i=new j8(n),r=t.lift(i);return i.caught=r}}class j8{constructor(e){this.selector=e}call(e,t){return t.subscribe(new q8(e,this.selector,this.caught))}}class q8 extends Ji{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new fs(this,void 0,void 0);this.add(i);const r=ei(this,t,void 0,void 0,i);r!==i&&this.add(r)}}}function Tl(n,e){return Vi(n,e,1)}function Nh(n){return function(t){return 0===n?ag():t.lift(new X8(n))}}class X8{constructor(e){if(this.total=e,this.total<0)throw new wA}call(e,t){return t.subscribe(new Y8(e,this.total))}}class Y8 extends an{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<i;s++){const o=t++%i;e.next(r[o])}}e.complete()}}function MA(n=Z8){return e=>e.lift(new K8(n))}class K8{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new J8(e,this.errorFactory))}}class J8 extends an{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Z8(){return new og}function q0(n=null){return e=>e.lift(new Q8(n))}class Q8{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new eW(e,this.defaultValue))}}class eW extends an{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Wo(n,e){const t=arguments.length>=2;return i=>i.pipe(n?hn((r,s)=>n(r,s,i)):Ui,An(1),t?q0(e):MA(()=>new og))}function $o(){}function Ct(n,e,t){return function(r){return r.lift(new nW(n,e,t))}}class nW{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new iW(e,this.nextOrObserver,this.error,this.complete))}}class iW extends an{constructor(e,t,i,r){super(e),this._tapNext=$o,this._tapError=$o,this._tapComplete=$o,this._tapError=i||$o,this._tapComplete=r||$o,ht(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||$o,this._tapError=t.error||$o,this._tapComplete=t.complete||$o)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class sW{constructor(e){this.callback=e}call(e,t){return t.subscribe(new oW(e,this.callback))}}class oW extends an{constructor(e,t){super(e),this.add(new $e(t))}}class jo{constructor(e,t){this.id=e,this.url=t}}class X0 extends jo{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Na extends jo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xA extends jo{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class aW extends jo{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lW extends jo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cW extends jo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uW extends jo{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class dW extends jo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hW extends jo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SA{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class EA{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fW{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pW{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gW{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mW{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CA{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Yt="primary";class _W{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xu(n){return new _W(n)}const TA="ngNavigationCancelingError";function Y0(n){const e=Error("NavigationCancelingError: "+n);return e[TA]=!0,e}function vW(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Mo(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!DA(n[r],e[r]))return!1;return!0}function DA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function AA(n){return Array.prototype.concat.apply([],n)}function RA(n){return n.length>0?n[n.length-1]:null}function ir(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xo(n){return Bv(n)?n:dh(n)?Zi(Promise.resolve(n)):Ge(n)}const MW={exact:function PA(n,e,t){if(!Al(n.segments,e.segments)||!ug(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!PA(n.children[i],e.children[i],t))return!1;return!0},subset:OA},NA={exact:function xW(n,e){return Mo(n,e)},subset:function SW(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>DA(n[t],e[t]))},ignored:()=>!0};function IA(n,e,t){return MW[t.paths](n.root,e.root,t.matrixParams)&&NA[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function OA(n,e,t){return LA(n,e,e.segments,t)}function LA(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Al(r,t)||e.hasChildren()||!ug(r,t,i))}if(n.segments.length===t.length){if(!Al(n.segments,t)||!ug(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!OA(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Al(n.segments,r)&&ug(n.segments,r,i)&&n.children[Yt])&&LA(n.children[Yt],e,s,i)}}function ug(n,e,t){return e.every((i,r)=>NA[t](n[r].parameters,i.parameters))}class Dl{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xu(this.queryParams)),this._queryParamMap}toString(){return TW.serialize(this)}}class Zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ir(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dg(this)}}class Ih{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xu(this.parameters)),this._parameterMap}toString(){return VA(this)}}function Al(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class FA{}class kA{parse(e){const t=new FW(e);return new Dl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ph(e.root,!0)}`,i=function RW(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${hg(t)}=${hg(r)}`).join("&"):`${hg(t)}=${hg(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function DW(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const TW=new kA;function dg(n){return n.segments.map(e=>VA(e)).join("/")}function Ph(n,e){if(!n.hasChildren())return dg(n);if(e){const t=n.children[Yt]?Ph(n.children[Yt],!1):"",i=[];return ir(n.children,(r,s)=>{s!==Yt&&i.push(`${s}:${Ph(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function CW(n,e){let t=[];return ir(n.children,(i,r)=>{r===Yt&&(t=t.concat(e(i,r)))}),ir(n.children,(i,r)=>{r!==Yt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Yt?[Ph(n.children[Yt],!1)]:[`${r}:${Ph(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${dg(n)}/${t[0]}`:`${dg(n)}/(${t.join("//")})`}}function BA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hg(n){return BA(n).replace(/%3B/gi,";")}function K0(n){return BA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fg(n){return decodeURIComponent(n)}function UA(n){return fg(n.replace(/\+/g,"%20"))}function VA(n){return`${K0(n.path)}${function AW(n){return Object.keys(n).map(e=>`;${K0(e)}=${K0(n[e])}`).join("")}(n.parameters)}`}const NW=/^[^\/()?;=#]+/;function pg(n){const e=n.match(NW);return e?e[0]:""}const IW=/^[^=?&#]+/,OW=/^[^&#]+/;class FW{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Yt]=new Zt(e,t)),i}parseSegment(){const e=pg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ih(fg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=pg(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=pg(this.remaining);r&&(i=r,this.capture(i))}e[fg(t)]=fg(i)}parseQueryParam(e){const t=function PW(n){const e=n.match(IW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function LW(n){const e=n.match(OW);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=UA(t),s=UA(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=pg(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Yt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Yt]:new Zt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class HA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=J0(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=J0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Z0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Z0(e,this._root).map(t=>t.value)}}function J0(n,e){if(n===e.value)return e;for(const t of e.children){const i=J0(n,t);if(i)return i}return null}function Z0(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Z0(n,t);if(i.length)return i.unshift(e),i}return[]}class qo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Su(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class zA extends HA{constructor(e,t){super(e),this.snapshot=t,Q0(this,e)}toString(){return this.snapshot.toString()}}function GA(n,e){const t=function kW(n,e){const o=new gg([],{},{},"",{},Yt,e,null,n.root,-1,{});return new $A("",new qo(o,[]))}(n,e),i=new Oi([new Ih("",{})]),r=new Oi({}),s=new Oi({}),o=new Oi({}),a=new Oi(""),l=new Xo(i,r,o,a,s,Yt,e,t.root);return l.snapshot=t.root,new zA(new qo(l,[]),t)}class Xo{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ze(e=>xu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ze(e=>xu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WA(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function BW(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class gg{constructor(e,t,i,r,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $A extends HA{constructor(e,t){super(t),this.url=e,Q0(this,t)}toString(){return jA(this._root)}}function Q0(n,e){e.value._routerState=n,e.children.forEach(t=>Q0(n,t))}function jA(n){const e=n.children.length>0?` { ${n.children.map(jA).join(", ")} } `:"";return`${n.value}${e}`}function eb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mo(e.params,t.params)||n.params.next(t.params),function bW(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function tb(n,e){const t=Mo(n.params,e.params)&&function EW(n,e){return Al(n,e)&&n.every((t,i)=>Mo(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||tb(n.parent,e.parent))}function Oh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function VW(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Oh(n,i,r);return Oh(n,i)})}(n,e,t);return new qo(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Oh(n,a)),o}}const i=function HW(n){return new Xo(new Oi(n.url),new Oi(n.params),new Oi(n.queryParams),new Oi(n.fragment),new Oi(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Oh(n,s));return new qo(i,r)}}function mg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Lh(n){return"object"==typeof n&&null!=n&&n.outlets}function nb(n,e,t,i,r){let s={};return i&&ir(i,(o,a)=>{s[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new Dl(t.root===n?e:qA(t.root,n,e),s,r)}function qA(n,e,t){const i={};return ir(n.children,(r,s)=>{i[s]=r===e?t:qA(r,e,t)}),new Zt(n.segments,i)}class XA{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&mg(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Lh);if(r&&r!==RA(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ib{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function YA(n,e,t){if(n||(n=new Zt([],{})),0===n.segments.length&&n.hasChildren())return _g(n,e,t);const i=function qW(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Lh(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!JA(l,c,o))return s;i+=2}else{if(!JA(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Zt(n.segments.slice(0,i.pathIndex),{});return s.children[Yt]=new Zt(n.segments.slice(i.pathIndex),n.children),_g(s,0,r)}return i.match&&0===r.length?new Zt(n.segments,{}):i.match&&!n.hasChildren()?rb(n,e,t):i.match?_g(n,0,r):rb(n,e,t)}function _g(n,e,t){if(0===t.length)return new Zt(n.segments,{});{const i=function jW(n){return Lh(n[0])?n[0].outlets:{[Yt]:n}}(t),r={};return ir(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=YA(n.children[o],e,s))}),ir(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Zt(n.segments,r)}}function rb(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Lh(s)){const l=XW(s.outlets);return new Zt(i,l)}if(0===r&&mg(t[0])){i.push(new Ih(n.segments[e].path,KA(t[0]))),r++;continue}const o=Lh(s)?s.outlets[Yt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&mg(a)?(i.push(new Ih(o,KA(a))),r+=2):(i.push(new Ih(o,{})),r++)}return new Zt(i,{})}function XW(n){const e={};return ir(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=rb(new Zt([],{}),0,t))}),e}function KA(n){const e={};return ir(n,(t,i)=>e[i]=`${t}`),e}function JA(n,e,t){return n==t.path&&Mo(e,t.parameters)}class KW{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),eb(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Su(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),ir(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Su(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Su(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Su(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new mW(s.value.snapshot))}),e.children.length&&this.forwardEvent(new pW(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(eb(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),eb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function JW(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class sb{constructor(e,t){this.routes=e,this.module=t}}function Ia(n){return"function"==typeof n}function Rl(n){return n instanceof Dl}const Fh=Symbol("INITIAL_VALUE");function kh(){return si(n=>function j0(...n){let e=null,t=null;return xr(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&ot(n[0])&&(n=n[0]),Ld(n,t).lift(new O8(e))}(n.map(e=>e.pipe(An(1),lg(Fh)))).pipe(cg((e,t)=>{let i=!1;return t.reduce((r,s,o)=>r!==Fh?r:(s===Fh&&(i=!0),i||!1!==s&&o!==t.length-1&&!Rl(s)?r:s),e)},Fh),hn(e=>e!==Fh),ze(e=>Rl(e)?e:!0===e),An(1)))}class i${constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Bh,this.attachRef=null}}class Bh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new i$,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ob=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ae,this.deactivateEvents=new Ae,this.attachEvents=new Ae,this.detachEvents=new Ae,this.name=s||Yt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new r$(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(D(Bh),D(Rr),D(xs),Fo("name"),D(pi))},n.\u0275dir=ye({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class r${constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Xo?this.route:e===Bh?this.childContexts:this.parent.get(e,t)}}let ZA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=tn({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&Qe(0,"router-outlet")},directives:[ob],encapsulation:2}),n})();function QA(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];s$(i,o$(e,i))}}function s$(n,e){n.children&&QA(n.children,e)}function o$(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ab(n){const e=n.children&&n.children.map(ab),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yt&&(t.component=ZA),t}function Ds(n){return n.outlet||Yt}function eR(n,e){const t=n.filter(i=>Ds(i)===e);return t.push(...n.filter(i=>Ds(i)!==e)),t}const tR={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function yg(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},tR):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||vW)(t,n,e);if(!s)return Object.assign({},tR);const o={};ir(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:a,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function vg(n,e,t,i,r="corrected"){if(t.length>0&&function c$(n,e,t){return t.some(i=>bg(n,e,i)&&Ds(i)!==Yt)}(n,t,i)){const o=new Zt(e,function l$(n,e,t,i){const r={};r[Yt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ds(s)!==Yt){const o=new Zt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Ds(s)]=o}return r}(n,e,i,new Zt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function u$(n,e,t){return t.some(i=>bg(n,e,i))}(n,t,i)){const o=new Zt(n.segments,function a$(n,e,t,i,r,s){const o={};for(const a of i)if(bg(n,t,a)&&!r[Ds(a)]){const l=new Zt([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Ds(a)]=l}return Object.assign(Object.assign({},r),o)}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Zt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function bg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function nR(n,e,t,i){return!!(Ds(n)===i||i!==Yt&&bg(e,t,n))&&("**"===n.path||yg(e,n,t).matched)}function iR(n,e,t){return 0===e.length&&!n.children[t]}class Uh{constructor(e){this.segmentGroup=e||null}}class rR{constructor(e){this.urlTree=e}}function wg(n){return new wt(e=>e.error(new Uh(n)))}function sR(n){return new wt(e=>e.error(new rR(n)))}function d$(n){return new wt(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class p${constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Uo)}apply(){const e=vg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Zt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Yt).pipe(ze(s=>this.createUrlTree(lb(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Cl(s=>{if(s instanceof rR)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Uh?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Yt).pipe(ze(r=>this.createUrlTree(lb(r),e.queryParams,e.fragment))).pipe(Cl(r=>{throw r instanceof Uh?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new Zt([],{[Yt]:e}):e;return new Dl(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(ze(s=>new Zt([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Zi(r).pipe(Tl(s=>{const o=i.children[s],a=eR(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(ze(l=>({segment:l,outlet:s})))}),cg((s,o)=>(s[o.outlet]=o.segment,s),{}),function tW(n,e){const t=arguments.length>=2;return i=>i.pipe(n?hn((r,s)=>n(r,s,i)):Ui,Nh(1),t?q0(e):MA(()=>new og))}())}expandSegment(e,t,i,r,s,o){return Zi(i).pipe(Tl(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(Cl(c=>{if(c instanceof Uh)return Ge(null);throw c}))),Wo(a=>!!a),Cl((a,l)=>{if(a instanceof og||"EmptyError"===a.name){if(iR(t,r,s))return Ge(new Zt([],{}));throw new Uh(t)}throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return nR(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):wg(t):wg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?sR(s):this.lineralizeSegments(i,s).pipe(Vi(o=>{const a=new Zt(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,lastChild:c,positionalParamSegments:u}=yg(t,r,s);if(!a)return wg(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?sR(d):this.lineralizeSegments(r,d).pipe(Vi(h=>this.expandSegment(e,t,i,h.concat(s.slice(c)),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Ge(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(ze(h=>(i._loadedConfig=h,new Zt(r,{})))):Ge(new Zt(r,{}));const{matched:o,consumedSegments:a,lastChild:l}=yg(t,i,r);if(!o)return wg(t);const c=r.slice(l);return this.getChildConfig(e,i,r).pipe(Vi(d=>{const h=d.module,f=d.routes,{segmentGroup:p,slicedSegments:_}=vg(t,a,c,f),m=new Zt(p.segments,p.children);if(0===_.length&&m.hasChildren())return this.expandChildren(h,f,m).pipe(ze(b=>new Zt(a,b)));if(0===f.length&&0===_.length)return Ge(new Zt(a,{}));const g=Ds(i)===s;return this.expandSegment(h,m,f,_,g?Yt:s,!0).pipe(ze(y=>new Zt(a.concat(y.segments),y.children)))}))}getChildConfig(e,t,i){return t.children?Ge(new sb(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ge(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(Vi(r=>r?this.configLoader.load(e.injector,t).pipe(ze(s=>(t._loadedConfig=s,s))):function h$(n){return new wt(e=>e.error(Y0(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Ge(new sb([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;if(!r||0===r.length)return Ge(!0);const s=r.map(o=>{const a=e.get(o);let l;if(function QW(n){return n&&Ia(n.canLoad)}(a))l=a.canLoad(t,i);else{if(!Ia(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}return xo(l)});return Ge(s).pipe(kh(),Ct(o=>{if(!Rl(o))return;const a=Y0(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),ze(o=>!0===o))}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ge(i);if(r.numberOfChildren>1||!r.children[Yt])return d$(e.redirectTo);r=r.children[Yt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Dl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return ir(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return ir(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new Zt(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function lb(n){const e={};for(const i of Object.keys(n.children)){const s=lb(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function g$(n){if(1===n.numberOfChildren&&n.children[Yt]){const e=n.children[Yt];return new Zt(n.segments.concat(e.segments),e.children)}return n}(new Zt(n.segments,e))}class oR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Mg{constructor(e,t){this.component=e,this.route=t}}function _$(n,e,t){const i=n._root;return Vh(i,e?e._root:null,t,[i.value])}function xg(n,e,t){const i=function v$(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function Vh(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Su(e);return n.children.forEach(o=>{(function b$(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function w$(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Al(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Al(n.url,e.url)||!Mo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tb(n,e)||!Mo(n.queryParams,e.queryParams);default:return!tb(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new oR(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Vh(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Mg(a.outlet.component,o))}else o&&Hh(e,a,r),r.canActivateChecks.push(new oR(i)),Vh(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),ir(s,(o,a)=>Hh(o,t.getContext(a),r)),r}function Hh(n,e,t){const i=Su(n),r=n.value;ir(i,(s,o)=>{Hh(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Mg(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class R${}function aR(n){return new wt(e=>e.error(n))}class I${constructor(e,t,i,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=vg(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Yt);if(null===t)return null;const i=new gg([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new qo(i,t),s=new $A(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=WA(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=eR(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;i.push(...l)}const r=lR(i);return function P$(n){n.sort((e,t)=>e.value.outlet===Yt?-1:t.value.outlet===Yt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,i,r);if(null!==o)return o}return iR(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!nR(e,t,i,r))return null;let s,o=[],a=[];if("**"===e.path){const f=i.length>0?RA(i).parameters:{};s=new gg(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dR(e),Ds(e),e.component,e,cR(t),uR(t)+i.length,hR(e))}else{const f=yg(t,e,i);if(!f.matched)return null;o=f.consumedSegments,a=i.slice(f.lastChild),s=new gg(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dR(e),Ds(e),e.component,e,cR(t),uR(t)+o.length,hR(e))}const l=function O$(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=vg(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new qo(s,f)]}if(0===l.length&&0===u.length)return[new qo(s,[])];const d=Ds(e)===r,h=this.processSegment(l,c,u,d?Yt:r);return null===h?null:[new qo(s,h)]}}function L$(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function lR(n){const e=[],t=new Set;for(const i of n){if(!L$(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=lR(i.children);e.push(new qo(i.value,r))}return e.filter(i=>!t.has(i))}function cR(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function uR(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function dR(n){return n.data||{}}function hR(n){return n.resolve||{}}function fR(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function cb(n){return si(e=>{const t=n(e);return t?Zi(t).pipe(ze(()=>e)):Ge(e)})}class G$ extends class z${shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ub=new tt("ROUTES");class pR{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(ze(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new sb(AA(o.injector.get(ub,void 0,Et.Self|Et.Optional)).map(ab),o)}),Cl(s=>{throw t._loader$=void 0,s}));return t._loader$=new tx(r,()=>new Ye).pipe(Y_()),t._loader$}loadModuleFactory(e){return xo(e()).pipe(Vi(t=>t instanceof AT?Ge(t):Zi(this.compiler.compileModuleAsync(t))))}}class $${shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function j$(n){throw n}function q$(n,e,t){return e.parse("/")}function gR(n,e){return Ge(null)}const X$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Y$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wi=(()=>{class n{constructor(t,i,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ye,this.errorHandler=j$,this.malformedUriErrorHandler=q$,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:gR,afterPreactivation:gR},this.urlHandlingStrategy=new $$,this.routeReuseStrategy=new G$,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Uo),this.console=o.get(uD);const d=o.get(Bt);this.isNgZoneEnabled=d instanceof Bt&&Bt.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function wW(){return new Dl(new Zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pR(o,a,h=>this.triggerEvent(new SA(h)),h=>this.triggerEvent(new EA(h))),this.routerState=GA(this.currentUrlTree,this.rootComponentType),this.transitions=new Oi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(hn(r=>0!==r.id),ze(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),si(r=>{let s=!1,o=!1;return Ge(r).pipe(Ct(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),si(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Sg(a.source)&&(this.browserUrlTree=a.extractedUrl),Ge(a).pipe(si(d=>{const h=this.transitions.getValue();return i.next(new X0(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Go:Promise.resolve(d)}),function m$(n,e,t,i){return si(r=>function f$(n,e,t,i,r){return new p$(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(ze(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ct(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function F$(n,e,t,i,r){return Vi(s=>function N$(n,e,t,i,r="emptyOnly",s="legacy"){try{const o=new I$(n,e,t,i,r,s).recognize();return null===o?aR(new R$):Ge(o)}catch(o){return aR(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe(ze(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ct(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new lW(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:_,extras:m}=a,g=new X0(h,this.serializeUrl(f),p,_);i.next(g);const v=GA(f,this.rootComponentType).snapshot;return Ge(Object.assign(Object.assign({},a),{targetSnapshot:v,urlAfterRedirects:f,extras:Object.assign(Object.assign({},m),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Go}),cb(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Ct(a=>{const l=new cW(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),ze(a=>Object.assign(Object.assign({},a),{guards:_$(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function M$(n,e){return Vi(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ge(Object.assign(Object.assign({},t),{guardsResult:!0})):function x$(n,e,t,i){return Zi(n).pipe(Vi(r=>function A$(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ge(s.map(a=>{const l=xg(a,e,r);let c;if(function n$(n){return n&&Ia(n.canDeactivate)}(l))c=xo(l.canDeactivate(n,e,t,i));else{if(!Ia(l))throw new Error("Invalid CanDeactivate guard");c=xo(l(n,e,t,i))}return c.pipe(Wo())})).pipe(kh()):Ge(!0)}(r.component,r.route,t,e,i)),Wo(r=>!0!==r,!0))}(o,i,r,n).pipe(Vi(a=>a&&function ZW(n){return"boolean"==typeof n}(a)?function S$(n,e,t,i){return Zi(e).pipe(Tl(r=>El(function C$(n,e){return null!==n&&e&&e(new fW(n)),Ge(!0)}(r.route.parent,i),function E$(n,e){return null!==n&&e&&e(new gW(n)),Ge(!0)}(r.route,i),function D$(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function y$(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Mu(()=>Ge(o.guards.map(l=>{const c=xg(l,o.node,t);let u;if(function t$(n){return n&&Ia(n.canActivateChild)}(c))u=xo(c.canActivateChild(i,n));else{if(!Ia(c))throw new Error("Invalid CanActivateChild guard");u=xo(c(i,n))}return u.pipe(Wo())})).pipe(kh())));return Ge(s).pipe(kh())}(n,r.path,t),function T$(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ge(!0);const r=i.map(s=>Mu(()=>{const o=xg(s,e,t);let a;if(function e$(n){return n&&Ia(n.canActivate)}(o))a=xo(o.canActivate(e,n));else{if(!Ia(o))throw new Error("Invalid CanActivate guard");a=xo(o(e,n))}return a.pipe(Wo())}));return Ge(r).pipe(kh())}(n,r.route,t))),Wo(r=>!0!==r,!0))}(i,s,n,e):Ge(a)),ze(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Ct(a=>{if(Rl(a.guardsResult)){const c=Y0(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new uW(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),hn(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),cb(a=>{if(a.guards.canActivateChecks.length)return Ge(a).pipe(Ct(l=>{const c=new dW(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),si(l=>{let c=!1;return Ge(l).pipe(function k$(n,e){return Vi(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ge(t);let s=0;return Zi(r).pipe(Tl(o=>function B$(n,e,t,i){return function U$(n,e,t,i){const r=fR(n);if(0===r.length)return Ge({});const s={};return Zi(r).pipe(Vi(o=>function V$(n,e,t,i){const r=xg(n,e,i);return xo(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(Ct(a=>{s[o]=a}))),Nh(1),Vi(()=>fR(s).length===r.length?Ge(s):Go))}(n._resolve,n,e,i).pipe(ze(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),WA(n,t).resolve),null)))}(o.route,i,n,e)),Ct(()=>s++),Nh(1),Vi(o=>s===r.length?Ge(t):Go))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ct({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Ct(l=>{const c=new hW(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),cb(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),ze(a=>{const l=function UW(n,e,t){const i=Oh(n,e._root,t?t._root:void 0);return new zA(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),Ct(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>ze(i=>(new KW(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Ct({next(){s=!0},complete(){s=!0}}),function rW(n){return e=>e.lift(new sW(n))}(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),Cl(a=>{if(o=!0,function yW(n){return n&&n[TA]}(a)){const l=Rl(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new xA(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Sg(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new aW(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return Go}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){QA(t),this.config=t.map(ab),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function zW(n,e,t,i,r){if(0===t.length)return nb(e.root,e.root,e,i,r);const s=function GW(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new XA(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return ir(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new XA(t,e,i)}(t);if(s.toRoot())return nb(e.root,new Zt([],{}),e,i,r);const o=function WW(n,e,t){if(n.isAbsolute)return new ib(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new ib(s,s===e.root,0)}const i=mg(n.commands[0])?0:1;return function $W(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new ib(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?_g(o.segmentGroup,o.index,s.commands):YA(o.segmentGroup,o.index,s.commands);return nb(o.segmentGroup,a,e,i,r)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Rl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function K$(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},X$):!1===i?Object.assign({},Y$):i,Rl(t))return IA(this.currentUrlTree,t,r);const s=this.parseUrl(t);return IA(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Na(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){var a,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=Sg(i)&&u&&!Sg(u.source),h=u.rawUrl.toString()===t.toString(),f=u.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(d&&h&&f)return Promise.resolve(!0);let _,m,g;o?(_=o.resolve,m=o.reject,g=o.promise):g=new Promise((b,E)=>{_=b,m=E});const v=++this.navigationId;let y;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),y=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):y=0,this.setTransition({id:v,targetPageId:y,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:_,reject:m,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(b=>Promise.reject(b))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new xA(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){Fv()},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();function Sg(n){return"imperative"!==n}class mR{}class _R{preload(e,t){return Ge(null)}}let yR=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new pR(r,i,l=>t.triggerEvent(new SA(l)),l=>t.triggerEvent(new EA(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(hn(t=>t instanceof Na),Tl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Uo);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return Zi(r).pipe(Od(),ze(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Ge(i._loadedConfig):this.loader.load(t.injector,i)).pipe(Vi(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(q(Wi),q(zp),q(Gn),q(mR))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),fb=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof X0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Na&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof CA&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new CA(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Fv()},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const Nl=new tt("ROUTER_CONFIGURATION"),vR=new tt("ROUTER_FORROOT_GUARD"),ej=[Eh,{provide:FA,useClass:kA},{provide:Wi,useFactory:function sj(n,e,t,i,r,s,o={},a,l){const c=new Wi(null,n,e,t,i,r,AA(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function oj(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[FA,Bh,Eh,Gn,zp,ub,Nl,[class W${},new po],[class H${},new po]]},Bh,{provide:Xo,useFactory:function aj(n){return n.routerState.root},deps:[Wi]},yR,_R,class Q${preload(e,t){return t().pipe(Cl(()=>Ge(null)))}},{provide:Nl,useValue:{enableTracing:!1}}];function tj(){return new mD("Router",Wi)}let pb=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[ej,bR(t),{provide:vR,useFactory:rj,deps:[[Wi,new po,new Gc]]},{provide:Nl,useValue:i||{}},{provide:Sl,useFactory:ij,deps:[xl,[new Jd(E0),new po],Nl]},{provide:fb,useFactory:nj,deps:[Wi,K5,Nl]},{provide:mR,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:_R},{provide:mD,multi:!0,useFactory:tj},[gb,{provide:yu,multi:!0,useFactory:lj,deps:[gb]},{provide:wR,useFactory:cj,deps:[gb]},{provide:f0,multi:!0,useExisting:wR}]]}}static forChild(t){return{ngModule:n,providers:[bR(t)]}}}return n.\u0275fac=function(t){return new(t||n)(q(vR,8),q(Wi,8))},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({}),n})();function nj(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new fb(n,e,t)}function ij(n,e,t={}){return t.useHash?new VG(n,e):new FD(n,e)}function rj(n){return"guarded"}function bR(n){return[{provide:I3,multi:!0,useValue:n},{provide:ub,multi:!0,useValue:n}]}let gb=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ye}appInitializer(){return this.injector.get(kG,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(Wi),o=this.injector.get(Nl);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Ge(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Nl),r=this.injector.get(yR),s=this.injector.get(fb),o=this.injector.get(Wi),a=this.injector.get(Qs);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(q(Gn))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();function lj(n){return n.appInitializer.bind(n)}function cj(n){return n.bootstrapListener.bind(n)}const wR=new tt("Router Initializer");function oi(n,e,t,i){return ht(t)&&(i=t,t=void 0),i?oi(n,e,t).pipe(ze(r=>ot(r)?i(...r):i(r))):new wt(r=>{MR(n,e,function s(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function MR(n,e,t,i,r){let s;if(function fj(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function hj(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function dj(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)MR(n[o],e,t,i,r)}i.add(s)}function Eg(n){return e=>e.lift(new kj(n))}"function"==typeof SuppressedError&&SuppressedError;class kj{constructor(e){this.total=e}call(e,t){return t.subscribe(new Bj(e,this.total))}}class Bj extends an{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}const Gh=new tt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),SR=new tt("ngx-window",{providedIn:"root",factory:()=>function Vj(n){return wu(n)?window:null}(dp(wo))}),zj=new tt("ngx-data-layer",{providedIn:"root",factory:()=>function Hj(n){return n?n.dataLayer=n.dataLayer||[]:null}(dp(SR))}),wb=new tt("ngx-gtag-fn",{providedIn:"root",factory:()=>function Gj(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(dp(SR),dp(zj))});let Mb=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){(this.settings.enableTracing||Aa())&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,s,o){try{const a=new Map;i&&a.set("event_category",i),r&&a.set("event_label",r),s&&a.set("value",s),void 0!==o&&a.set("interaction",o);const l=this.toKeyValue(a);l?this.gtag("event",t,l):this.gtag("event",t)}catch(a){this.throw(a)}}pageView(t,i,r,s){try{const o=new Map([["page_path",t]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,l])=>o.set(a,l)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,i,r,s,o){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(q(Gh),q(rn),q(wb))},n.\u0275prov=de({factory:function(){return new n(q(Gh),q(rn),q(wb))},token:n,providedIn:"root"}),n})();const $j={provide:yu,multi:!0,useFactory:function jj(n,e,t){return()=>function yb(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){var i;if(!n.trackingCode)return void(Aa()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(Aa()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||Aa()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=null!==(i=null==n?void 0:n.initCommands)&&void 0!==i?i:[],n.initCommands.find(o=>"config"===o.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(o=>"js"===o.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const o of n.initCommands)e(o.command,...o.values);const r=t.createElement("script");r.async=!0,r.src=n.uri,n.nonce&&r.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(r)})},deps:[Gh,wb,rn]};new tt("ngx-google-analytics-routing-settings",{factory:()=>({})});let TR=(()=>{class n{static forRoot(t,i=[],r,s,o){return{ngModule:n,providers:[{provide:Gh,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:s,nonce:o}},$j]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[]]}),n})(),Il=(()=>{class n{constructor(t){this.$gaService=t}sendAnalyticEvent(t,i,r){this.$gaService.event(t,i,r)}sendAnalyticPageView(t,i){this.$gaService.pageView(t,i)}}return n.\u0275fac=function(t){return new(t||n)(q(Mb))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class DR{}const Yo="*";function xb(n,e){return{type:7,name:n,definitions:e,options:{}}}function Cg(n,e=null){return{type:4,styles:e,timings:n}}function AR(n,e=null){return{type:2,steps:n,options:e}}function Ko(n){return{type:6,styles:n,offset:null}}function RR(n,e,t){return{type:0,name:n,styles:e,options:t}}function Kj(n){return{type:5,steps:n}}function Tg(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Jj(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function Zj(n,e){return{type:12,timings:n,animation:e}}function NR(n){Promise.resolve(null).then(n)}class Wh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){NR(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class IR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?NR(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function PR(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}const HR="attached",Ll=1e3,pr=1001,gi=1003,Fl=1005,Wn=1006,io=1008,Fa=1009,ka=1014,As=1015,Xh=1016,kl=1020,is=1023,Bl=1026,Au=1027,Yh=2300,Ru=2301,Nu=2400,Iu=2401,gr="srgb",rr="srgb-linear",Bb="display-p3",Og="display-p3-linear",Lg="linear",Un="srgb",Fg="rec709",Pu=7680,Qo=2e3;class Ua{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const mr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Vl=Math.PI/180,Ou=180/Math.PI;function rs(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(mr[255&n]+mr[n>>8&255]+mr[n>>16&255]+mr[n>>24&255]+"-"+mr[255&e]+mr[e>>8&255]+"-"+mr[e>>16&15|64]+mr[e>>24&255]+"-"+mr[63&t|128]+mr[t>>8&255]+"-"+mr[t>>16&255]+mr[t>>24&255]+mr[255&i]+mr[i>>8&255]+mr[i>>16&255]+mr[i>>24&255]).toLowerCase()}function ai(n,e,t){return Math.max(e,Math.min(t,n))}function Vb(n,e){return(n%e+e)%e}function Kh(n,e,t){return(1-t)*n+t*e}function Hb(n){return 0==(n&n-1)&&0!==n}function Vg(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Ir(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Dt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const TN_DEG2RAD=Vl,TN_radToDeg=function p9(n){return n*Ou};class ne{constructor(e=0,t=0){ne.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ai(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ot{constructor(e,t,i,r,s,o,a,l,c){Ot.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],_=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],E=r[2],S=r[5],M=r[8];return s[0]=o*_+a*v+l*E,s[3]=o*m+a*y+l*S,s[6]=o*g+a*b+l*M,s[1]=c*_+u*v+d*E,s[4]=c*m+u*y+d*S,s[7]=c*g+u*b+d*M,s[2]=h*_+f*v+p*E,s[5]=h*m+f*y+p*S,s[8]=h*g+f*b+p*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,p=t*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const _=1/p;return e[0]=d*_,e[1]=(r*c-u*i)*_,e[2]=(a*i-r*o)*_,e[3]=h*_,e[4]=(u*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=f*_,e[7]=(i*l-c*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(zb.makeScale(e,t)),this}rotate(e){return this.premultiply(zb.makeRotation(-e)),this}translate(e,t){return this.premultiply(zb.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const zb=new Ot;function DN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Jh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function y9(){const n=Jh("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const AN={};function RN(n){n in AN||(AN[n]=!0,console.warn(n))}const NN=(new Ot).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),IN=(new Ot).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Hg={[rr]:{transfer:Lg,primaries:Fg,toReference:n=>n,fromReference:n=>n},[gr]:{transfer:Un,primaries:Fg,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Og]:{transfer:Lg,primaries:"p3",toReference:n=>n.applyMatrix3(IN),fromReference:n=>n.applyMatrix3(NN)},[Bb]:{transfer:Un,primaries:"p3",toReference:n=>n.convertSRGBToLinear().applyMatrix3(IN),fromReference:n=>n.applyMatrix3(NN).convertLinearToSRGB()}},v9=new Set([rr,Og]),yn={enabled:!0,_workingColorSpace:rr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!v9.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){return!1!==this.enabled&&e!==t&&e&&t?Hg[t].fromReference((0,Hg[e].toReference)(n)):n},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Hg[n].primaries},getTransfer:function(n){return""===n?Lg:Hg[n].transfer}};function Fu(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Gb(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let ku;class PN{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ku&&(ku=Jh("canvas")),ku.width=e.width,ku.height=e.height;const i=ku.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=ku}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Jh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*Fu(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Fu(t[i]/255)):Fu(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let b9=0;class Bu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:b9++}),this.uuid=rs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(Wb(r[o].isDataTexture?r[o].image:r[o]))}else s=Wb(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Wb(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?PN.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let w9=0,Rs=(()=>{class n extends Ua{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=pr,s=pr,o=Wn,a=io,l=is,c=Fa,u=n.DEFAULT_ANISOTROPY,d=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:w9++}),this.uuid=rs(),this.name="",this.source=new Bu(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ne(0,0),this.repeat=new ne(1,1),this.center=new ne(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ot,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ll:t.x=t.x-Math.floor(t.x);break;case pr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ll:t.y=t.y-Math.floor(t.y);break;case pr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class En{constructor(e=0,t=0,i=0,r=1){En.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],_=l[2],m=l[6],g=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-_)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+_)<.1&&Math.abs(p+m)<.1&&Math.abs(c+f+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(c+1)/2,b=(f+1)/2,E=(g+1)/2,S=(u+h)/4,M=(d+_)/4,A=(p+m)/4;return y>b&&y>E?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=S/i,s=M/i):b>E?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=S/r,s=A/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=M/s,r=A/s),this.set(i,r,s,t),this}let v=Math.sqrt((m-p)*(m-p)+(d-_)*(d-_)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(d-_)/v,this.z=(h-u)/v,this.w=Math.acos((c+f+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class M9 extends Ua{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new En(0,0,e,t),this.scissorTest=!1,this.viewport=new En(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},i);const s=new Rs(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Bu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hl extends M9{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class $b extends Rs{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=gi,this.minFilter=gi,this.wrapR=pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ON extends Rs{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=gi,this.minFilter=gi,this.wrapR=pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],_=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=_);if(d!==_||l!==h||c!==f||u!==p){let m=1-a;const g=l*h+c*f+u*p+d*_,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){const E=Math.sqrt(y),S=Math.atan2(E,g*v);m=Math.sin(m*S)/E,a=Math.sin(a*S)/E}const b=a*v;if(l=l*m+h*b,c=c*m+f*b,u=u*m+p*b,d=d*m+_*b,m===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=E,c*=E,u*=E,d*=E}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-a*f,e[t+2]=c*p+u*f+a*h-l*d,e[t+3]=u*p-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),h=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ai(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class T{constructor(e=0,t=0,i=0){T.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(LN.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(LN.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*c+o*d-a*u,this.y=i+l*u+a*c-s*d,this.z=r+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return jb.copy(this).projectOnVector(e),this.sub(jb)}reflect(e){return this.sub(jb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ai(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const jb=new T,LN=new sr;class Pr{constructor(e=new T(1/0,1/0,1/0),t=new T(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(ro.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(ro.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ro.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const s=i.getAttribute("position");if(!0===t&&void 0!==s&&!0!==e.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===e.isMesh?e.getVertexPosition(o,ro):ro.fromBufferAttribute(s,o),ro.applyMatrix4(e.matrixWorld),this.expandByPoint(ro);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),zg.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),zg.copy(i.boundingBox)),zg.applyMatrix4(e.matrixWorld),this.union(zg)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ro),ro.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Zh),Gg.subVectors(this.max,Zh),Uu.subVectors(e.a,Zh),Vu.subVectors(e.b,Zh),Hu.subVectors(e.c,Zh),Va.subVectors(Vu,Uu),Ha.subVectors(Hu,Vu),zl.subVectors(Uu,Hu);let t=[0,-Va.z,Va.y,0,-Ha.z,Ha.y,0,-zl.z,zl.y,Va.z,0,-Va.x,Ha.z,0,-Ha.x,zl.z,0,-zl.x,-Va.y,Va.x,0,-Ha.y,Ha.x,0,-zl.y,zl.x,0];return!(!qb(t,Uu,Vu,Hu,Gg)||(t=[1,0,0,0,1,0,0,0,1],!qb(t,Uu,Vu,Hu,Gg)))&&(Wg.crossVectors(Va,Ha),t=[Wg.x,Wg.y,Wg.z],qb(t,Uu,Vu,Hu,Gg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ro).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(ro).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ea[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ea[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ea[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ea[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ea[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ea[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ea[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ea[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ea)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ea=[new T,new T,new T,new T,new T,new T,new T,new T],ro=new T,zg=new Pr,Uu=new T,Vu=new T,Hu=new T,Va=new T,Ha=new T,zl=new T,Zh=new T,Gg=new T,Wg=new T,Gl=new T;function qb(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Gl.fromArray(n,s);const a=r.x*Math.abs(Gl.x)+r.y*Math.abs(Gl.y)+r.z*Math.abs(Gl.z),l=e.dot(Gl),c=t.dot(Gl),u=i.dot(Gl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const x9=new Pr,Qh=new T,Xb=new T;class _r{constructor(e=new T,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):x9.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qh.subVectors(e,this.center);const t=Qh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Qh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Xb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qh.copy(e.center).add(Xb)),this.expandByPoint(Qh.copy(e.center).sub(Xb))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ta=new T,Yb=new T,$g=new T,za=new T,Kb=new T,jg=new T,Jb=new T;class zu{constructor(e=new T,t=new T(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ta)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ta.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ta.copy(this.origin).addScaledVector(this.direction,t),ta.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Yb.copy(e).add(t).multiplyScalar(.5),$g.copy(t).sub(e).normalize(),za.copy(this.origin).sub(Yb);const s=.5*e.distanceTo(t),o=-this.direction.dot($g),a=za.dot(this.direction),l=-za.dot($g),c=za.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*l-a,h=o*a-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const _=1/u;d*=_,h*=_,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(Yb).addScaledVector($g,h),f}intersectSphere(e,t){ta.subVectors(e.center,this.origin);const i=ta.dot(this.direction),r=ta.dot(ta)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,ta)}intersectTriangle(e,t,i,r,s){Kb.subVectors(t,e),jg.subVectors(i,e),Jb.crossVectors(Kb,jg);let a,o=this.direction.dot(Jb);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}za.subVectors(this.origin,e);const l=a*this.direction.dot(jg.crossVectors(za,jg));if(l<0)return null;const c=a*this.direction.dot(Kb.cross(za));if(c<0||l+c>o)return null;const u=-a*za.dot(Jb);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class nt{constructor(e,t,i,r,s,o,a,l,c,u,d,h,f,p,_,m){nt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,_,m)}set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,_,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=h,g[3]=f,g[7]=p,g[11]=_,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new nt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Gu.setFromMatrixColumn(e,0).length(),s=1/Gu.setFromMatrixColumn(e,1).length(),o=1/Gu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,_=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-_*c,t[9]=-a*l,t[2]=_-h*c,t[6]=p+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,f=l*d,p=c*u,_=c*d;t[0]=h+_*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=_+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,f=l*d,p=c*u,_=c*d;t[0]=h-_*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=_-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,_=a*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+_,t[1]=l*d,t[5]=_*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,p=a*l,_=a*c;t[0]=l*u,t[4]=_-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-_*d}else if("XZY"===e.order){const h=o*l,f=o*c,p=a*l,_=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+_,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=_*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(S9,e,E9)}lookAt(e,t,i){const r=this.elements;return ss.subVectors(e,t),0===ss.lengthSq()&&(ss.z=1),ss.normalize(),Ga.crossVectors(i,ss),0===Ga.lengthSq()&&(1===Math.abs(i.z)?ss.x+=1e-4:ss.z+=1e-4,ss.normalize(),Ga.crossVectors(i,ss)),Ga.normalize(),qg.crossVectors(ss,Ga),r[0]=Ga.x,r[4]=qg.x,r[8]=ss.x,r[1]=Ga.y,r[5]=qg.y,r[9]=ss.y,r[2]=Ga.z,r[6]=qg.z,r[10]=ss.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],_=i[6],m=i[10],g=i[14],v=i[3],y=i[7],b=i[11],E=i[15],S=r[0],M=r[4],A=r[8],U=r[12],w=r[1],R=r[5],Q=r[9],Z=r[13],F=r[2],K=r[6],L=r[10],V=r[14],H=r[3],$=r[7],le=r[11],he=r[15];return s[0]=o*S+a*w+l*F+c*H,s[4]=o*M+a*R+l*K+c*$,s[8]=o*A+a*Q+l*L+c*le,s[12]=o*U+a*Z+l*V+c*he,s[1]=u*S+d*w+h*F+f*H,s[5]=u*M+d*R+h*K+f*$,s[9]=u*A+d*Q+h*L+f*le,s[13]=u*U+d*Z+h*V+f*he,s[2]=p*S+_*w+m*F+g*H,s[6]=p*M+_*R+m*K+g*$,s[10]=p*A+_*Q+m*L+g*le,s[14]=p*U+_*Z+m*V+g*he,s[3]=v*S+y*w+b*F+E*H,s[7]=v*M+y*R+b*K+E*$,s[11]=v*A+y*Q+b*L+E*le,s[15]=v*U+y*Z+b*V+E*he,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*l*d-r*c*d-s*a*h+i*c*h+r*a*f-i*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*f-s*o*d+i*o*f+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*h+r*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],_=e[13],m=e[14],g=e[15],v=d*m*c-_*h*c+_*l*f-a*m*f-d*l*g+a*h*g,y=p*h*c-u*m*c-p*l*f+o*m*f+u*l*g-o*h*g,b=u*_*c-p*d*c+p*a*f-o*_*f-u*a*g+o*d*g,E=p*d*l-u*_*l-p*a*h+o*_*h+u*a*m-o*d*m,S=t*v+i*y+r*b+s*E;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/S;return e[0]=v*M,e[1]=(_*h*s-d*m*s-_*r*f+i*m*f+d*r*g-i*h*g)*M,e[2]=(a*m*s-_*l*s+_*r*c-i*m*c-a*r*g+i*l*g)*M,e[3]=(d*l*s-a*h*s-d*r*c+i*h*c+a*r*f-i*l*f)*M,e[4]=y*M,e[5]=(u*m*s-p*h*s+p*r*f-t*m*f-u*r*g+t*h*g)*M,e[6]=(p*l*s-o*m*s-p*r*c+t*m*c+o*r*g-t*l*g)*M,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*f+t*l*f)*M,e[8]=b*M,e[9]=(p*d*s-u*_*s-p*i*f+t*_*f+u*i*g-t*d*g)*M,e[10]=(o*_*s-p*a*s+p*i*c-t*_*c-o*i*g+t*a*g)*M,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*f-t*a*f)*M,e[12]=E*M,e[13]=(u*_*r-p*d*r+p*i*h-t*_*h-u*i*m+t*d*m)*M,e[14]=(p*a*r-o*_*r-p*i*l+t*_*l+o*i*m-t*a*m)*M,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*h+t*a*h)*M,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,_=o*u,m=o*d,g=a*d,v=l*c,y=l*u,b=l*d,E=i.x,S=i.y,M=i.z;return r[0]=(1-(_+g))*E,r[1]=(f+b)*E,r[2]=(p-y)*E,r[3]=0,r[4]=(f-b)*S,r[5]=(1-(h+g))*S,r[6]=(m+v)*S,r[7]=0,r[8]=(p+y)*M,r[9]=(m-v)*M,r[10]=(1-(h+_))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Gu.set(r[0],r[1],r[2]).length();const o=Gu.set(r[4],r[5],r[6]).length(),a=Gu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],so.copy(this);const c=1/s,u=1/o,d=1/a;return so.elements[0]*=c,so.elements[1]*=c,so.elements[2]*=c,so.elements[4]*=u,so.elements[5]*=u,so.elements[6]*=u,so.elements[8]*=d,so.elements[9]*=d,so.elements[10]*=d,t.setFromRotationMatrix(so),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Qo){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r);let f,p;if(a===Qo)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-o/(o-s),p=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Qo){const l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(o-s),h=(t+e)*c,f=(i+r)*u;let p,_;if(a===Qo)p=(o+s)*d,_=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=s*d,_=-1*d}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=_,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Gu=new T,so=new nt,S9=new T(0,0,0),E9=new T(1,1,1),Ga=new T,qg=new T,ss=new T,FN=new nt,kN=new sr;let na=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(ai(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ai(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(ai(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-ai(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(ai(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-ai(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return FN.makeRotationFromQuaternion(t),this.setFromRotationMatrix(FN,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return kN.setFromEuler(this),this.setFromQuaternion(kN,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class Zb{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let C9=0;const BN=new T,Wu=new sr,ia=new nt,Xg=new T,ef=new T,T9=new T,D9=new sr,UN=new T(1,0,0),VN=new T(0,1,0),HN=new T(0,0,1),A9={type:"added"},R9={type:"removed"},Qb={type:"childadded",child:null},e1={type:"childremoved",child:null};let $i=(()=>{class n extends Ua{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:C9++}),this.uuid=rs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new T,i=new na,r=new sr,s=new T(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new nt},normalMatrix:{value:new Ot}}),this.matrix=new nt,this.matrixWorld=new nt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Zb,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Wu.setFromAxisAngle(t,i),this.quaternion.multiply(Wu),this}rotateOnWorldAxis(t,i){return Wu.setFromAxisAngle(t,i),this.quaternion.premultiply(Wu),this}rotateX(t){return this.rotateOnAxis(UN,t)}rotateY(t){return this.rotateOnAxis(VN,t)}rotateZ(t){return this.rotateOnAxis(HN,t)}translateOnAxis(t,i){return BN.copy(t).applyQuaternion(this.quaternion),this.position.add(BN.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(UN,t)}translateY(t){return this.translateOnAxis(VN,t)}translateZ(t){return this.translateOnAxis(HN,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(ia.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Xg.copy(t):Xg.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),ef.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ia.lookAt(ef,Xg,this.up):ia.lookAt(Xg,ef,this.up),this.quaternion.setFromRotationMatrix(ia),s&&(ia.extractRotation(s.matrixWorld),Wu.setFromRotationMatrix(ia),this.quaternion.premultiply(Wu.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(A9),Qb.child=t,this.dispatchEvent(Qb),Qb.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(R9),e1.child=t,this.dispatchEvent(e1),e1.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),ia.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ia.multiply(t.parent.matrixWorld)),t.applyMatrix4(ia),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ef,t,T9),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ef,D9,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),_=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),_.length>0&&(r.nodes=_)}return r.object=s,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new T(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const oo=new T,ra=new T,t1=new T,sa=new T,$u=new T,ju=new T,zN=new T,n1=new T,i1=new T,r1=new T;class Ns{constructor(e=new T,t=new T,i=new T){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),oo.subVectors(e,t),r.cross(oo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){oo.subVectors(r,t),ra.subVectors(i,t),t1.subVectors(e,t);const o=oo.dot(oo),a=oo.dot(ra),l=oo.dot(t1),c=ra.dot(ra),u=ra.dot(t1),d=o*c-a*a;if(0===d)return s.set(0,0,0),null;const h=1/d,f=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return null!==this.getBarycoord(e,t,i,r,sa)&&sa.x>=0&&sa.y>=0&&sa.x+sa.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return null===this.getBarycoord(e,t,i,r,sa)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,sa.x),l.addScaledVector(o,sa.y),l.addScaledVector(a,sa.z),l)}static isFrontFacing(e,t,i,r){return oo.subVectors(i,t),ra.subVectors(e,t),oo.cross(ra).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return oo.subVectors(this.c,this.b),ra.subVectors(this.a,this.b),.5*oo.cross(ra).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ns.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ns.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Ns.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Ns.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ns.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;$u.subVectors(r,i),ju.subVectors(s,i),n1.subVectors(e,i);const l=$u.dot(n1),c=ju.dot(n1);if(l<=0&&c<=0)return t.copy(i);i1.subVectors(e,r);const u=$u.dot(i1),d=ju.dot(i1);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector($u,o);r1.subVectors(e,s);const f=$u.dot(r1),p=ju.dot(r1);if(p>=0&&f<=p)return t.copy(s);const _=f*c-l*p;if(_<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(ju,a);const m=u*p-f*d;if(m<=0&&d-u>=0&&f-p>=0)return zN.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(zN,a);const g=1/(m+_+h);return o=_*g,a=h*g,t.copy(i).addScaledVector($u,o).addScaledVector(ju,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const GN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wa={h:0,s:0,l:0},Yg={h:0,s:0,l:0};function s1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class Re{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=gr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,yn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=yn.workingColorSpace){return this.r=e,this.g=t,this.b=i,yn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=yn.workingColorSpace){if(e=Vb(e,1),t=ai(t,0,1),i=ai(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=s1(o,s,e+1/3),this.g=s1(o,s,e),this.b=s1(o,s,e-1/3)}return yn.toWorkingColorSpace(this,r),this}setStyle(e,t=gr){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=gr){const i=GN[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fu(e.r),this.g=Fu(e.g),this.b=Fu(e.b),this}copyLinearToSRGB(e){return this.r=Gb(e.r),this.g=Gb(e.g),this.b=Gb(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=gr){return yn.fromWorkingColorSpace(yr.copy(this),e),65536*Math.round(ai(255*yr.r,0,255))+256*Math.round(ai(255*yr.g,0,255))+Math.round(ai(255*yr.b,0,255))}getHexString(e=gr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=yn.workingColorSpace){yn.fromWorkingColorSpace(yr.copy(this),t);const i=yr.r,r=yr.g,s=yr.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=yn.workingColorSpace){return yn.fromWorkingColorSpace(yr.copy(this),t),e.r=yr.r,e.g=yr.g,e.b=yr.b,e}getStyle(e=gr){yn.fromWorkingColorSpace(yr.copy(this),e);const t=yr.r,i=yr.g,r=yr.b;return e!==gr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(Wa),this.setHSL(Wa.h+e,Wa.s+t,Wa.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Wa),e.getHSL(Yg);const i=Kh(Wa.h,Yg.h,t),r=Kh(Wa.s,Yg.s,t),s=Kh(Wa.l,Yg.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const yr=new Re;Re.NAMES=GN;let N9=0;class ao extends Ua{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:N9++}),this.uuid=rs(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Re(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Pu,this.stencilZFail=Pu,this.stencilZPass=Pu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Pu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Pu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Pu&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class os extends ao{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Re(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new na,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Si=new T,Kg=new ne;class $n{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=As,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return RN("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Kg.fromBufferAttribute(this,t),Kg.applyMatrix3(e),this.setXY(t,Kg.x,Kg.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Si.fromBufferAttribute(this,t),Si.applyMatrix3(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Si.fromBufferAttribute(this,t),Si.applyMatrix4(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Si.fromBufferAttribute(this,t),Si.applyNormalMatrix(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Si.fromBufferAttribute(this,t),Si.transformDirection(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ir(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Dt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ir(t,this.array)),t}setX(e,t){return this.normalized&&(t=Dt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ir(t,this.array)),t}setY(e,t){return this.normalized&&(t=Dt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ir(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Dt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ir(t,this.array)),t}setW(e,t){return this.normalized&&(t=Dt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Dt(t,this.array),i=Dt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Dt(t,this.array),i=Dt(i,this.array),r=Dt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Dt(t,this.array),i=Dt(i,this.array),r=Dt(r,this.array),s=Dt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class WN extends $n{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class $N extends $n{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Je extends $n{constructor(e,t,i){super(new Float32Array(e),t,i)}}let P9=0;const Is=new nt,o1=new $i,qu=new T,as=new Pr,nf=new Pr,ji=new T;class Wt extends Ua{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:P9++}),this.uuid=rs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(DN(e)?$N:WN)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Ot).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Is.makeRotationFromQuaternion(e),this.applyMatrix4(Is),this}rotateX(e){return Is.makeRotationX(e),this.applyMatrix4(Is),this}rotateY(e){return Is.makeRotationY(e),this.applyMatrix4(Is),this}rotateZ(e){return Is.makeRotationZ(e),this.applyMatrix4(Is),this}translate(e,t,i){return Is.makeTranslation(e,t,i),this.applyMatrix4(Is),this}scale(e,t,i){return Is.makeScale(e,t,i),this.applyMatrix4(Is),this}lookAt(e){return o1.lookAt(e),o1.updateMatrix(),this.applyMatrix4(o1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(qu).negate(),this.translate(qu.x,qu.y,qu.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Je(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Pr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new T(-1/0,-1/0,-1/0),new T(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)as.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(ji.addVectors(this.boundingBox.min,as.min),this.boundingBox.expandByPoint(ji),ji.addVectors(this.boundingBox.max,as.max),this.boundingBox.expandByPoint(ji)):(this.boundingBox.expandByPoint(as.min),this.boundingBox.expandByPoint(as.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new _r);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new T,1/0);if(e){const i=this.boundingSphere.center;if(as.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)nf.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(ji.addVectors(as.min,nf.min),as.expandByPoint(ji),ji.addVectors(as.max,nf.max),as.expandByPoint(ji)):(as.expandByPoint(nf.min),as.expandByPoint(nf.max));as.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ji.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ji));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ji.fromBufferAttribute(a,c),l&&(qu.fromBufferAttribute(e,c),ji.add(qu)),r=Math.max(r,i.distanceToSquared(ji))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,r=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new $n(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let A=0;A<i.count;A++)a[A]=new T,l[A]=new T;const c=new T,u=new T,d=new T,h=new ne,f=new ne,p=new ne,_=new T,m=new T;function g(A,U,w){c.fromBufferAttribute(i,A),u.fromBufferAttribute(i,U),d.fromBufferAttribute(i,w),h.fromBufferAttribute(s,A),f.fromBufferAttribute(s,U),p.fromBufferAttribute(s,w),u.sub(c),d.sub(c),f.sub(h),p.sub(h);const R=1/(f.x*p.y-p.x*f.y);!isFinite(R)||(_.copy(u).multiplyScalar(p.y).addScaledVector(d,-f.y).multiplyScalar(R),m.copy(d).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(R),a[A].add(_),a[U].add(_),a[w].add(_),l[A].add(m),l[U].add(m),l[w].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let A=0,U=v.length;A<U;++A){const w=v[A],R=w.start;for(let Z=R,F=R+w.count;Z<F;Z+=3)g(e.getX(Z+0),e.getX(Z+1),e.getX(Z+2))}const y=new T,b=new T,E=new T,S=new T;function M(A){E.fromBufferAttribute(r,A),S.copy(E);const U=a[A];y.copy(U),y.sub(E.multiplyScalar(E.dot(U))).normalize(),b.crossVectors(S,U);const R=b.dot(l[A])<0?-1:1;o.setXYZW(A,y.x,y.y,y.z,R)}for(let A=0,U=v.length;A<U;++A){const w=v[A],R=w.start;for(let Z=R,F=R+w.count;Z<F;Z+=3)M(e.getX(Z+0)),M(e.getX(Z+1)),M(e.getX(Z+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new $n(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new T,s=new T,o=new T,a=new T,l=new T,c=new T,u=new T,d=new T;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),_=e.getX(h+1),m=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,m),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,m),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(m,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ji.fromBufferAttribute(e,t),ji.normalize(),e.setXYZ(t,ji.x,ji.y,ji.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let _=0,m=l.length;_<m;_++){f=a.isInterleavedBufferAttribute?l[_]*a.data.stride+a.offset:l[_]*u;for(let g=0;g<u;g++)h[p++]=c[f++]}return new $n(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Wt,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const jN=new nt,Wl=new zu,Jg=new _r,qN=new T,Xu=new T,Yu=new T,Ku=new T,a1=new T,Zg=new T,Qg=new ne,em=new ne,tm=new ne,XN=new T,YN=new T,KN=new T,nm=new T,im=new T;class qi extends $i{constructor(e=new Wt,t=new os){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){Zg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];0!==u&&(a1.fromBufferAttribute(d,e),Zg.addScaledVector(o?a1:a1.sub(t),u))}t.add(Zg)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),Jg.copy(i.boundingSphere),Jg.applyMatrix4(s),Wl.copy(e.ray).recast(e.near),(!1!==Jg.containsPoint(Wl.origin)||!(null===Wl.intersectSphere(Jg,qN)||Wl.origin.distanceToSquared(qN)>ak(e.far-e.near,2)))&&(jN.copy(s).invert(),Wl.copy(e.ray).applyMatrix4(jN),(null===i.boundingBox||!1!==Wl.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,Wl)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,_=h.length;p<_;p++){const m=h[p],g=o[m.materialIndex];for(let b=Math.max(m.start,f.start),E=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));b<E;b+=3)r=rm(this,g,e,i,c,u,d,a.getX(b),a.getX(b+1),a.getX(b+2)),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,f.start),g=Math.min(a.count,f.start+f.count);m<g;m+=3)r=rm(this,o,e,i,c,u,d,a.getX(m),a.getX(m+1),a.getX(m+2)),r&&(r.faceIndex=Math.floor(m/3),t.push(r));else if(void 0!==l)if(Array.isArray(o))for(let p=0,_=h.length;p<_;p++){const m=h[p],g=o[m.materialIndex];for(let b=Math.max(m.start,f.start),E=Math.min(l.count,Math.min(m.start+m.count,f.start+f.count));b<E;b+=3)r=rm(this,g,e,i,c,u,d,b,b+1,b+2),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,f.start),g=Math.min(l.count,f.start+f.count);m<g;m+=3)r=rm(this,o,e,i,c,u,d,m,m+1,m+2),r&&(r.faceIndex=Math.floor(m/3),t.push(r))}}function rm(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Xu),n.getVertexPosition(l,Yu),n.getVertexPosition(c,Ku);const u=function O9(n,e,t,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,0===e.side,a),null===l)return null;im.copy(a),im.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(im);return c<t.near||c>t.far?null:{distance:c,point:im.clone(),object:n}}(n,e,t,i,Xu,Yu,Ku,nm);if(u){r&&(Qg.fromBufferAttribute(r,a),em.fromBufferAttribute(r,l),tm.fromBufferAttribute(r,c),u.uv=Ns.getInterpolation(nm,Xu,Yu,Ku,Qg,em,tm,new ne)),s&&(Qg.fromBufferAttribute(s,a),em.fromBufferAttribute(s,l),tm.fromBufferAttribute(s,c),u.uv1=Ns.getInterpolation(nm,Xu,Yu,Ku,Qg,em,tm,new ne)),o&&(XN.fromBufferAttribute(o,a),YN.fromBufferAttribute(o,l),KN.fromBufferAttribute(o,c),u.normal=Ns.getInterpolation(nm,Xu,Yu,Ku,XN,YN,KN,new T),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new T,materialIndex:0};Ns.getNormal(Xu,Yu,Ku,d.normal),u.face=d}return u}class Ju extends Wt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function p(_,m,g,v,y,b,E,S,M,A,U){const w=b/M,R=E/A,Q=b/2,Z=E/2,F=S/2,K=M+1,L=A+1;let V=0,H=0;const $=new T;for(let le=0;le<L;le++){const he=le*R-Z;for(let Me=0;Me<K;Me++)$[_]=(Me*w-Q)*v,$[m]=he*y,$[g]=F,c.push($.x,$.y,$.z),$[_]=0,$[m]=0,$[g]=S>0?1:-1,u.push($.x,$.y,$.z),d.push(Me/M),d.push(1-le/A),V+=1}for(let le=0;le<A;le++)for(let he=0;he<M;he++){const Xe=h+he+K*(le+1),z=h+(he+1)+K*(le+1),pe=h+(he+1)+K*le;l.push(h+he+K*le,Xe,pe),l.push(Xe,z,pe),H+=6}a.addGroup(f,H,U),f+=H,h+=V}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Je(c,3)),this.setAttribute("normal",new Je(u,3)),this.setAttribute("uv",new Je(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ju(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Zu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function Or(n){const e={};for(let t=0;t<n.length;t++){const i=Zu(n[t]);for(const r in i)e[r]=i[r]}return e}function JN(n){return null===n.getRenderTarget()?n.outputColorSpace:yn.workingColorSpace}const F9={clone:Zu,merge:Or};class aa extends ao{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zu(e.uniforms),this.uniformsGroups=function L9(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class l1 extends $i{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nt,this.projectionMatrix=new nt,this.projectionMatrixInverse=new nt,this.coordinateSystem=Qo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const $a=new T,ZN=new ne,QN=new ne;class Xi extends l1{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ou*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Vl*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ou*Math.atan(Math.tan(.5*Vl*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){$a.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set($a.x,$a.y).multiplyScalar(-e/$a.z),$a.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set($a.x,$a.y).multiplyScalar(-e/$a.z)}getViewSize(e,t){return this.getViewBounds(e,ZN,QN),t.subVectors(QN,ZN)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Vl*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class U9 extends $i{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Xi(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new Xi(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new Xi(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new Xi(-90,1,e,t);a.layers=this.layers,this.add(a);const l=new Xi(-90,1,e,t);l.layers=this.layers,this.add(l);const c=new Xi(-90,1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Qo)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=_,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class sm extends Rs{constructor(e,t,i,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class V9 extends Hl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new sm([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Wn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Ju(5,5,5),s=new aa({name:"CubemapFromEquirect",uniforms:Zu(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new qi(r,s),a=t.minFilter;return t.minFilter===io&&(t.minFilter=Wn),new U9(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const c1=new T,H9=new T,z9=new Ot;class ja{constructor(e=new T(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=c1.subVectors(i,t).cross(H9.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(c1),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||z9.getNormalMatrix(e),r=this.coplanarPoint(c1).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const $l=new _r,om=new T;class am{constructor(e=new ja,t=new ja,i=new ja,r=new ja,s=new ja,o=new ja){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Qo){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],d=r[6],h=r[7],f=r[8],p=r[9],_=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15];if(i[0].setComponents(l-s,h-c,m-f,b-g).normalize(),i[1].setComponents(l+s,h+c,m+f,b+g).normalize(),i[2].setComponents(l+o,h+u,m+p,b+v).normalize(),i[3].setComponents(l-o,h-u,m-p,b-v).normalize(),i[4].setComponents(l-a,h-d,m-_,b-y).normalize(),t===Qo)i[5].setComponents(l+a,h+d,m+_,b+y).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,d,_,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),$l.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),$l.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere($l)}intersectsSprite(e){return $l.center.set(0,0,0),$l.radius=.7071067811865476,$l.applyMatrix4(e.matrixWorld),this.intersectsSphere($l)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(om.x=r.normal.x>0?e.max.x:e.min.x,om.y=r.normal.y>0?e.max.y:e.min.y,om.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(om)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function eI(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function G9(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);if(void 0===d)i.set(c,function r(c,u){const d=c.array,h=c.usage,f=d.byteLength,p=n.createBuffer();let _;if(n.bindBuffer(u,p),n.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)_=n.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");_=n.HALF_FLOAT}else _=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)_=n.SHORT;else if(d instanceof Uint32Array)_=n.UNSIGNED_INT;else if(d instanceof Int32Array)_=n.INT;else if(d instanceof Int8Array)_=n.BYTE;else if(d instanceof Uint8Array)_=n.UNSIGNED_BYTE;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);_=n.UNSIGNED_BYTE}return{buffer:p,type:_,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:f}}(c,u));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function s(c,u,d){const h=u.array,f=u._updateRange,p=u.updateRanges;if(n.bindBuffer(d,c),-1===f.count&&0===p.length&&n.bufferSubData(d,0,h),0!==p.length){for(let _=0,m=p.length;_<m;_++){const g=p[_];t?n.bufferSubData(d,g.start*h.BYTES_PER_ELEMENT,h,g.start,g.count):n.bufferSubData(d,g.start*h.BYTES_PER_ELEMENT,h.subarray(g.start,g.start+g.count))}u.clearUpdateRanges()}-1!==f.count&&(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()})(d.buffer,c,u),d.version=c.version}}}}class rf extends Wt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],p=[],_=[],m=[];for(let g=0;g<u;g++){const v=g*h-o;for(let y=0;y<c;y++)p.push(y*d-s,-v,0),_.push(0,0,1),m.push(y/a),m.push(1-g/l)}for(let g=0;g<l;g++)for(let v=0;v<a;v++){const b=v+c*(g+1),E=v+1+c*(g+1),S=v+1+c*g;f.push(v+c*g,b,S),f.push(b,E,S)}this.setIndex(f),this.setAttribute("position",new Je(p,3)),this.setAttribute("normal",new Je(_,3)),this.setAttribute("uv",new Je(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rf(e.width,e.height,e.widthSegments,e.heightSegments)}}const Ut={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tfloat startCompression = 0.8 - 0.04;\n\tfloat desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min(color.r, min(color.g, color.b));\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max(color.r, max(color.g, color.b));\n\tif (peak < startCompression) return color;\n\tfloat d = 1. - startCompression;\n\tfloat newPeak = 1. - d * d / (peak + d - startCompression);\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);\n\treturn mix(color, vec3(1, 1, 1), g);\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ce={common:{diffuse:{value:new Re(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ot},alphaMap:{value:null},alphaMapTransform:{value:new Ot},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ot}},envmap:{envMap:{value:null},envMapRotation:{value:new Ot},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ot}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ot}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ot},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ot},normalScale:{value:new ne(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ot},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ot}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ot}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ot}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Re(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Re(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ot},alphaTest:{value:0},uvTransform:{value:new Ot}},sprite:{diffuse:{value:new Re(16777215)},opacity:{value:1},center:{value:new ne(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ot},alphaMap:{value:null},alphaMapTransform:{value:new Ot},alphaTest:{value:0}}},Eo={basic:{uniforms:Or([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.fog]),vertexShader:Ut.meshbasic_vert,fragmentShader:Ut.meshbasic_frag},lambert:{uniforms:Or([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new Re(0)}}]),vertexShader:Ut.meshlambert_vert,fragmentShader:Ut.meshlambert_frag},phong:{uniforms:Or([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new Re(0)},specular:{value:new Re(1118481)},shininess:{value:30}}]),vertexShader:Ut.meshphong_vert,fragmentShader:Ut.meshphong_frag},standard:{uniforms:Or([Ce.common,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.roughnessmap,Ce.metalnessmap,Ce.fog,Ce.lights,{emissive:{value:new Re(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag},toon:{uniforms:Or([Ce.common,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.gradientmap,Ce.fog,Ce.lights,{emissive:{value:new Re(0)}}]),vertexShader:Ut.meshtoon_vert,fragmentShader:Ut.meshtoon_frag},matcap:{uniforms:Or([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,{matcap:{value:null}}]),vertexShader:Ut.meshmatcap_vert,fragmentShader:Ut.meshmatcap_frag},points:{uniforms:Or([Ce.points,Ce.fog]),vertexShader:Ut.points_vert,fragmentShader:Ut.points_frag},dashed:{uniforms:Or([Ce.common,Ce.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ut.linedashed_vert,fragmentShader:Ut.linedashed_frag},depth:{uniforms:Or([Ce.common,Ce.displacementmap]),vertexShader:Ut.depth_vert,fragmentShader:Ut.depth_frag},normal:{uniforms:Or([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,{opacity:{value:1}}]),vertexShader:Ut.meshnormal_vert,fragmentShader:Ut.meshnormal_frag},sprite:{uniforms:Or([Ce.sprite,Ce.fog]),vertexShader:Ut.sprite_vert,fragmentShader:Ut.sprite_frag},background:{uniforms:{uvTransform:{value:new Ot},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ut.background_vert,fragmentShader:Ut.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ot}},vertexShader:Ut.backgroundCube_vert,fragmentShader:Ut.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ut.cube_vert,fragmentShader:Ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ut.equirect_vert,fragmentShader:Ut.equirect_frag},distanceRGBA:{uniforms:Or([Ce.common,Ce.displacementmap,{referencePosition:{value:new T},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ut.distanceRGBA_vert,fragmentShader:Ut.distanceRGBA_frag},shadow:{uniforms:Or([Ce.lights,Ce.fog,{color:{value:new Re(0)},opacity:{value:1}}]),vertexShader:Ut.shadow_vert,fragmentShader:Ut.shadow_frag}};Eo.physical={uniforms:Or([Eo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ot},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ot},clearcoatNormalScale:{value:new ne(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ot},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ot},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ot},sheen:{value:0},sheenColor:{value:new Re(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ot},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ot},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ot},transmissionSamplerSize:{value:new ne},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ot},attenuationDistance:{value:0},attenuationColor:{value:new Re(0)},specularColor:{value:new Re(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ot},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ot},anisotropyVector:{value:new ne},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ot}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag};const lm={r:0,b:0,g:0},jl=new na,Wq=new nt;function $q(n,e,t,i,r,s,o){const a=new Re(0);let c,u,l=!0===s?0:1,d=null,h=0,f=null;function _(m,g){m.getRGB(lm,JN(n)),i.buffers.color.setClear(lm.r,lm.g,lm.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),l=g,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,_(a,l)},render:function p(m,g){let v=!1,y=!0===g.isScene?g.background:null;y&&y.isTexture&&(y=(g.backgroundBlurriness>0?t:e).get(y)),null===y?_(a,l):y&&y.isColor&&(_(y,1),v=!0);const b=n.xr.getEnvironmentBlendMode();"additive"===b?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===b&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||v)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||306===y.mapping)?(void 0===u&&(u=new qi(new Ju(1,1,1),new aa({name:"BackgroundCubeMaterial",uniforms:Zu(Eo.backgroundCube.uniforms),vertexShader:Eo.backgroundCube.vertexShader,fragmentShader:Eo.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(E,S,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),jl.copy(g.backgroundRotation),jl.x*=-1,jl.y*=-1,jl.z*=-1,y.isCubeTexture&&!1===y.isRenderTargetTexture&&(jl.y*=-1,jl.z*=-1),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Wq.makeRotationFromEuler(jl)),u.material.toneMapped=yn.getTransfer(y.colorSpace)!==Un,(d!==y||h!==y.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=y,h=y.version,f=n.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(void 0===c&&(c=new qi(new rf(2,2),new aa({name:"BackgroundMaterial",uniforms:Zu(Eo.background.uniforms),vertexShader:Eo.background.vertexShader,fragmentShader:Eo.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=y,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=yn.getTransfer(y.colorSpace)!==Un,!0===y.matrixAutoUpdate&&y.updateMatrix(),c.material.uniforms.uvTransform.value.copy(y.matrix),(d!==y||h!==y.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,d=y,h=y.version,f=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null))}}}function jq(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=m(null);let c=l,u=!1;function f(F){return i.isWebGL2?n.bindVertexArray(F):s.bindVertexArrayOES(F)}function p(F){return i.isWebGL2?n.deleteVertexArray(F):s.deleteVertexArrayOES(F)}function m(F){const K=[],L=[],V=[];for(let H=0;H<r;H++)K[H]=0,L[H]=0,V[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:L,attributeDivisors:V,object:F,attributes:{},index:null}}function y(){const F=c.newAttributes;for(let K=0,L=F.length;K<L;K++)F[K]=0}function b(F){E(F,0)}function E(F,K){const V=c.enabledAttributes,H=c.attributeDivisors;c.newAttributes[F]=1,0===V[F]&&(n.enableVertexAttribArray(F),V[F]=1),H[F]!==K&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](F,K),H[F]=K)}function S(){const F=c.newAttributes,K=c.enabledAttributes;for(let L=0,V=K.length;L<V;L++)K[L]!==F[L]&&(n.disableVertexAttribArray(L),K[L]=0)}function M(F,K,L,V,H,$,le){!0===le?n.vertexAttribIPointer(F,K,L,H,$):n.vertexAttribPointer(F,K,L,V,H,$)}function Q(){Z(),u=!0,c!==l&&(c=l,f(c.object))}function Z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(F,K,L,V,H){let $=!1;if(o){const le=function _(F,K,L){const V=!0===L.wireframe;let H=a[F.id];void 0===H&&(H={},a[F.id]=H);let $=H[K.id];void 0===$&&($={},H[K.id]=$);let le=$[V];return void 0===le&&(le=m(function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),$[V]=le),le}(V,L,K);c!==le&&(c=le,f(c.object)),$=function g(F,K,L,V){const H=c.attributes,$=K.attributes;let le=0;const he=L.getAttributes();for(const Me in he)if(he[Me].location>=0){const z=H[Me];let pe=$[Me];if(void 0===pe&&("instanceMatrix"===Me&&F.instanceMatrix&&(pe=F.instanceMatrix),"instanceColor"===Me&&F.instanceColor&&(pe=F.instanceColor)),void 0===z||z.attribute!==pe||pe&&z.data!==pe.data)return!0;le++}return c.attributesNum!==le||c.index!==V}(F,V,L,H),$&&function v(F,K,L,V){const H={},$=K.attributes;let le=0;const he=L.getAttributes();for(const Me in he)if(he[Me].location>=0){let z=$[Me];void 0===z&&("instanceMatrix"===Me&&F.instanceMatrix&&(z=F.instanceMatrix),"instanceColor"===Me&&F.instanceColor&&(z=F.instanceColor));const pe={};pe.attribute=z,z&&z.data&&(pe.data=z.data),H[Me]=pe,le++}c.attributes=H,c.attributesNum=le,c.index=V}(F,V,L,H)}else{const le=!0===K.wireframe;(c.geometry!==V.id||c.program!==L.id||c.wireframe!==le)&&(c.geometry=V.id,c.program=L.id,c.wireframe=le,$=!0)}null!==H&&t.update(H,n.ELEMENT_ARRAY_BUFFER),($||u)&&(u=!1,function A(F,K,L,V){if(!1===i.isWebGL2&&(F.isInstancedMesh||V.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const H=V.attributes,$=L.getAttributes(),le=K.defaultAttributeValues;for(const he in $){const Me=$[he];if(Me.location>=0){let Xe=H[he];if(void 0===Xe&&("instanceMatrix"===he&&F.instanceMatrix&&(Xe=F.instanceMatrix),"instanceColor"===he&&F.instanceColor&&(Xe=F.instanceColor)),void 0!==Xe){const z=Xe.normalized,pe=Xe.itemSize,Se=t.get(Xe);if(void 0===Se)continue;const Ne=Se.buffer,Oe=Se.type,De=Se.bytesPerElement,Ze=!0===i.isWebGL2&&(Oe===n.INT||Oe===n.UNSIGNED_INT||1013===Xe.gpuType);if(Xe.isInterleavedBufferAttribute){const We=Xe.data,P=We.stride,xe=Xe.offset;if(We.isInstancedInterleavedBuffer){for(let se=0;se<Me.locationSize;se++)E(Me.location+se,We.meshPerAttribute);!0!==F.isInstancedMesh&&void 0===V._maxInstanceCount&&(V._maxInstanceCount=We.meshPerAttribute*We.count)}else for(let se=0;se<Me.locationSize;se++)b(Me.location+se);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let se=0;se<Me.locationSize;se++)M(Me.location+se,pe/Me.locationSize,Oe,z,P*De,(xe+pe/Me.locationSize*se)*De,Ze)}else{if(Xe.isInstancedBufferAttribute){for(let We=0;We<Me.locationSize;We++)E(Me.location+We,Xe.meshPerAttribute);!0!==F.isInstancedMesh&&void 0===V._maxInstanceCount&&(V._maxInstanceCount=Xe.meshPerAttribute*Xe.count)}else for(let We=0;We<Me.locationSize;We++)b(Me.location+We);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let We=0;We<Me.locationSize;We++)M(Me.location+We,pe/Me.locationSize,Oe,z,pe*De,pe/Me.locationSize*We*De,Ze)}}else if(void 0!==le){const z=le[he];if(void 0!==z)switch(z.length){case 2:n.vertexAttrib2fv(Me.location,z);break;case 3:n.vertexAttrib3fv(Me.location,z);break;case 4:n.vertexAttrib4fv(Me.location,z);break;default:n.vertexAttrib1fv(Me.location,z)}}}}S()}(F,K,L,V),null!==H&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(H).buffer))},reset:Q,resetDefaultState:Z,dispose:function U(){Q();for(const F in a){const K=a[F];for(const L in K){const V=K[L];for(const H in V)p(V[H].object),delete V[H];delete K[L]}delete a[F]}},releaseStatesOfGeometry:function w(F){if(void 0===a[F.id])return;const K=a[F.id];for(const L in K){const V=K[L];for(const H in V)p(V[H].object),delete V[H];delete K[L]}delete a[F.id]},releaseStatesOfProgram:function R(F){for(const K in a){const L=a[K];if(void 0===L[F.id])continue;const V=L[F.id];for(const H in V)p(V[H].object),delete V[H];delete L[F.id]}},initAttributes:y,enableAttribute:b,disableUnusedAttributes:S}}function qq(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(u){s=u},this.render=function a(u,d){n.drawArrays(s,u,d),t.update(d,s,1)},this.renderInstances=function l(u,d,h){if(0===h)return;let f,p;if(r)f=n,p="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",null===f)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");f[p](s,u,d,h),t.update(d,s,h)},this.renderMultiDraw=function c(u,d,h){if(0===h)return;const f=e.get("WEBGL_multi_draw");if(null===f)for(let p=0;p<h;p++)this.render(u[p],d[p]);else{f.multiDrawArraysWEBGL(s,u,0,d,0,h);let p=0;for(let _=0;_<h;_++)p+=d[_];t.update(p,s,1)}}}function Xq(n,e,t){let i;function s(M){if("highp"===M){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return"mediump"===M&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===n.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),m=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),v=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const M=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:_,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?n.getParameter(n.MAX_SAMPLES):0}}function Yq(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ja,a=new Ot,l={value:null,needsUpdate:!1};function u(d,h,f,p){const _=null!==d?d.length:0;let m=null;if(0!==_){if(m=l.value,!0!==p||null===m){const g=f+4*_,v=h.matrixWorldInverse;a.getNormalMatrix(v),(null===m||m.length<g)&&(m=new Float32Array(g));for(let y=0,b=f;y!==_;++y,b+=4)o.copy(d[y]).applyMatrix4(v,a),o.normal.toArray(m,b),m[b+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,m}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=0!==d.length||h||0!==i||r;return r=h,i=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){const p=d.clippingPlanes,_=d.clipIntersection,m=d.clipShadows,g=n.get(d);if(!r||null===p||0===p.length||s&&!m)s?u(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const v=s?0:i,y=4*v;let b=g.clippingState||null;l.value=b,b=u(p,h,y,f);for(let E=0;E!==y;++E)b[E]=t[E];g.clippingState=b,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=v}}}function Kq(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new V9(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class cm extends l1{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const tI=[.125,.215,.35,.446,.526,.582],u1=new cm,nI=new Re;let d1=null,h1=0,f1=0;const Xl=(1+Math.sqrt(5))/2,nd=1/Xl,iI=[new T(1,1,1),new T(-1,1,1),new T(1,1,-1),new T(-1,1,-1),new T(0,Xl,nd),new T(0,Xl,-nd),new T(nd,0,Xl),new T(-nd,0,Xl),new T(Xl,nd,0),new T(-Xl,nd,0)];class rI{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){d1=this._renderer.getRenderTarget(),h1=this._renderer.getActiveCubeFace(),f1=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=aI(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=oI(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(d1,h1,f1),e.scissorTest=!1,um(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),d1=this._renderer.getRenderTarget(),h1=this._renderer.getActiveCubeFace(),f1=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Wn,minFilter:Wn,generateMipmaps:!1,type:Xh,format:is,colorSpace:rr,depthBuffer:!1},r=sI(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=sI(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Jq(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+tI.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-4?l=tI[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,_=3,m=2,g=1,v=new Float32Array(_*p*f),y=new Float32Array(m*p*f),b=new Float32Array(g*p*f);for(let S=0;S<f;S++){const M=S%3*2/3-1,A=S>2?0:-1;v.set([M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0],_*p*S),y.set(h,m*p*S),b.set([S,S,S,S,S,S],g*p*S)}const E=new Wt;E.setAttribute("position",new $n(v,_)),E.setAttribute("uv",new $n(y,m)),E.setAttribute("faceIndex",new $n(b,g)),e.push(E),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function Zq(n,e,t){const i=new Float32Array(20),r=new T(0,1,0);return new aa({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new qi(this._lodPlanes[0],e);this._renderer.compile(t,u1)}_sceneToCubeUV(e,t,i,r){const a=new Xi(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(nI),u.toneMapping=0,u.autoClear=!1;const f=new os({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new qi(new Ju,f);let _=!1;const m=e.background;m?m.isColor&&(f.color.copy(m),e.background=null,_=!0):(f.color.copy(nI),_=!0);for(let g=0;g<6;g++){const v=g%3;0===v?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):1===v?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const y=this._cubeSize;um(r,v*y,g>2?y:0,y,y),u.setRenderTarget(r),_&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=m}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=aI()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=oI());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new qi(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;um(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,u1)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,iI[(r-1)%iI.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new qi(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,_=s/p,m=isFinite(s)?1+Math.floor(3*_):20;m>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const g=[];let v=0;for(let M=0;M<20;++M){const A=M/_,U=Math.exp(-A*A/2);g.push(U),0===M?v+=U:M<m&&(v+=2*U)}for(let M=0;M<g.length;M++)g[M]=g[M]/v;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=g,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-i;const b=this._sizeLods[r];um(t,3*b*(r>y-4?r-y+4:0),4*(this._cubeSize-b),3*b,2*b),l.setRenderTarget(t),l.render(d,u1)}}function sI(n,e,t){const i=new Hl(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function um(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function oI(){return new aa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function aI(){return new aa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Qq(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new rI(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===t&&(t=new rI(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function eX(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function tX(n,e,t,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const _=h.morphAttributes[p];for(let m=0,g=_.length;m<g;m++)e.remove(_[m])}h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,p=d.attributes.position;let _=0;if(null!==f){const v=f.array;_=f.version;for(let y=0,b=v.length;y<b;y+=3){const E=v[y+0],S=v[y+1],M=v[y+2];h.push(E,S,S,M,M,E)}}else{if(void 0===p)return;_=p.version;for(let y=0,b=p.array.length/3-1;y<b;y+=3){const E=y+0,S=y+1,M=y+2;h.push(E,S,S,M,M,E)}}const m=new(DN(h)?$N:WN)(h,1);m.version=_;const g=s.get(d);g&&e.remove(g),s.set(d,m)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER);const f=d.morphAttributes;for(const p in f){const _=f[p];for(let m=0,g=_.length;m<g;m++)e.update(_[m],n.ARRAY_BUFFER)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function nX(n,e,t,i){const r=i.isWebGL2;let s,a,l;this.setMode=function o(f){s=f},this.setIndex=function c(f){a=f.type,l=f.bytesPerElement},this.render=function u(f,p){n.drawElements(s,p,a,f*l),t.update(p,s,1)},this.renderInstances=function d(f,p,_){if(0===_)return;let m,g;if(r)m=n,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[g](s,p,a,f*l,_),t.update(p,s,_)},this.renderMultiDraw=function h(f,p,_){if(0===_)return;const m=e.get("WEBGL_multi_draw");if(null===m)for(let g=0;g<_;g++)this.render(f[g]/l,p[g]);else{m.multiDrawElementsWEBGL(s,p,0,a,f,0,_);let g=0;for(let v=0;v<_;v++)g+=p[v];t.update(g,s,1)}}}function iX(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function rX(n,e){return n[0]-e[0]}function sX(n,e){return Math.abs(e[1])-Math.abs(n[1])}function oX(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new En,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d){const h=c.morphTargetInfluences;if(!0===e.isWebGL2){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==f?f.length:0;let _=s.get(u);if(void 0===_||_.count!==p){let Q=function(){w.dispose(),s.delete(u),u.removeEventListener("dispose",Q)};void 0!==_&&_.texture.dispose();const m=void 0!==u.morphAttributes.position,g=void 0!==u.morphAttributes.normal,v=void 0!==u.morphAttributes.color,y=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],E=u.morphAttributes.color||[];let S=0;!0===m&&(S=1),!0===g&&(S=2),!0===v&&(S=3);let M=u.attributes.position.count*S,A=1;M>e.maxTextureSize&&(A=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const U=new Float32Array(M*A*4*p),w=new $b(U,M,A,p);w.type=As,w.needsUpdate=!0;const R=4*S;for(let Z=0;Z<p;Z++){const F=y[Z],K=b[Z],L=E[Z],V=M*A*4*Z;for(let H=0;H<F.count;H++){const $=H*R;!0===m&&(o.fromBufferAttribute(F,H),U[V+$+0]=o.x,U[V+$+1]=o.y,U[V+$+2]=o.z,U[V+$+3]=0),!0===g&&(o.fromBufferAttribute(K,H),U[V+$+4]=o.x,U[V+$+5]=o.y,U[V+$+6]=o.z,U[V+$+7]=0),!0===v&&(o.fromBufferAttribute(L,H),U[V+$+8]=o.x,U[V+$+9]=o.y,U[V+$+10]=o.z,U[V+$+11]=4===L.itemSize?o.w:1)}}_={count:p,texture:w,size:new ne(M,A)},s.set(u,_),u.addEventListener("dispose",Q)}if(!0===c.isInstancedMesh&&null!==c.morphTexture)d.getUniforms().setValue(n,"morphTexture",c.morphTexture,t);else{let m=0;for(let v=0;v<h.length;v++)m+=h[v];const g=u.morphTargetsRelative?1:1-m;d.getUniforms().setValue(n,"morphTargetBaseInfluence",g),d.getUniforms().setValue(n,"morphTargetInfluences",h)}d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const f=void 0===h?0:h.length;let p=i[u.id];if(void 0===p||p.length!==f){p=[];for(let y=0;y<f;y++)p[y]=[y,0];i[u.id]=p}for(let y=0;y<f;y++){const b=p[y];b[0]=y,b[1]=h[y]}p.sort(sX);for(let y=0;y<8;y++)y<f&&p[y][1]?(a[y][0]=p[y][0],a[y][1]=p[y][1]):(a[y][0]=Number.MAX_SAFE_INTEGER,a[y][1]=0);a.sort(rX);const _=u.morphAttributes.position,m=u.morphAttributes.normal;let g=0;for(let y=0;y<8;y++){const b=a[y],E=b[0],S=b[1];E!==Number.MAX_SAFE_INTEGER&&S?(_&&u.getAttribute("morphTarget"+y)!==_[E]&&u.setAttribute("morphTarget"+y,_[E]),m&&u.getAttribute("morphNormal"+y)!==m[E]&&u.setAttribute("morphNormal"+y,m[E]),r[y]=S,g+=S):(_&&!0===u.hasAttribute("morphTarget"+y)&&u.deleteAttribute("morphTarget"+y),m&&!0===u.hasAttribute("morphNormal"+y)&&u.deleteAttribute("morphNormal"+y),r[y]=0)}const v=u.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",v),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function aX(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,d=e.get(l,l.geometry);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),null!==l.instanceColor&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return d},dispose:function o(){r=new WeakMap}}}class lI extends Rs{constructor(e,t,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:Bl)!==Bl&&u!==Au)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Bl&&(i=ka),void 0===i&&u===Au&&(i=kl),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:gi,this.minFilter=void 0!==l?l:gi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const cI=new Rs,uI=new lI(1,1);uI.compareFunction=515;const dI=new $b,hI=new ON,fI=new sm,pI=[],gI=[],mI=new Float32Array(16),_I=new Float32Array(9),yI=new Float32Array(4);function id(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=pI[r];if(void 0===s&&(s=new Float32Array(r),pI[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Li(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Fi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function dm(n,e){let t=gI[e];void 0===t&&(t=new Int32Array(e),gI[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function lX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function cX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Li(t,e))return;n.uniform2fv(this.addr,e),Fi(t,e)}}function uX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Li(t,e))return;n.uniform3fv(this.addr,e),Fi(t,e)}}function dX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Li(t,e))return;n.uniform4fv(this.addr,e),Fi(t,e)}}function hX(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Li(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Fi(t,e)}else{if(Li(t,i))return;yI.set(i),n.uniformMatrix2fv(this.addr,!1,yI),Fi(t,i)}}function fX(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Li(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Fi(t,e)}else{if(Li(t,i))return;_I.set(i),n.uniformMatrix3fv(this.addr,!1,_I),Fi(t,i)}}function pX(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Li(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Fi(t,e)}else{if(Li(t,i))return;mI.set(i),n.uniformMatrix4fv(this.addr,!1,mI),Fi(t,i)}}function gX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function mX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Li(t,e))return;n.uniform2iv(this.addr,e),Fi(t,e)}}function _X(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Li(t,e))return;n.uniform3iv(this.addr,e),Fi(t,e)}}function yX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Li(t,e))return;n.uniform4iv(this.addr,e),Fi(t,e)}}function vX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function bX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Li(t,e))return;n.uniform2uiv(this.addr,e),Fi(t,e)}}function wX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Li(t,e))return;n.uniform3uiv(this.addr,e),Fi(t,e)}}function MX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Li(t,e))return;n.uniform4uiv(this.addr,e),Fi(t,e)}}function xX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||(this.type===n.SAMPLER_2D_SHADOW?uI:cI),r)}function SX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||hI,r)}function EX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||fI,r)}function CX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||dI,r)}function DX(n,e){n.uniform1fv(this.addr,e)}function AX(n,e){const t=id(e,this.size,2);n.uniform2fv(this.addr,t)}function RX(n,e){const t=id(e,this.size,3);n.uniform3fv(this.addr,t)}function NX(n,e){const t=id(e,this.size,4);n.uniform4fv(this.addr,t)}function IX(n,e){const t=id(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function PX(n,e){const t=id(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function OX(n,e){const t=id(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function LX(n,e){n.uniform1iv(this.addr,e)}function FX(n,e){n.uniform2iv(this.addr,e)}function kX(n,e){n.uniform3iv(this.addr,e)}function BX(n,e){n.uniform4iv(this.addr,e)}function UX(n,e){n.uniform1uiv(this.addr,e)}function VX(n,e){n.uniform2uiv(this.addr,e)}function HX(n,e){n.uniform3uiv(this.addr,e)}function zX(n,e){n.uniform4uiv(this.addr,e)}function GX(n,e,t){const i=this.cache,r=e.length,s=dm(t,r);Li(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||cI,s[o])}function WX(n,e,t){const i=this.cache,r=e.length,s=dm(t,r);Li(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||hI,s[o])}function $X(n,e,t){const i=this.cache,r=e.length,s=dm(t,r);Li(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||fI,s[o])}function jX(n,e,t){const i=this.cache,r=e.length,s=dm(t,r);Li(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||dI,s[o])}class XX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function TX(n){switch(n){case 5126:return lX;case 35664:return cX;case 35665:return uX;case 35666:return dX;case 35674:return hX;case 35675:return fX;case 35676:return pX;case 5124:case 35670:return gX;case 35667:case 35671:return mX;case 35668:case 35672:return _X;case 35669:case 35673:return yX;case 5125:return vX;case 36294:return bX;case 36295:return wX;case 36296:return MX;case 35678:case 36198:case 36298:case 36306:case 35682:return xX;case 35679:case 36299:case 36307:return SX;case 35680:case 36300:case 36308:case 36293:return EX;case 36289:case 36303:case 36311:case 36292:return CX}}(t.type)}}class YX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function qX(n){switch(n){case 5126:return DX;case 35664:return AX;case 35665:return RX;case 35666:return NX;case 35674:return IX;case 35675:return PX;case 35676:return OX;case 5124:case 35670:return LX;case 35667:case 35671:return FX;case 35668:case 35672:return kX;case 35669:case 35673:return BX;case 5125:return UX;case 36294:return VX;case 36295:return HX;case 36296:return zX;case 35678:case 36198:case 36298:case 36306:case 35682:return GX;case 35679:case 36299:case 36307:return WX;case 35680:case 36300:case 36308:case 36293:return $X;case 36289:case 36303:case 36311:case 36292:return jX}}(t.type)}}class KX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const g1=/(\w+)(\])?(\[|\.)?/g;function vI(n,e){n.seq.push(e),n.map[e.id]=e}function JX(n,e,t){const i=n.name,r=i.length;for(g1.lastIndex=0;;){const s=g1.exec(i),o=g1.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){vI(t,void 0===c?new XX(a,n,e):new YX(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new KX(a),vI(t,d)),t=d}}}class hm{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);JX(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function bI(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let QX=0;function wI(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function eY(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function nY(n,e){const t=function tY(n){const e=yn.getPrimaries(yn.workingColorSpace),t=yn.getPrimaries(n);let i;switch(e===t?i="":"p3"===e&&t===Fg?i="LinearDisplayP3ToLinearSRGB":e===Fg&&"p3"===t&&(i="LinearSRGBToLinearDisplayP3"),n){case rr:case Og:return[i,"LinearTransferOETF"];case gr:case Bb:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function iY(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 6:t="AgX";break;case 7:t="Neutral";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function rd(n){return""!==n}function MI(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xI(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const lY=/^[ \t]*#include +<([\w\d./]+)>/gm;function m1(n){return n.replace(lY,uY)}const cY=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function uY(n,e){let t=Ut[e];if(void 0===t){const i=cY.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=Ut[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return m1(t)}const dY=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function SI(n){return n.replace(dY,hY)}function hY(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function EI(n){let e=`precision ${n.precision} float;\n\tprecision ${n.precision} int;\n\tprecision ${n.precision} sampler2D;\n\tprecision ${n.precision} samplerCube;\n\t`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;\n\t\tprecision ${n.precision} sampler2DArray;\n\t\tprecision ${n.precision} sampler2DShadow;\n\t\tprecision ${n.precision} samplerCubeShadow;\n\t\tprecision ${n.precision} sampler2DArrayShadow;\n\t\tprecision ${n.precision} isampler2D;\n\t\tprecision ${n.precision} isampler3D;\n\t\tprecision ${n.precision} isamplerCube;\n\t\tprecision ${n.precision} isampler2DArray;\n\t\tprecision ${n.precision} usampler2D;\n\t\tprecision ${n.precision} usampler3D;\n\t\tprecision ${n.precision} usamplerCube;\n\t\tprecision ${n.precision} usampler2DArray;\n\t\t`),"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function yY(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function fY(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function pY(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function gY(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function mY(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function _Y(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=t.isWebGL2?"":function rY(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(rd).join("\n")}(t),p=function sY(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(rd).join("\n")}(t),_=function oY(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),m=r.createProgram();let g,v,y=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(rd).join("\n"),g.length>0&&(g+="\n"),v=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(rd).join("\n"),v.length>0&&(v+="\n")):(g=[EI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rd).join("\n"),v=[f,EI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Ut.tonemapping_pars_fragment:"",0!==t.toneMapping?iY("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ut.colorspace_pars_fragment,nY("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(rd).join("\n")),o=m1(o),o=MI(o,t),o=xI(o,t),a=m1(a),a=MI(a,t),a=xI(a,t),o=SI(o),a=SI(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(y="#version 300 es\n",g=[p,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["precision mediump sampler2DArray;","#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const E=y+v+a,S=bI(r,r.VERTEX_SHADER,y+g+o),M=bI(r,r.FRAGMENT_SHADER,E);function A(Q){if(n.debug.checkShaderErrors){const Z=r.getProgramInfoLog(m).trim(),F=r.getShaderInfoLog(S).trim(),K=r.getShaderInfoLog(M).trim();let L=!0,V=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(L=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,m,S,M);else{const H=wI(r,S,"vertex"),$=wI(r,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+Q.name+"\nMaterial Type: "+Q.type+"\n\nProgram Info Log: "+Z+"\n"+H+"\n"+$)}else""!==Z?console.warn("THREE.WebGLProgram: Program Info Log:",Z):(""===F||""===K)&&(V=!1);V&&(Q.diagnostics={runnable:L,programLog:Z,vertexShader:{log:F,prefix:g},fragmentShader:{log:K,prefix:v}})}r.deleteShader(S),r.deleteShader(M),U=new hm(r,m),w=function aY(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,m)}let U,w;r.attachShader(m,S),r.attachShader(m,M),void 0!==t.index0AttributeName?r.bindAttribLocation(m,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),this.getUniforms=function(){return void 0===U&&A(this),U},this.getAttributes=function(){return void 0===w&&A(this),w};let R=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===R&&(R=r.getProgramParameter(m,37297)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=QX++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=S,this.fragmentShader=M,this}let vY=0;class bY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new wY(e),t.set(e,i)),i}}class wY{constructor(e){this.id=vY++,this.code=e,this.usedTimes=0}}function MY(n,e,t,i,r,s,o){const a=new Zb,l=new bY,c=new Set,u=[],d=r.isWebGL2,h=r.logarithmicDepthBuffer,f=r.vertexTextures;let p=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(w){return c.add(w),0===w?"uv":`uv${w}`}return{getParameters:function g(w,R,Q,Z,F){const K=Z.fog,L=F.geometry,H=(w.isMeshStandardMaterial?t:e).get(w.envMap||(w.isMeshStandardMaterial?Z.environment:null)),$=H&&306===H.mapping?H.image.height:null,le=_[w.type];null!==w.precision&&(p=r.getMaxPrecision(w.precision),p!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",p,"instead."));const he=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,Me=void 0!==he?he.length:0;let z,pe,Se,Ne,Xe=0;if(void 0!==L.morphAttributes.position&&(Xe=1),void 0!==L.morphAttributes.normal&&(Xe=2),void 0!==L.morphAttributes.color&&(Xe=3),le){const wn=Eo[le];z=wn.vertexShader,pe=wn.fragmentShader}else z=w.vertexShader,pe=w.fragmentShader,l.update(w),Se=l.getVertexShaderID(w),Ne=l.getFragmentShaderID(w);const Oe=n.getRenderTarget(),De=!0===F.isInstancedMesh,We=!!w.map,xe=!!H,se=!!w.aoMap,be=!!w.lightMap,ue=!!w.bumpMap,Ve=!!w.normalMap,Be=!!w.displacementMap,je=!!w.emissiveMap,Lt=!!w.metalnessMap,N=!!w.roughnessMap,x=w.anisotropy>0,te=w.clearcoat>0,ie=w.iridescence>0,me=w.sheen>0,ge=w.transmission>0,_t=x&&!!w.anisotropyMap,st=te&&!!w.clearcoatMap,Ee=te&&!!w.clearcoatNormalMap,Te=te&&!!w.clearcoatRoughnessMap,yt=ie&&!!w.iridescenceMap,we=ie&&!!w.iridescenceThicknessMap,di=me&&!!w.sheenColorMap,jt=me&&!!w.sheenRoughnessMap,rt=!!w.specularMap,qe=!!w.specularColorMap,et=!!w.specularIntensityMap,I=ge&&!!w.transmissionMap,ce=ge&&!!w.thicknessMap,B=!!w.alphaMap,_e=!!w.extensions;let Fe=0;w.toneMapped&&(null===Oe||!0===Oe.isXRRenderTarget)&&(Fe=n.toneMapping);const Kt={isWebGL2:d,shaderID:le,shaderType:w.type,shaderName:w.name,vertexShader:z,fragmentShader:pe,defines:w.defines,customVertexShaderID:Se,customFragmentShaderID:Ne,isRawShaderMaterial:!0===w.isRawShaderMaterial,glslVersion:w.glslVersion,precision:p,batching:!0===F.isBatchedMesh,instancing:De,instancingColor:De&&null!==F.instanceColor,instancingMorph:De&&null!==F.morphTexture,supportsVertexTextures:f,outputColorSpace:null===Oe?n.outputColorSpace:!0===Oe.isXRRenderTarget?Oe.texture.colorSpace:rr,alphaToCoverage:!!w.alphaToCoverage,map:We,matcap:!!w.matcap,envMap:xe,envMapMode:xe&&H.mapping,envMapCubeUVHeight:$,aoMap:se,lightMap:be,bumpMap:ue,normalMap:Ve,displacementMap:f&&Be,emissiveMap:je,normalMapObjectSpace:Ve&&1===w.normalMapType,normalMapTangentSpace:Ve&&0===w.normalMapType,metalnessMap:Lt,roughnessMap:N,anisotropy:x,anisotropyMap:_t,clearcoat:te,clearcoatMap:st,clearcoatNormalMap:Ee,clearcoatRoughnessMap:Te,iridescence:ie,iridescenceMap:yt,iridescenceThicknessMap:we,sheen:me,sheenColorMap:di,sheenRoughnessMap:jt,specularMap:rt,specularColorMap:qe,specularIntensityMap:et,transmission:ge,transmissionMap:I,thicknessMap:ce,gradientMap:!!w.gradientMap,opaque:!1===w.transparent&&1===w.blending&&!1===w.alphaToCoverage,alphaMap:B,alphaTest:w.alphaTest>0,alphaHash:!!w.alphaHash,combine:w.combine,mapUv:We&&m(w.map.channel),aoMapUv:se&&m(w.aoMap.channel),lightMapUv:be&&m(w.lightMap.channel),bumpMapUv:ue&&m(w.bumpMap.channel),normalMapUv:Ve&&m(w.normalMap.channel),displacementMapUv:Be&&m(w.displacementMap.channel),emissiveMapUv:je&&m(w.emissiveMap.channel),metalnessMapUv:Lt&&m(w.metalnessMap.channel),roughnessMapUv:N&&m(w.roughnessMap.channel),anisotropyMapUv:_t&&m(w.anisotropyMap.channel),clearcoatMapUv:st&&m(w.clearcoatMap.channel),clearcoatNormalMapUv:Ee&&m(w.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Te&&m(w.clearcoatRoughnessMap.channel),iridescenceMapUv:yt&&m(w.iridescenceMap.channel),iridescenceThicknessMapUv:we&&m(w.iridescenceThicknessMap.channel),sheenColorMapUv:di&&m(w.sheenColorMap.channel),sheenRoughnessMapUv:jt&&m(w.sheenRoughnessMap.channel),specularMapUv:rt&&m(w.specularMap.channel),specularColorMapUv:qe&&m(w.specularColorMap.channel),specularIntensityMapUv:et&&m(w.specularIntensityMap.channel),transmissionMapUv:I&&m(w.transmissionMap.channel),thicknessMapUv:ce&&m(w.thicknessMap.channel),alphaMapUv:B&&m(w.alphaMap.channel),vertexTangents:!!L.attributes.tangent&&(Ve||x),vertexColors:w.vertexColors,vertexAlphas:!0===w.vertexColors&&!!L.attributes.color&&4===L.attributes.color.itemSize,pointsUvs:!0===F.isPoints&&!!L.attributes.uv&&(We||B),fog:!!K,useFog:!0===w.fog,fogExp2:!!K&&K.isFogExp2,flatShading:!0===w.flatShading,sizeAttenuation:!0===w.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===F.isSkinnedMesh,morphTargets:void 0!==L.morphAttributes.position,morphNormals:void 0!==L.morphAttributes.normal,morphColors:void 0!==L.morphAttributes.color,morphTargetsCount:Me,morphTextureStride:Xe,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&Q.length>0,shadowMapType:n.shadowMap.type,toneMapping:Fe,useLegacyLights:n._useLegacyLights,decodeVideoTexture:We&&!0===w.map.isVideoTexture&&yn.getTransfer(w.map.colorSpace)===Un,premultipliedAlpha:w.premultipliedAlpha,doubleSided:2===w.side,flipSided:1===w.side,useDepthPacking:w.depthPacking>=0,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionDerivatives:_e&&!0===w.extensions.derivatives,extensionFragDepth:_e&&!0===w.extensions.fragDepth,extensionDrawBuffers:_e&&!0===w.extensions.drawBuffers,extensionShaderTextureLOD:_e&&!0===w.extensions.shaderTextureLOD,extensionClipCullDistance:_e&&!0===w.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:_e&&!0===w.extensions.multiDraw&&i.has("WEBGL_multi_draw"),rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:w.customProgramCacheKey()};return Kt.vertexUv1s=c.has(1),Kt.vertexUv2s=c.has(2),Kt.vertexUv3s=c.has(3),c.clear(),Kt},getProgramCacheKey:function v(w){const R=[];if(w.shaderID?R.push(w.shaderID):(R.push(w.customVertexShaderID),R.push(w.customFragmentShaderID)),void 0!==w.defines)for(const Q in w.defines)R.push(Q),R.push(w.defines[Q]);return!1===w.isRawShaderMaterial&&(function y(w,R){w.push(R.precision),w.push(R.outputColorSpace),w.push(R.envMapMode),w.push(R.envMapCubeUVHeight),w.push(R.mapUv),w.push(R.alphaMapUv),w.push(R.lightMapUv),w.push(R.aoMapUv),w.push(R.bumpMapUv),w.push(R.normalMapUv),w.push(R.displacementMapUv),w.push(R.emissiveMapUv),w.push(R.metalnessMapUv),w.push(R.roughnessMapUv),w.push(R.anisotropyMapUv),w.push(R.clearcoatMapUv),w.push(R.clearcoatNormalMapUv),w.push(R.clearcoatRoughnessMapUv),w.push(R.iridescenceMapUv),w.push(R.iridescenceThicknessMapUv),w.push(R.sheenColorMapUv),w.push(R.sheenRoughnessMapUv),w.push(R.specularMapUv),w.push(R.specularColorMapUv),w.push(R.specularIntensityMapUv),w.push(R.transmissionMapUv),w.push(R.thicknessMapUv),w.push(R.combine),w.push(R.fogExp2),w.push(R.sizeAttenuation),w.push(R.morphTargetsCount),w.push(R.morphAttributeCount),w.push(R.numDirLights),w.push(R.numPointLights),w.push(R.numSpotLights),w.push(R.numSpotLightMaps),w.push(R.numHemiLights),w.push(R.numRectAreaLights),w.push(R.numDirLightShadows),w.push(R.numPointLightShadows),w.push(R.numSpotLightShadows),w.push(R.numSpotLightShadowsWithMaps),w.push(R.numLightProbes),w.push(R.shadowMapType),w.push(R.toneMapping),w.push(R.numClippingPlanes),w.push(R.numClipIntersection),w.push(R.depthPacking)}(R,w),function b(w,R){a.disableAll(),R.isWebGL2&&a.enable(0),R.supportsVertexTextures&&a.enable(1),R.instancing&&a.enable(2),R.instancingColor&&a.enable(3),R.instancingMorph&&a.enable(4),R.matcap&&a.enable(5),R.envMap&&a.enable(6),R.normalMapObjectSpace&&a.enable(7),R.normalMapTangentSpace&&a.enable(8),R.clearcoat&&a.enable(9),R.iridescence&&a.enable(10),R.alphaTest&&a.enable(11),R.vertexColors&&a.enable(12),R.vertexAlphas&&a.enable(13),R.vertexUv1s&&a.enable(14),R.vertexUv2s&&a.enable(15),R.vertexUv3s&&a.enable(16),R.vertexTangents&&a.enable(17),R.anisotropy&&a.enable(18),R.alphaHash&&a.enable(19),R.batching&&a.enable(20),w.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.skinning&&a.enable(4),R.morphTargets&&a.enable(5),R.morphNormals&&a.enable(6),R.morphColors&&a.enable(7),R.premultipliedAlpha&&a.enable(8),R.shadowMapEnabled&&a.enable(9),R.useLegacyLights&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),R.alphaToCoverage&&a.enable(20),w.push(a.mask)}(R,w),R.push(n.outputColorSpace)),R.push(w.customProgramCacheKey),R.join()},getUniforms:function E(w){const R=_[w.type];let Q;return Q=R?F9.clone(Eo[R].uniforms):w.uniforms,Q},acquireProgram:function S(w,R){let Q;for(let Z=0,F=u.length;Z<F;Z++){const K=u[Z];if(K.cacheKey===R){Q=K,++Q.usedTimes;break}}return void 0===Q&&(Q=new yY(n,R,w,s),u.push(Q)),Q},releaseProgram:function M(w){if(0==--w.usedTimes){const R=u.indexOf(w);u[R]=u[u.length-1],u.pop(),w.destroy()}},releaseShaderCache:function A(w){l.remove(w)},programs:u,dispose:function U(){l.dispose()}}}function xY(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function SY(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function CI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function TI(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,h,f,p,_,m){let g=n[e];return void 0===g?(g={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:_,group:m},n[e]=g):(g.id=d.id,g.object=d,g.geometry=h,g.material=f,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=_,g.group=m),e++,g}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,h,f,p,_,m){const g=o(d,h,f,p,_,m);f.transmission>0?i.push(g):!0===f.transparent?r.push(g):t.push(g)},unshift:function l(d,h,f,p,_,m){const g=o(d,h,f,p,_,m);f.transmission>0?i.unshift(g):!0===f.transparent?r.unshift(g):t.unshift(g)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||SY),i.length>1&&i.sort(h||CI),r.length>1&&r.sort(h||CI)}}}function EY(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new TI,n.set(i,[o])):r>=s.length?(o=new TI,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function CY(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new T,color:new Re};break;case"SpotLight":t={position:new T,direction:new T,color:new Re,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new T,color:new Re,distance:0,decay:0};break;case"HemisphereLight":t={direction:new T,skyColor:new Re,groundColor:new Re};break;case"RectAreaLight":t={color:new Re,position:new T,halfWidth:new T,halfHeight:new T}}return n[e.id]=t,t}}}let DY=0;function AY(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function RY(n,e){const t=new CY,i=function TY(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new T);const s=new T,o=new nt,a=new nt;return{setup:function l(u,d){let h=0,f=0,p=0;for(let Q=0;Q<9;Q++)r.probe[Q].set(0,0,0);let _=0,m=0,g=0,v=0,y=0,b=0,E=0,S=0,M=0,A=0,U=0;u.sort(AY);const w=!0===d?Math.PI:1;for(let Q=0,Z=u.length;Q<Z;Q++){const F=u[Q],K=F.color,L=F.intensity,V=F.distance,H=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)h+=K.r*L*w,f+=K.g*L*w,p+=K.b*L*w;else if(F.isLightProbe){for(let $=0;$<9;$++)r.probe[$].addScaledVector(F.sh.coefficients[$],L);U++}else if(F.isDirectionalLight){const $=t.get(F);if($.color.copy(F.color).multiplyScalar(F.intensity*w),F.castShadow){const le=F.shadow,he=i.get(F);he.shadowBias=le.bias,he.shadowNormalBias=le.normalBias,he.shadowRadius=le.radius,he.shadowMapSize=le.mapSize,r.directionalShadow[_]=he,r.directionalShadowMap[_]=H,r.directionalShadowMatrix[_]=F.shadow.matrix,b++}r.directional[_]=$,_++}else if(F.isSpotLight){const $=t.get(F);$.position.setFromMatrixPosition(F.matrixWorld),$.color.copy(K).multiplyScalar(L*w),$.distance=V,$.coneCos=Math.cos(F.angle),$.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),$.decay=F.decay,r.spot[g]=$;const le=F.shadow;if(F.map&&(r.spotLightMap[M]=F.map,M++,le.updateMatrices(F),F.castShadow&&A++),r.spotLightMatrix[g]=le.matrix,F.castShadow){const he=i.get(F);he.shadowBias=le.bias,he.shadowNormalBias=le.normalBias,he.shadowRadius=le.radius,he.shadowMapSize=le.mapSize,r.spotShadow[g]=he,r.spotShadowMap[g]=H,S++}g++}else if(F.isRectAreaLight){const $=t.get(F);$.color.copy(K).multiplyScalar(L),$.halfWidth.set(.5*F.width,0,0),$.halfHeight.set(0,.5*F.height,0),r.rectArea[v]=$,v++}else if(F.isPointLight){const $=t.get(F);if($.color.copy(F.color).multiplyScalar(F.intensity*w),$.distance=F.distance,$.decay=F.decay,F.castShadow){const le=F.shadow,he=i.get(F);he.shadowBias=le.bias,he.shadowNormalBias=le.normalBias,he.shadowRadius=le.radius,he.shadowMapSize=le.mapSize,he.shadowCameraNear=le.camera.near,he.shadowCameraFar=le.camera.far,r.pointShadow[m]=he,r.pointShadowMap[m]=H,r.pointShadowMatrix[m]=F.shadow.matrix,E++}r.point[m]=$,m++}else if(F.isHemisphereLight){const $=t.get(F);$.skyColor.copy(F.color).multiplyScalar(L*w),$.groundColor.copy(F.groundColor).multiplyScalar(L*w),r.hemi[y]=$,y++}}v>0&&(e.isWebGL2?!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ce.LTC_FLOAT_1,r.rectAreaLTC2=Ce.LTC_FLOAT_2):(r.rectAreaLTC1=Ce.LTC_HALF_1,r.rectAreaLTC2=Ce.LTC_HALF_2):!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ce.LTC_FLOAT_1,r.rectAreaLTC2=Ce.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Ce.LTC_HALF_1,r.rectAreaLTC2=Ce.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const R=r.hash;(R.directionalLength!==_||R.pointLength!==m||R.spotLength!==g||R.rectAreaLength!==v||R.hemiLength!==y||R.numDirectionalShadows!==b||R.numPointShadows!==E||R.numSpotShadows!==S||R.numSpotMaps!==M||R.numLightProbes!==U)&&(r.directional.length=_,r.spot.length=g,r.rectArea.length=v,r.point.length=m,r.hemi.length=y,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=S+M-A,r.spotLightMap.length=M,r.numSpotLightShadowsWithMaps=A,r.numLightProbes=U,R.directionalLength=_,R.pointLength=m,R.spotLength=g,R.rectAreaLength=v,R.hemiLength=y,R.numDirectionalShadows=b,R.numPointShadows=E,R.numSpotShadows=S,R.numSpotMaps=M,R.numLightProbes=U,r.version=DY++)},setupView:function c(u,d){let h=0,f=0,p=0,_=0,m=0;const g=d.matrixWorldInverse;for(let v=0,y=u.length;v<y;v++){const b=u[v];if(b.isDirectionalLight){const E=r.directional[h];E.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(g),h++}else if(b.isSpotLight){const E=r.spot[p];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),E.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(g),p++}else if(b.isRectAreaLight){const E=r.rectArea[_];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),a.identity(),o.copy(b.matrixWorld),o.premultiply(g),a.extractRotation(o),E.halfWidth.set(.5*b.width,0,0),E.halfHeight.set(0,.5*b.height,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),_++}else if(b.isPointLight){const E=r.point[f];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),f++}else if(b.isHemisphereLight){const E=r.hemi[m];E.direction.setFromMatrixPosition(b.matrixWorld),E.direction.transformDirection(g),m++}}},state:r}}function DI(n,e){const t=new RY(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function l(d){t.setup(i,d)},setupLightsView:function c(d){t.setupView(i,d)},pushLight:function o(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function NY(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let l;return void 0===a?(l=new DI(n,e),t.set(s,[l])):o>=a.length?(l=new DI(n,e),a.push(l)):l=a[o],l},dispose:function r(){t=new WeakMap}}}class AI extends ao{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class RI extends ao{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function OY(n,e,t){let i=new am;const r=new ne,s=new ne,o=new En,a=new AI({depthPacking:3201}),l=new RI,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new aa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ne},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new Wt;p.setAttribute("position",new $n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new qi(p,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let g=this.type;function v(S,M){const A=e.update(_);h.defines.VSM_SAMPLES!==S.blurSamples&&(h.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===S.mapPass&&(S.mapPass=new Hl(r.x,r.y)),h.uniforms.shadow_pass.value=S.map.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(M,null,A,h,_,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(M,null,A,f,_,null)}function y(S,M,A,U){let w=null;const R=!0===A.isPointLight?S.customDistanceMaterial:S.customDepthMaterial;if(void 0!==R)w=R;else if(w=!0===A.isPointLight?l:a,n.localClippingEnabled&&!0===M.clipShadows&&Array.isArray(M.clippingPlanes)&&0!==M.clippingPlanes.length||M.displacementMap&&0!==M.displacementScale||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const Q=w.uuid,Z=M.uuid;let F=c[Q];void 0===F&&(F={},c[Q]=F);let K=F[Z];void 0===K&&(K=w.clone(),F[Z]=K,M.addEventListener("dispose",E)),w=K}return w.visible=M.visible,w.wireframe=M.wireframe,w.side=3===U?null!==M.shadowSide?M.shadowSide:M.side:null!==M.shadowSide?M.shadowSide:d[M.side],w.alphaMap=M.alphaMap,w.alphaTest=M.alphaTest,w.map=M.map,w.clipShadows=M.clipShadows,w.clippingPlanes=M.clippingPlanes,w.clipIntersection=M.clipIntersection,w.displacementMap=M.displacementMap,w.displacementScale=M.displacementScale,w.displacementBias=M.displacementBias,w.wireframeLinewidth=M.wireframeLinewidth,w.linewidth=M.linewidth,!0===A.isPointLight&&!0===w.isMeshDistanceMaterial&&(n.properties.get(w).light=A),w}function b(S,M,A,U,w){if(!1===S.visible)return;if(S.layers.test(M.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&3===w)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,S.matrixWorld);const Z=e.update(S),F=S.material;if(Array.isArray(F)){const K=Z.groups;for(let L=0,V=K.length;L<V;L++){const H=K[L],$=F[H.materialIndex];if($&&$.visible){const le=y(S,$,U,w);S.onBeforeShadow(n,S,M,A,Z,le,H),n.renderBufferDirect(A,null,Z,le,S,H),S.onAfterShadow(n,S,M,A,Z,le,H)}}}else if(F.visible){const K=y(S,F,U,w);S.onBeforeShadow(n,S,M,A,Z,K,null),n.renderBufferDirect(A,null,Z,K,S,null),S.onAfterShadow(n,S,M,A,Z,K,null)}}const Q=S.children;for(let Z=0,F=Q.length;Z<F;Z++)b(Q[Z],M,A,U,w)}function E(S){S.target.removeEventListener("dispose",E);for(const A in c){const U=c[A],w=S.target.uuid;w in U&&(U[w].dispose(),delete U[w])}}this.render=function(S,M,A){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===S.length)return;const U=n.getRenderTarget(),w=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),Q=n.state;Q.setBlending(0),Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);const Z=3!==g&&3===this.type,F=3===g&&3!==this.type;for(let K=0,L=S.length;K<L;K++){const V=S[K],H=V.shadow;if(void 0===H){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(!1===H.autoUpdate&&!1===H.needsUpdate)continue;r.copy(H.mapSize);const $=H.getFrameExtents();if(r.multiply($),s.copy(H.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/$.x),r.x=s.x*$.x,H.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/$.y),r.y=s.y*$.y,H.mapSize.y=s.y)),null===H.map||!0===Z||!0===F){const he=3!==this.type?{minFilter:gi,magFilter:gi}:{};null!==H.map&&H.map.dispose(),H.map=new Hl(r.x,r.y,he),H.map.texture.name=V.name+".shadowMap",H.camera.updateProjectionMatrix()}n.setRenderTarget(H.map),n.clear();const le=H.getViewportCount();for(let he=0;he<le;he++){const Me=H.getViewport(he);o.set(s.x*Me.x,s.y*Me.y,s.x*Me.z,s.y*Me.w),Q.viewport(o),H.updateMatrices(V,he),i=H.getFrustum(),b(M,A,H.camera,V,this.type)}!0!==H.isPointLightShadow&&3===this.type&&v(H,A),H.needsUpdate=!1}g=this.type,m.needsUpdate=!1,n.setRenderTarget(U,w,R)}}function LY(n,e,t){const i=t.isWebGL2,a=new function r(){let B=!1;const ve=new En;let X=null;const _e=new En(0,0,0,0);return{setMask:function(Fe){X!==Fe&&!B&&(n.colorMask(Fe,Fe,Fe,Fe),X=Fe)},setLocked:function(Fe){B=Fe},setClear:function(Fe,Kt,wn,Rn,hi){!0===hi&&(Fe*=Rn,Kt*=Rn,wn*=Rn),ve.set(Fe,Kt,wn,Rn),!1===_e.equals(ve)&&(n.clearColor(Fe,Kt,wn,Rn),_e.copy(ve))},reset:function(){B=!1,X=null,_e.set(-1,0,0,0)}}},l=new function s(){let B=!1,ve=null,X=null,_e=null;return{setTest:function(Fe){Fe?De(n.DEPTH_TEST):Ze(n.DEPTH_TEST)},setMask:function(Fe){ve!==Fe&&!B&&(n.depthMask(Fe),ve=Fe)},setFunc:function(Fe){if(X!==Fe){switch(Fe){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}X=Fe}},setLocked:function(Fe){B=Fe},setClear:function(Fe){_e!==Fe&&(n.clearDepth(Fe),_e=Fe)},reset:function(){B=!1,ve=null,X=null,_e=null}}},c=new function o(){let B=!1,ve=null,X=null,_e=null,Fe=null,Kt=null,wn=null,Rn=null,hi=null;return{setTest:function(fn){B||(fn?De(n.STENCIL_TEST):Ze(n.STENCIL_TEST))},setMask:function(fn){ve!==fn&&!B&&(n.stencilMask(fn),ve=fn)},setFunc:function(fn,Vn,br){(X!==fn||_e!==Vn||Fe!==br)&&(n.stencilFunc(fn,Vn,br),X=fn,_e=Vn,Fe=br)},setOp:function(fn,Vn,br){(Kt!==fn||wn!==Vn||Rn!==br)&&(n.stencilOp(fn,Vn,br),Kt=fn,wn=Vn,Rn=br)},setLocked:function(fn){B=fn},setClear:function(fn){hi!==fn&&(n.clearStencil(fn),hi=fn)},reset:function(){B=!1,ve=null,X=null,_e=null,Fe=null,Kt=null,wn=null,Rn=null,hi=null}}},u=new WeakMap,d=new WeakMap;let h={},f={},p=new WeakMap,_=[],m=null,g=!1,v=null,y=null,b=null,E=null,S=null,M=null,A=null,U=new Re(0,0,0),w=0,R=!1,Q=null,Z=null,F=null,K=null,L=null;const V=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,$=0;const le=n.getParameter(n.VERSION);-1!==le.indexOf("WebGL")?($=parseFloat(/^WebGL (\d)/.exec(le)[1]),H=$>=1):-1!==le.indexOf("OpenGL ES")&&($=parseFloat(/^OpenGL ES (\d)/.exec(le)[1]),H=$>=2);let he=null,Me={};const Xe=n.getParameter(n.SCISSOR_BOX),z=n.getParameter(n.VIEWPORT),pe=(new En).fromArray(Xe),Se=(new En).fromArray(z);function Ne(B,ve,X,_e){const Fe=new Uint8Array(4),Kt=n.createTexture();n.bindTexture(B,Kt),n.texParameteri(B,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(B,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let wn=0;wn<X;wn++)!i||B!==n.TEXTURE_3D&&B!==n.TEXTURE_2D_ARRAY?n.texImage2D(ve+wn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Fe):n.texImage3D(ve,0,n.RGBA,1,1,_e,0,n.RGBA,n.UNSIGNED_BYTE,Fe);return Kt}const Oe={};function De(B){!0!==h[B]&&(n.enable(B),h[B]=!0)}function Ze(B){!1!==h[B]&&(n.disable(B),h[B]=!1)}Oe[n.TEXTURE_2D]=Ne(n.TEXTURE_2D,n.TEXTURE_2D,1),Oe[n.TEXTURE_CUBE_MAP]=Ne(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Oe[n.TEXTURE_2D_ARRAY]=Ne(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Oe[n.TEXTURE_3D]=Ne(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),De(n.DEPTH_TEST),l.setFunc(3),Be(!1),je(1),De(n.CULL_FACE),ue(0);const se={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};if(i)se[103]=n.MIN,se[104]=n.MAX;else{const B=e.get("EXT_blend_minmax");null!==B&&(se[103]=B.MIN_EXT,se[104]=B.MAX_EXT)}const be={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA,211:n.CONSTANT_COLOR,212:n.ONE_MINUS_CONSTANT_COLOR,213:n.CONSTANT_ALPHA,214:n.ONE_MINUS_CONSTANT_ALPHA};function ue(B,ve,X,_e,Fe,Kt,wn,Rn,hi,fn){if(0!==B){if(!1===g&&(De(n.BLEND),g=!0),5===B)Fe=Fe||ve,Kt=Kt||X,wn=wn||_e,(ve!==y||Fe!==S)&&(n.blendEquationSeparate(se[ve],se[Fe]),y=ve,S=Fe),(X!==b||_e!==E||Kt!==M||wn!==A)&&(n.blendFuncSeparate(be[X],be[_e],be[Kt],be[wn]),b=X,E=_e,M=Kt,A=wn),(!1===Rn.equals(U)||hi!==w)&&(n.blendColor(Rn.r,Rn.g,Rn.b,hi),U.copy(Rn),w=hi),v=B,R=!1;else if(B!==v||fn!==R){if((100!==y||100!==S)&&(n.blendEquation(n.FUNC_ADD),y=100,S=100),fn)switch(B){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",B)}else switch(B){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",B)}b=null,E=null,M=null,A=null,U.set(0,0,0),w=0,v=B,R=fn}}else!0===g&&(Ze(n.BLEND),g=!1)}function Be(B){Q!==B&&(n.frontFace(B?n.CW:n.CCW),Q=B)}function je(B){0!==B?(De(n.CULL_FACE),B!==Z&&n.cullFace(1===B?n.BACK:2===B?n.FRONT:n.FRONT_AND_BACK)):Ze(n.CULL_FACE),Z=B}function N(B,ve,X){B?(De(n.POLYGON_OFFSET_FILL),(K!==ve||L!==X)&&(n.polygonOffset(ve,X),K=ve,L=X)):Ze(n.POLYGON_OFFSET_FILL)}return{buffers:{color:a,depth:l,stencil:c},enable:De,disable:Ze,bindFramebuffer:function We(B,ve){return f[B]!==ve&&(n.bindFramebuffer(B,ve),f[B]=ve,i&&(B===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=ve),B===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=ve)),!0)},drawBuffers:function P(B,ve){let X=_,_e=!1;if(B){X=p.get(ve),void 0===X&&(X=[],p.set(ve,X));const Fe=B.textures;if(X.length!==Fe.length||X[0]!==n.COLOR_ATTACHMENT0){for(let Kt=0,wn=Fe.length;Kt<wn;Kt++)X[Kt]=n.COLOR_ATTACHMENT0+Kt;X.length=Fe.length,_e=!0}}else X[0]!==n.BACK&&(X[0]=n.BACK,_e=!0);if(_e)if(t.isWebGL2)n.drawBuffers(X);else{if(!0!==e.has("WEBGL_draw_buffers"))throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension");e.get("WEBGL_draw_buffers").drawBuffersWEBGL(X)}},useProgram:function xe(B){return m!==B&&(n.useProgram(B),m=B,!0)},setBlending:ue,setMaterial:function Ve(B,ve){2===B.side?Ze(n.CULL_FACE):De(n.CULL_FACE);let X=1===B.side;ve&&(X=!X),Be(X),1===B.blending&&!1===B.transparent?ue(0):ue(B.blending,B.blendEquation,B.blendSrc,B.blendDst,B.blendEquationAlpha,B.blendSrcAlpha,B.blendDstAlpha,B.blendColor,B.blendAlpha,B.premultipliedAlpha),l.setFunc(B.depthFunc),l.setTest(B.depthTest),l.setMask(B.depthWrite),a.setMask(B.colorWrite);const _e=B.stencilWrite;c.setTest(_e),_e&&(c.setMask(B.stencilWriteMask),c.setFunc(B.stencilFunc,B.stencilRef,B.stencilFuncMask),c.setOp(B.stencilFail,B.stencilZFail,B.stencilZPass)),N(B.polygonOffset,B.polygonOffsetFactor,B.polygonOffsetUnits),!0===B.alphaToCoverage?De(n.SAMPLE_ALPHA_TO_COVERAGE):Ze(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Be,setCullFace:je,setLineWidth:function Lt(B){B!==F&&(H&&n.lineWidth(B),F=B)},setPolygonOffset:N,setScissorTest:function x(B){B?De(n.SCISSOR_TEST):Ze(n.SCISSOR_TEST)},activeTexture:function te(B){void 0===B&&(B=n.TEXTURE0+V-1),he!==B&&(n.activeTexture(B),he=B)},bindTexture:function ie(B,ve,X){void 0===X&&(X=null===he?n.TEXTURE0+V-1:he);let _e=Me[X];void 0===_e&&(_e={type:void 0,texture:void 0},Me[X]=_e),(_e.type!==B||_e.texture!==ve)&&(he!==X&&(n.activeTexture(X),he=X),n.bindTexture(B,ve||Oe[B]),_e.type=B,_e.texture=ve)},unbindTexture:function me(){const B=Me[he];void 0!==B&&void 0!==B.type&&(n.bindTexture(B.type,null),B.type=void 0,B.texture=void 0)},compressedTexImage2D:function ge(){try{n.compressedTexImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},compressedTexImage3D:function _t(){try{n.compressedTexImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texImage2D:function jt(){try{n.texImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texImage3D:function rt(){try{n.texImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},updateUBOMapping:function I(B,ve){let X=d.get(ve);void 0===X&&(X=new WeakMap,d.set(ve,X));let _e=X.get(B);void 0===_e&&(_e=n.getUniformBlockIndex(ve,B.name),X.set(B,_e))},uniformBlockBinding:function ce(B,ve){const _e=d.get(ve).get(B);u.get(ve)!==_e&&(n.uniformBlockBinding(ve,_e,B.__bindingPointIndex),u.set(ve,_e))},texStorage2D:function we(){try{n.texStorage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texStorage3D:function di(){try{n.texStorage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texSubImage2D:function st(){try{n.texSubImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texSubImage3D:function Ee(){try{n.texSubImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},compressedTexSubImage2D:function Te(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},compressedTexSubImage3D:function yt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},scissor:function qe(B){!1===pe.equals(B)&&(n.scissor(B.x,B.y,B.z,B.w),pe.copy(B))},viewport:function et(B){!1===Se.equals(B)&&(n.viewport(B.x,B.y,B.z,B.w),Se.copy(B))},reset:function Ke(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),!0===i&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},he=null,Me={},f={},p=new WeakMap,_=[],m=null,g=!1,v=null,y=null,b=null,E=null,S=null,M=null,A=null,U=new Re(0,0,0),w=0,R=!1,Q=null,Z=null,F=null,K=null,L=null,pe.set(0,0,n.canvas.width,n.canvas.height),Se.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function FY(n,e,t,i,r,s,o){const a=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new ne,d=new WeakMap;let h;const f=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(N){}function _(N,x){return p?new OffscreenCanvas(N,x):Jh("canvas")}function m(N,x,te,ie){let me=1;const ge=Lt(N);if((ge.width>ie||ge.height>ie)&&(me=ie/Math.max(ge.width,ge.height)),me<1||!0===x){if("undefined"!=typeof HTMLImageElement&&N instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&N instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&N instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&N instanceof VideoFrame){const _t=x?Vg:Math.floor,st=_t(me*ge.width),Ee=_t(me*ge.height);void 0===h&&(h=_(st,Ee));const Te=te?_(st,Ee):h;return Te.width=st,Te.height=Ee,Te.getContext("2d").drawImage(N,0,0,st,Ee),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ge.width+"x"+ge.height+") to ("+st+"x"+Ee+")."),Te}return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ge.width+"x"+ge.height+")."),N}return N}function g(N){const x=Lt(N);return Hb(x.width)&&Hb(x.height)}function y(N,x){return N.generateMipmaps&&x&&N.minFilter!==gi&&N.minFilter!==Wn}function b(N){n.generateMipmap(N)}function E(N,x,te,ie,me=!1){if(!1===a)return x;if(null!==N){if(void 0!==n[N])return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let ge=x;if(x===n.RED&&(te===n.FLOAT&&(ge=n.R32F),te===n.HALF_FLOAT&&(ge=n.R16F),te===n.UNSIGNED_BYTE&&(ge=n.R8)),x===n.RED_INTEGER&&(te===n.UNSIGNED_BYTE&&(ge=n.R8UI),te===n.UNSIGNED_SHORT&&(ge=n.R16UI),te===n.UNSIGNED_INT&&(ge=n.R32UI),te===n.BYTE&&(ge=n.R8I),te===n.SHORT&&(ge=n.R16I),te===n.INT&&(ge=n.R32I)),x===n.RG&&(te===n.FLOAT&&(ge=n.RG32F),te===n.HALF_FLOAT&&(ge=n.RG16F),te===n.UNSIGNED_BYTE&&(ge=n.RG8)),x===n.RG_INTEGER&&(te===n.UNSIGNED_BYTE&&(ge=n.RG8UI),te===n.UNSIGNED_SHORT&&(ge=n.RG16UI),te===n.UNSIGNED_INT&&(ge=n.RG32UI),te===n.BYTE&&(ge=n.RG8I),te===n.SHORT&&(ge=n.RG16I),te===n.INT&&(ge=n.RG32I)),x===n.RGBA){const _t=me?Lg:yn.getTransfer(ie);te===n.FLOAT&&(ge=n.RGBA32F),te===n.HALF_FLOAT&&(ge=n.RGBA16F),te===n.UNSIGNED_BYTE&&(ge=_t===Un?n.SRGB8_ALPHA8:n.RGBA8),te===n.UNSIGNED_SHORT_4_4_4_4&&(ge=n.RGBA4),te===n.UNSIGNED_SHORT_5_5_5_1&&(ge=n.RGB5_A1)}return(ge===n.R16F||ge===n.R32F||ge===n.RG16F||ge===n.RG32F||ge===n.RGBA16F||ge===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ge}function S(N,x,te){return!0===y(N,te)||N.isFramebufferTexture&&N.minFilter!==gi&&N.minFilter!==Wn?Math.log2(Math.max(x.width,x.height))+1:void 0!==N.mipmaps&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?x.mipmaps.length:1}function M(N){return N===gi||1004===N||N===Fl?n.NEAREST:n.LINEAR}function A(N){const x=N.target;x.removeEventListener("dispose",A),function w(N){const x=i.get(N);if(void 0===x.__webglInit)return;const te=N.source,ie=f.get(te);if(ie){const me=ie[x.__cacheKey];me.usedTimes--,0===me.usedTimes&&R(N),0===Object.keys(ie).length&&f.delete(te)}i.remove(N)}(x),x.isVideoTexture&&d.delete(x)}function U(N){const x=N.target;x.removeEventListener("dispose",U),function Q(N){const x=i.get(N);if(N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let ie=0;ie<6;ie++){if(Array.isArray(x.__webglFramebuffer[ie]))for(let me=0;me<x.__webglFramebuffer[ie].length;me++)n.deleteFramebuffer(x.__webglFramebuffer[ie][me]);else n.deleteFramebuffer(x.__webglFramebuffer[ie]);x.__webglDepthbuffer&&n.deleteRenderbuffer(x.__webglDepthbuffer[ie])}else{if(Array.isArray(x.__webglFramebuffer))for(let ie=0;ie<x.__webglFramebuffer.length;ie++)n.deleteFramebuffer(x.__webglFramebuffer[ie]);else n.deleteFramebuffer(x.__webglFramebuffer);if(x.__webglDepthbuffer&&n.deleteRenderbuffer(x.__webglDepthbuffer),x.__webglMultisampledFramebuffer&&n.deleteFramebuffer(x.__webglMultisampledFramebuffer),x.__webglColorRenderbuffer)for(let ie=0;ie<x.__webglColorRenderbuffer.length;ie++)x.__webglColorRenderbuffer[ie]&&n.deleteRenderbuffer(x.__webglColorRenderbuffer[ie]);x.__webglDepthRenderbuffer&&n.deleteRenderbuffer(x.__webglDepthRenderbuffer)}const te=N.textures;for(let ie=0,me=te.length;ie<me;ie++){const ge=i.get(te[ie]);ge.__webglTexture&&(n.deleteTexture(ge.__webglTexture),o.memory.textures--),i.remove(te[ie])}i.remove(N)}(x)}function R(N){const x=i.get(N);n.deleteTexture(x.__webglTexture),delete f.get(N.source)[x.__cacheKey],o.memory.textures--}let Z=0;function V(N,x){const te=i.get(N);if(N.isVideoTexture&&function Be(N){const x=o.render.frame;d.get(N)!==x&&(d.set(N,x),N.update())}(N),!1===N.isRenderTargetTexture&&N.version>0&&te.__version!==N.version){const ie=N.image;if(null===ie)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ie.complete)return void Se(te,N,x);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,te.__webglTexture,n.TEXTURE0+x)}const he={[Ll]:n.REPEAT,[pr]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},Me={[gi]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,[Fl]:n.NEAREST_MIPMAP_LINEAR,[Wn]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[io]:n.LINEAR_MIPMAP_LINEAR},Xe={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function z(N,x,te){if(x.type===As&&!1===e.has("OES_texture_float_linear")&&(x.magFilter===Wn||1007===x.magFilter||x.magFilter===Fl||x.magFilter===io||x.minFilter===Wn||1007===x.minFilter||x.minFilter===Fl||x.minFilter===io)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),te?(n.texParameteri(N,n.TEXTURE_WRAP_S,he[x.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,he[x.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,he[x.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,Me[x.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,Me[x.minFilter])):(n.texParameteri(N,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(N,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(x.wrapS!==pr||x.wrapT!==pr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(N,n.TEXTURE_MAG_FILTER,M(x.magFilter)),n.texParameteri(N,n.TEXTURE_MIN_FILTER,M(x.minFilter)),x.minFilter!==gi&&x.minFilter!==Wn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),x.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,Xe[x.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(x.magFilter===gi||x.minFilter!==Fl&&x.minFilter!==io||x.type===As&&!1===e.has("OES_texture_float_linear")||!1===a&&x.type===Xh&&!1===e.has("OES_texture_half_float_linear"))return;if(x.anisotropy>1||i.get(x).__currentAnisotropy){const ie=e.get("EXT_texture_filter_anisotropic");n.texParameterf(N,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(x.anisotropy,r.getMaxAnisotropy())),i.get(x).__currentAnisotropy=x.anisotropy}}}function pe(N,x){let te=!1;void 0===N.__webglInit&&(N.__webglInit=!0,x.addEventListener("dispose",A));const ie=x.source;let me=f.get(ie);void 0===me&&(me={},f.set(ie,me));const ge=function L(N){const x=[];return x.push(N.wrapS),x.push(N.wrapT),x.push(N.wrapR||0),x.push(N.magFilter),x.push(N.minFilter),x.push(N.anisotropy),x.push(N.internalFormat),x.push(N.format),x.push(N.type),x.push(N.generateMipmaps),x.push(N.premultiplyAlpha),x.push(N.flipY),x.push(N.unpackAlignment),x.push(N.colorSpace),x.join()}(x);if(ge!==N.__cacheKey){void 0===me[ge]&&(me[ge]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,te=!0),me[ge].usedTimes++;const _t=me[N.__cacheKey];void 0!==_t&&(me[N.__cacheKey].usedTimes--,0===_t.usedTimes&&R(x)),N.__cacheKey=ge,N.__webglTexture=me[ge].texture}return te}function Se(N,x,te){let ie=n.TEXTURE_2D;(x.isDataArrayTexture||x.isCompressedArrayTexture)&&(ie=n.TEXTURE_2D_ARRAY),x.isData3DTexture&&(ie=n.TEXTURE_3D);const me=pe(N,x),ge=x.source;t.bindTexture(ie,N.__webglTexture,n.TEXTURE0+te);const _t=i.get(ge);if(ge.version!==_t.__version||!0===me){t.activeTexture(n.TEXTURE0+te);const st=yn.getPrimaries(yn.workingColorSpace),Ee=""===x.colorSpace?null:yn.getPrimaries(x.colorSpace),Te=""===x.colorSpace||st===Ee?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,x.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,x.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Te);const yt=function v(N){return!a&&(N.wrapS!==pr||N.wrapT!==pr||N.minFilter!==gi&&N.minFilter!==Wn)}(x)&&!1===g(x.image);let we=m(x.image,yt,!1,r.maxTextureSize);we=je(x,we);const di=g(we)||a,jt=s.convert(x.format,x.colorSpace);let et,rt=s.convert(x.type),qe=E(x.internalFormat,jt,rt,x.colorSpace,x.isVideoTexture);z(ie,x,di);const I=x.mipmaps,ce=a&&!0!==x.isVideoTexture&&36196!==qe,Ke=void 0===_t.__version||!0===me,B=ge.dataReady,ve=S(x,we,di);if(x.isDepthTexture)qe=n.DEPTH_COMPONENT,a?qe=x.type===As?n.DEPTH_COMPONENT32F:x.type===ka?n.DEPTH_COMPONENT24:x.type===kl?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT16:x.type===As&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),x.format===Bl&&qe===n.DEPTH_COMPONENT&&1012!==x.type&&x.type!==ka&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),x.type=ka,rt=s.convert(x.type)),x.format===Au&&qe===n.DEPTH_COMPONENT&&(qe=n.DEPTH_STENCIL,x.type!==kl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),x.type=kl,rt=s.convert(x.type))),Ke&&(ce?t.texStorage2D(n.TEXTURE_2D,1,qe,we.width,we.height):t.texImage2D(n.TEXTURE_2D,0,qe,we.width,we.height,0,jt,rt,null));else if(x.isDataTexture)if(I.length>0&&di){ce&&Ke&&t.texStorage2D(n.TEXTURE_2D,ve,qe,I[0].width,I[0].height);for(let X=0,_e=I.length;X<_e;X++)et=I[X],ce?B&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,et.width,et.height,jt,rt,et.data):t.texImage2D(n.TEXTURE_2D,X,qe,et.width,et.height,0,jt,rt,et.data);x.generateMipmaps=!1}else ce?(Ke&&t.texStorage2D(n.TEXTURE_2D,ve,qe,we.width,we.height),B&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,we.width,we.height,jt,rt,we.data)):t.texImage2D(n.TEXTURE_2D,0,qe,we.width,we.height,0,jt,rt,we.data);else if(x.isCompressedTexture)if(x.isCompressedArrayTexture){ce&&Ke&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ve,qe,I[0].width,I[0].height,we.depth);for(let X=0,_e=I.length;X<_e;X++)et=I[X],x.format!==is?null!==jt?ce?B&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,0,et.width,et.height,we.depth,jt,et.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,X,qe,et.width,et.height,we.depth,0,et.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ce?B&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,0,et.width,et.height,we.depth,jt,rt,et.data):t.texImage3D(n.TEXTURE_2D_ARRAY,X,qe,et.width,et.height,we.depth,0,jt,rt,et.data)}else{ce&&Ke&&t.texStorage2D(n.TEXTURE_2D,ve,qe,I[0].width,I[0].height);for(let X=0,_e=I.length;X<_e;X++)et=I[X],x.format!==is?null!==jt?ce?B&&t.compressedTexSubImage2D(n.TEXTURE_2D,X,0,0,et.width,et.height,jt,et.data):t.compressedTexImage2D(n.TEXTURE_2D,X,qe,et.width,et.height,0,et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ce?B&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,et.width,et.height,jt,rt,et.data):t.texImage2D(n.TEXTURE_2D,X,qe,et.width,et.height,0,jt,rt,et.data)}else if(x.isDataArrayTexture)ce?(Ke&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ve,qe,we.width,we.height,we.depth),B&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,we.width,we.height,we.depth,jt,rt,we.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,qe,we.width,we.height,we.depth,0,jt,rt,we.data);else if(x.isData3DTexture)ce?(Ke&&t.texStorage3D(n.TEXTURE_3D,ve,qe,we.width,we.height,we.depth),B&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,we.width,we.height,we.depth,jt,rt,we.data)):t.texImage3D(n.TEXTURE_3D,0,qe,we.width,we.height,we.depth,0,jt,rt,we.data);else if(x.isFramebufferTexture){if(Ke)if(ce)t.texStorage2D(n.TEXTURE_2D,ve,qe,we.width,we.height);else{let X=we.width,_e=we.height;for(let Fe=0;Fe<ve;Fe++)t.texImage2D(n.TEXTURE_2D,Fe,qe,X,_e,0,jt,rt,null),X>>=1,_e>>=1}}else if(I.length>0&&di){if(ce&&Ke){const X=Lt(I[0]);t.texStorage2D(n.TEXTURE_2D,ve,qe,X.width,X.height)}for(let X=0,_e=I.length;X<_e;X++)et=I[X],ce?B&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,jt,rt,et):t.texImage2D(n.TEXTURE_2D,X,qe,jt,rt,et);x.generateMipmaps=!1}else if(ce){if(Ke){const X=Lt(we);t.texStorage2D(n.TEXTURE_2D,ve,qe,X.width,X.height)}B&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,jt,rt,we)}else t.texImage2D(n.TEXTURE_2D,0,qe,jt,rt,we);y(x,di)&&b(ie),_t.__version=ge.version,x.onUpdate&&x.onUpdate(x)}N.__version=x.version}function Oe(N,x,te,ie,me,ge){const _t=s.convert(te.format,te.colorSpace),st=s.convert(te.type),Ee=E(te.internalFormat,_t,st,te.colorSpace);if(!i.get(x).__hasExternalTextures){const yt=Math.max(1,x.width>>ge),we=Math.max(1,x.height>>ge);me===n.TEXTURE_3D||me===n.TEXTURE_2D_ARRAY?t.texImage3D(me,ge,Ee,yt,we,x.depth,0,_t,st,null):t.texImage2D(me,ge,Ee,yt,we,0,_t,st,null)}t.bindFramebuffer(n.FRAMEBUFFER,N),Ve(x)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ie,me,i.get(te).__webglTexture,0,ue(x)):(me===n.TEXTURE_2D||me>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&me<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ie,me,i.get(te).__webglTexture,ge),t.bindFramebuffer(n.FRAMEBUFFER,null)}function De(N,x,te){if(n.bindRenderbuffer(n.RENDERBUFFER,N),x.depthBuffer&&!x.stencilBuffer){let ie=!0===a?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(te||Ve(x)){const me=x.depthTexture;me&&me.isDepthTexture&&(me.type===As?ie=n.DEPTH_COMPONENT32F:me.type===ka&&(ie=n.DEPTH_COMPONENT24));const ge=ue(x);Ve(x)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ge,ie,x.width,x.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ge,ie,x.width,x.height)}else n.renderbufferStorage(n.RENDERBUFFER,ie,x.width,x.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,N)}else if(x.depthBuffer&&x.stencilBuffer){const ie=ue(x);te&&!1===Ve(x)?n.renderbufferStorageMultisample(n.RENDERBUFFER,ie,n.DEPTH24_STENCIL8,x.width,x.height):Ve(x)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ie,n.DEPTH24_STENCIL8,x.width,x.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,x.width,x.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,N)}else{const ie=x.textures;for(let me=0;me<ie.length;me++){const ge=ie[me],_t=s.convert(ge.format,ge.colorSpace),st=s.convert(ge.type),Ee=E(ge.internalFormat,_t,st,ge.colorSpace),Te=ue(x);te&&!1===Ve(x)?n.renderbufferStorageMultisample(n.RENDERBUFFER,Te,Ee,x.width,x.height):Ve(x)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Te,Ee,x.width,x.height):n.renderbufferStorage(n.RENDERBUFFER,Ee,x.width,x.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function We(N){const x=i.get(N),te=!0===N.isWebGLCubeRenderTarget;if(N.depthTexture&&!x.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");!function Ze(N,x){if(x&&x.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!x.depthTexture||!x.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(x.depthTexture).__webglTexture||x.depthTexture.image.width!==x.width||x.depthTexture.image.height!==x.height)&&(x.depthTexture.image.width=x.width,x.depthTexture.image.height=x.height,x.depthTexture.needsUpdate=!0),V(x.depthTexture,0);const ie=i.get(x.depthTexture).__webglTexture,me=ue(x);if(x.depthTexture.format===Bl)Ve(x)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ie,0,me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ie,0);else{if(x.depthTexture.format!==Au)throw new Error("Unknown depthTexture format");Ve(x)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ie,0,me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ie,0)}}(x.__webglFramebuffer,N)}else if(te){x.__webglDepthbuffer=[];for(let ie=0;ie<6;ie++)t.bindFramebuffer(n.FRAMEBUFFER,x.__webglFramebuffer[ie]),x.__webglDepthbuffer[ie]=n.createRenderbuffer(),De(x.__webglDepthbuffer[ie],N,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,x.__webglFramebuffer),x.__webglDepthbuffer=n.createRenderbuffer(),De(x.__webglDepthbuffer,N,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(N){return Math.min(r.maxSamples,N.samples)}function Ve(N){const x=i.get(N);return a&&N.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==x.__useRenderToTexture}function je(N,x){const te=N.colorSpace,ie=N.format,me=N.type;return!0===N.isCompressedTexture||!0===N.isVideoTexture||1035===N.format||te!==rr&&""!==te&&(yn.getTransfer(te)===Un?!1===a?!0===e.has("EXT_sRGB")&&ie===is?(N.format=1035,N.minFilter=Wn,N.generateMipmaps=!1):x=PN.sRGBToLinear(x):(ie!==is||me!==Fa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",te)),x}function Lt(N){return"undefined"!=typeof HTMLImageElement&&N instanceof HTMLImageElement?(u.width=N.naturalWidth||N.width,u.height=N.naturalHeight||N.height):"undefined"!=typeof VideoFrame&&N instanceof VideoFrame?(u.width=N.displayWidth,u.height=N.displayHeight):(u.width=N.width,u.height=N.height),u}this.allocateTextureUnit=function K(){const N=Z;return N>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+r.maxTextures),Z+=1,N},this.resetTextureUnits=function F(){Z=0},this.setTexture2D=V,this.setTexture2DArray=function H(N,x){const te=i.get(N);N.version>0&&te.__version!==N.version?Se(te,N,x):t.bindTexture(n.TEXTURE_2D_ARRAY,te.__webglTexture,n.TEXTURE0+x)},this.setTexture3D=function $(N,x){const te=i.get(N);N.version>0&&te.__version!==N.version?Se(te,N,x):t.bindTexture(n.TEXTURE_3D,te.__webglTexture,n.TEXTURE0+x)},this.setTextureCube=function le(N,x){const te=i.get(N);N.version>0&&te.__version!==N.version?function Ne(N,x,te){if(6!==x.image.length)return;const ie=pe(N,x),me=x.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+te);const ge=i.get(me);if(me.version!==ge.__version||!0===ie){t.activeTexture(n.TEXTURE0+te);const _t=yn.getPrimaries(yn.workingColorSpace),st=""===x.colorSpace?null:yn.getPrimaries(x.colorSpace),Ee=""===x.colorSpace||_t===st?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,x.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,x.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ee);const Te=x.isCompressedTexture||x.image[0].isCompressedTexture,yt=x.image[0]&&x.image[0].isDataTexture,we=[];for(let X=0;X<6;X++)we[X]=Te||yt?yt?x.image[X].image:x.image[X]:m(x.image[X],!1,!0,r.maxCubemapSize),we[X]=je(x,we[X]);const di=we[0],jt=g(di)||a,rt=s.convert(x.format,x.colorSpace),qe=s.convert(x.type),et=E(x.internalFormat,rt,qe,x.colorSpace),I=a&&!0!==x.isVideoTexture,ce=void 0===ge.__version||!0===ie,Ke=me.dataReady;let ve,B=S(x,di,jt);if(z(n.TEXTURE_CUBE_MAP,x,jt),Te){I&&ce&&t.texStorage2D(n.TEXTURE_CUBE_MAP,B,et,di.width,di.height);for(let X=0;X<6;X++){ve=we[X].mipmaps;for(let _e=0;_e<ve.length;_e++){const Fe=ve[_e];x.format!==is?null!==rt?I?Ke&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,_e,0,0,Fe.width,Fe.height,rt,Fe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,_e,et,Fe.width,Fe.height,0,Fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):I?Ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,_e,0,0,Fe.width,Fe.height,rt,qe,Fe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,_e,et,Fe.width,Fe.height,0,rt,qe,Fe.data)}}}else{if(ve=x.mipmaps,I&&ce){ve.length>0&&B++;const X=Lt(we[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,B,et,X.width,X.height)}for(let X=0;X<6;X++)if(yt){I?Ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,0,0,we[X].width,we[X].height,rt,qe,we[X].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,et,we[X].width,we[X].height,0,rt,qe,we[X].data);for(let _e=0;_e<ve.length;_e++){const Kt=ve[_e].image[X].image;I?Ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,_e+1,0,0,Kt.width,Kt.height,rt,qe,Kt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,_e+1,et,Kt.width,Kt.height,0,rt,qe,Kt.data)}}else{I?Ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,0,0,rt,qe,we[X]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,et,rt,qe,we[X]);for(let _e=0;_e<ve.length;_e++){const Fe=ve[_e];I?Ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,_e+1,0,0,rt,qe,Fe.image[X]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,_e+1,et,rt,qe,Fe.image[X])}}}y(x,jt)&&b(n.TEXTURE_CUBE_MAP),ge.__version=me.version,x.onUpdate&&x.onUpdate(x)}N.__version=x.version}(te,N,x):t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+x)},this.rebindTextures=function P(N,x,te){const ie=i.get(N);void 0!==x&&Oe(ie.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==te&&We(N)},this.setupRenderTarget=function xe(N){const x=N.texture,te=i.get(N),ie=i.get(x);N.addEventListener("dispose",U);const me=N.textures,ge=!0===N.isWebGLCubeRenderTarget,_t=me.length>1,st=g(N)||a;if(_t||(void 0===ie.__webglTexture&&(ie.__webglTexture=n.createTexture()),ie.__version=x.version,o.memory.textures++),ge){te.__webglFramebuffer=[];for(let Ee=0;Ee<6;Ee++)if(a&&x.mipmaps&&x.mipmaps.length>0){te.__webglFramebuffer[Ee]=[];for(let Te=0;Te<x.mipmaps.length;Te++)te.__webglFramebuffer[Ee][Te]=n.createFramebuffer()}else te.__webglFramebuffer[Ee]=n.createFramebuffer()}else{if(a&&x.mipmaps&&x.mipmaps.length>0){te.__webglFramebuffer=[];for(let Ee=0;Ee<x.mipmaps.length;Ee++)te.__webglFramebuffer[Ee]=n.createFramebuffer()}else te.__webglFramebuffer=n.createFramebuffer();if(_t)if(r.drawBuffers)for(let Ee=0,Te=me.length;Ee<Te;Ee++){const yt=i.get(me[Ee]);void 0===yt.__webglTexture&&(yt.__webglTexture=n.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&N.samples>0&&!1===Ve(N)){te.__webglMultisampledFramebuffer=n.createFramebuffer(),te.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let Ee=0;Ee<me.length;Ee++){const Te=me[Ee];te.__webglColorRenderbuffer[Ee]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,te.__webglColorRenderbuffer[Ee]);const yt=s.convert(Te.format,Te.colorSpace),we=s.convert(Te.type),di=E(Te.internalFormat,yt,we,Te.colorSpace,!0===N.isXRRenderTarget),jt=ue(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,jt,di,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.RENDERBUFFER,te.__webglColorRenderbuffer[Ee])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(te.__webglDepthRenderbuffer=n.createRenderbuffer(),De(te.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ge){t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture),z(n.TEXTURE_CUBE_MAP,x,st);for(let Ee=0;Ee<6;Ee++)if(a&&x.mipmaps&&x.mipmaps.length>0)for(let Te=0;Te<x.mipmaps.length;Te++)Oe(te.__webglFramebuffer[Ee][Te],N,x,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,Te);else Oe(te.__webglFramebuffer[Ee],N,x,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0);y(x,st)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(_t){for(let Ee=0,Te=me.length;Ee<Te;Ee++){const yt=me[Ee],we=i.get(yt);t.bindTexture(n.TEXTURE_2D,we.__webglTexture),z(n.TEXTURE_2D,yt,st),Oe(te.__webglFramebuffer,N,yt,n.COLOR_ATTACHMENT0+Ee,n.TEXTURE_2D,0),y(yt,st)&&b(n.TEXTURE_2D)}t.unbindTexture()}else{let Ee=n.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(a?Ee=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ee,ie.__webglTexture),z(Ee,x,st),a&&x.mipmaps&&x.mipmaps.length>0)for(let Te=0;Te<x.mipmaps.length;Te++)Oe(te.__webglFramebuffer[Te],N,x,n.COLOR_ATTACHMENT0,Ee,Te);else Oe(te.__webglFramebuffer,N,x,n.COLOR_ATTACHMENT0,Ee,0);y(x,st)&&b(Ee),t.unbindTexture()}N.depthBuffer&&We(N)},this.updateRenderTargetMipmap=function se(N){const x=g(N)||a,te=N.textures;for(let ie=0,me=te.length;ie<me;ie++){const ge=te[ie];if(y(ge,x)){const _t=N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,st=i.get(ge).__webglTexture;t.bindTexture(_t,st),b(_t),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function be(N){if(a&&N.samples>0&&!1===Ve(N)){const x=N.textures,te=N.width,ie=N.height;let me=n.COLOR_BUFFER_BIT;const ge=[],_t=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,st=i.get(N),Ee=x.length>1;if(Ee)for(let Te=0;Te<x.length;Te++)t.bindFramebuffer(n.FRAMEBUFFER,st.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,st.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,st.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,st.__webglFramebuffer);for(let Te=0;Te<x.length;Te++){ge.push(n.COLOR_ATTACHMENT0+Te),N.depthBuffer&&ge.push(_t);const yt=void 0!==st.__ignoreDepthValues&&st.__ignoreDepthValues;if(!1===yt&&(N.depthBuffer&&(me|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&(me|=n.STENCIL_BUFFER_BIT)),Ee&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,st.__webglColorRenderbuffer[Te]),!0===yt&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[_t]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[_t])),Ee){const we=i.get(x[Te]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,we,0)}n.blitFramebuffer(0,0,te,ie,0,0,te,ie,me,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ge)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ee)for(let Te=0;Te<x.length;Te++){t.bindFramebuffer(n.FRAMEBUFFER,st.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.RENDERBUFFER,st.__webglColorRenderbuffer[Te]);const yt=i.get(x[Te]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,st.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.TEXTURE_2D,yt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,st.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=We,this.setupFrameBufferTexture=Oe,this.useMultisampledRTT=Ve}function kY(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=""){let a;const l=yn.getTransfer(o);if(s===Fa)return n.UNSIGNED_BYTE;if(1017===s)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===s)return n.UNSIGNED_SHORT_5_5_5_1;if(1010===s)return n.BYTE;if(1011===s)return n.SHORT;if(1012===s)return n.UNSIGNED_SHORT;if(1013===s)return n.INT;if(s===ka)return n.UNSIGNED_INT;if(s===As)return n.FLOAT;if(s===Xh)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return n.ALPHA;if(s===is)return n.RGBA;if(1024===s)return n.LUMINANCE;if(1025===s)return n.LUMINANCE_ALPHA;if(s===Bl)return n.DEPTH_COMPONENT;if(s===Au)return n.DEPTH_STENCIL;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===s)return n.RED;if(1029===s)return n.RED_INTEGER;if(1030===s)return n.RG;if(1031===s)return n.RG_INTEGER;if(1033===s)return n.RGBA_INTEGER;if(33776===s||33777===s||33778===s||33779===s)if(l===Un){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return l===Un?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return l===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s||36494===s||36495===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return l===Un?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===s)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===s)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===s||36284===s||36285===s||36286===s){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===s)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===s)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===s)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===s)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===kl?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class BY extends Xi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class qa extends $i{constructor(){super(),this.isGroup=!0,this.type="Group"}}const UY={type:"move"};class _1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new qa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new qa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new T,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new T),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new qa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new T,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new T),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const m=t.getJointPose(_,i),g=this._getHandJoint(c,_);null!==m&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=m.radius),g.visible=null!==m}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(UY)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new qa;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class zY{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const r=new Rs;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}render(e,t){if(null!==this.texture){if(null===this.mesh){const i=t.cameras[0].viewport,r=new aa({extensions:{fragDepth:!0},vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new qi(new rf(20,20),r)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class GY extends Ua{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,h=null,f=null,p=null;const _=new zY,m=t.getContextAttributes();let g=null,v=null;const y=[],b=[],E=new ne;let S=null;const M=new Xi;M.layers.enable(1),M.viewport=new En;const A=new Xi;A.layers.enable(2),A.viewport=new En;const U=[M,A],w=new BY;w.layers.enable(1),w.layers.enable(2);let R=null,Q=null;function Z(z){const pe=b.indexOf(z.inputSource);if(-1===pe)return;const Se=y[pe];void 0!==Se&&(Se.update(z.inputSource,z.frame,c||o),Se.dispatchEvent({type:z.type,data:z.inputSource}))}function F(){r.removeEventListener("select",Z),r.removeEventListener("selectstart",Z),r.removeEventListener("selectend",Z),r.removeEventListener("squeeze",Z),r.removeEventListener("squeezestart",Z),r.removeEventListener("squeezeend",Z),r.removeEventListener("end",F),r.removeEventListener("inputsourceschange",K);for(let z=0;z<y.length;z++){const pe=b[z];null!==pe&&(b[z]=null,y[z].disconnect(pe))}R=null,Q=null,_.reset(),e.setRenderTarget(g),f=null,h=null,d=null,r=null,v=null,Xe.stop(),i.isPresenting=!1,e.setPixelRatio(S),e.setSize(E.width,E.height,!1),i.dispatchEvent({type:"sessionend"})}function K(z){for(let pe=0;pe<z.removed.length;pe++){const Se=z.removed[pe],Ne=b.indexOf(Se);Ne>=0&&(b[Ne]=null,y[Ne].disconnect(Se))}for(let pe=0;pe<z.added.length;pe++){const Se=z.added[pe];let Ne=b.indexOf(Se);if(-1===Ne){for(let De=0;De<y.length;De++){if(De>=b.length){b.push(Se),Ne=De;break}if(null===b[De]){b[De]=Se,Ne=De;break}}if(-1===Ne)break}const Oe=y[Ne];Oe&&Oe.connect(Se)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let pe=y[z];return void 0===pe&&(pe=new _1,y[z]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(z){let pe=y[z];return void 0===pe&&(pe=new _1,y[z]=pe),pe.getGripSpace()},this.getHand=function(z){let pe=y[z];return void 0===pe&&(pe=new _1,y[z]=pe),pe.getHandSpace()},this.setFramebufferScaleFactor=function(z){s=z,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){a=z,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(z){c=z},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var z=function Qj(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){PR(s,i,r,o,a,"next",l)}function a(l){PR(s,i,r,o,a,"throw",l)}o(void 0)})}}(function*(pe){if(r=pe,null!==r){if(g=e.getRenderTarget(),r.addEventListener("select",Z),r.addEventListener("selectstart",Z),r.addEventListener("selectend",Z),r.addEventListener("squeeze",Z),r.addEventListener("squeezestart",Z),r.addEventListener("squeezeend",Z),r.addEventListener("end",F),r.addEventListener("inputsourceschange",K),!0!==m.xrCompatible&&(yield t.makeXRCompatible()),S=e.getPixelRatio(),e.getSize(E),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)f=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),v=new Hl(f.framebufferWidth,f.framebufferHeight,{format:is,type:Fa,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil});else{let Se=null,Ne=null,Oe=null;m.depth&&(Oe=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Se=m.stencil?Au:Bl,Ne=m.stencil?kl:ka);const De={colorFormat:t.RGBA8,depthFormat:Oe,scaleFactor:s};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(De),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new Hl(h.textureWidth,h.textureHeight,{format:is,type:Fa,depthTexture:new lI(h.textureWidth,h.textureHeight,Ne,void 0,void 0,void 0,void 0,void 0,void 0,Se),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0}),e.properties.get(v).__ignoreDepthValues=h.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),Xe.setContext(r),Xe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(pe){return z.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const L=new T,V=new T;function $(z,pe){null===pe?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(pe.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(null===r)return;null!==_.texture&&(z.near=_.depthNear,z.far=_.depthFar),w.near=A.near=M.near=z.near,w.far=A.far=M.far=z.far,(R!==w.near||Q!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),R=w.near,Q=w.far,M.near=R,M.far=Q,A.near=R,A.far=Q,M.updateProjectionMatrix(),A.updateProjectionMatrix(),z.updateProjectionMatrix());const pe=z.parent,Se=w.cameras;$(w,pe);for(let Ne=0;Ne<Se.length;Ne++)$(Se[Ne],pe);2===Se.length?function H(z,pe,Se){L.setFromMatrixPosition(pe.matrixWorld),V.setFromMatrixPosition(Se.matrixWorld);const Ne=L.distanceTo(V),Oe=pe.projectionMatrix.elements,De=Se.projectionMatrix.elements,Ze=Oe[14]/(Oe[10]-1),We=Oe[14]/(Oe[10]+1),P=(Oe[9]+1)/Oe[5],xe=(Oe[9]-1)/Oe[5],se=(Oe[8]-1)/Oe[0],be=(De[8]+1)/De[0],ue=Ze*se,Ve=Ze*be,Be=Ne/(-se+be),je=Be*-se;pe.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(je),z.translateZ(Be),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();const Lt=Ze+Be,N=We+Be;z.projectionMatrix.makePerspective(ue-je,Ve+(Ne-je),P*We/N*Lt,xe*We/N*Lt,Lt,N),z.projectionMatrixInverse.copy(z.projectionMatrix).invert()}(w,M,A):w.projectionMatrix.copy(M.projectionMatrix),function le(z,pe,Se){null===Se?z.matrix.copy(pe.matrixWorld):(z.matrix.copy(Se.matrixWorld),z.matrix.invert(),z.matrix.multiply(pe.matrixWorld)),z.matrix.decompose(z.position,z.quaternion,z.scale),z.updateMatrixWorld(!0),z.projectionMatrix.copy(pe.projectionMatrix),z.projectionMatrixInverse.copy(pe.projectionMatrixInverse),z.isPerspectiveCamera&&(z.fov=2*Ou*Math.atan(1/z.projectionMatrix.elements[5]),z.zoom=1)}(z,w,pe)},this.getCamera=function(){return w},this.getFoveation=function(){if(null!==h||null!==f)return l},this.setFoveation=function(z){l=z,null!==h&&(h.fixedFoveation=z),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=z)},this.hasDepthSensing=function(){return null!==_.texture};let he=null;const Xe=new eI;Xe.setAnimationLoop(function Me(z,pe){if(u=pe.getViewerPose(c||o),p=pe,null!==u){const Se=u.views;null!==f&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let Ne=!1;Se.length!==w.cameras.length&&(w.cameras.length=0,Ne=!0);for(let De=0;De<Se.length;De++){const Ze=Se[De];let We=null;if(null!==f)We=f.getViewport(Ze);else{const xe=d.getViewSubImage(h,Ze);We=xe.viewport,0===De&&(e.setRenderTargetTextures(v,xe.colorTexture,h.ignoreDepthValues?void 0:xe.depthStencilTexture),e.setRenderTarget(v))}let P=U[De];void 0===P&&(P=new Xi,P.layers.enable(De),P.viewport=new En,U[De]=P),P.matrix.fromArray(Ze.transform.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale),P.projectionMatrix.fromArray(Ze.projectionMatrix),P.projectionMatrixInverse.copy(P.projectionMatrix).invert(),P.viewport.set(We.x,We.y,We.width,We.height),0===De&&(w.matrix.copy(P.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),!0===Ne&&w.cameras.push(P)}const Oe=r.enabledFeatures;if(Oe&&Oe.includes("depth-sensing")){const De=d.getDepthInformation(Se[0]);De&&De.isValid&&De.texture&&_.init(e,De,r.renderState)}}for(let Se=0;Se<y.length;Se++){const Ne=b[Se],Oe=y[Se];null!==Ne&&void 0!==Oe&&Oe.update(Ne,pe,c||o)}_.render(e,w),he&&he(z,pe),pe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:pe}),p=null}),this.setAnimationLoop=function(z){he=z},this.dispose=function(){}}}const Yl=new na,WY=new nt;function $Y(n,e){function t(m,g){!0===m.matrixAutoUpdate&&m.updateMatrix(),g.value.copy(m.matrix)}function s(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map,t(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.bumpMap&&(m.bumpMap.value=g.bumpMap,t(g.bumpMap,m.bumpMapTransform),m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,t(g.normalMap,m.normalMapTransform),m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,t(g.displacementMap,m.displacementMapTransform),m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,m.emissiveMapTransform)),g.specularMap&&(m.specularMap.value=g.specularMap,t(g.specularMap,m.specularMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const v=e.get(g),y=v.envMap,b=v.envMapRotation;if(y&&(m.envMap.value=y,Yl.copy(b),Yl.x*=-1,Yl.y*=-1,Yl.z*=-1,y.isCubeTexture&&!1===y.isRenderTargetTexture&&(Yl.y*=-1,Yl.z*=-1),m.envMapRotation.value.setFromMatrix4(WY.makeRotationFromEuler(Yl)),m.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const E=!0===n._useLegacyLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*E,t(g.lightMap,m.lightMapTransform)}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,m.aoMapTransform))}return{refreshFogUniforms:function i(m,g){g.color.getRGB(m.fogColor.value,JN(n)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function r(m,g,v,y,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(m,g):g.isMeshToonMaterial?(s(m,g),function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(s(m,g),function u(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(s(m,g),function h(m,g){m.metalness.value=g.metalness,g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,m.metalnessMapTransform)),m.roughness.value=g.roughness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,m.roughnessMapTransform)),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function f(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),1===g.side&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,m.specularIntensityMapTransform))}(m,g,b)):g.isMeshMatcapMaterial?(s(m,g),function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?s(m,g):g.isMeshDistanceMaterial?(s(m,g),function _(m,g){const v=e.get(g).light;m.referencePosition.value.setFromMatrixPosition(v.matrixWorld),m.nearDistance.value=v.shadow.camera.near,m.farDistance.value=v.shadow.camera.far}(m,g)):g.isMeshNormalMaterial?s(m,g):g.isLineBasicMaterial?(function o(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,g.map&&(m.map.value=g.map,t(g.map,m.mapTransform))}(m,g),g.isLineDashedMaterial&&function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function l(m,g,v,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=.5*y,g.map&&(m.map.value=g.map,t(g.map,m.uvTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}(m,g,v,y):g.isSpriteMaterial?function c(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map,t(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function jY(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function f(v,y,b,E){const S=v.value,M=y+"_"+b;if(void 0===E[M])return E[M]="number"==typeof S||"boolean"==typeof S?S:S.clone(),!0;{const A=E[M];if("number"==typeof S||"boolean"==typeof S){if(A!==S)return E[M]=S,!0}else if(!1===A.equals(S))return A.copy(S),!0}return!1}function _(v){const y={boundary:0,storage:0};return"number"==typeof v||"boolean"==typeof v?(y.boundary=4,y.storage=4):v.isVector2?(y.boundary=8,y.storage=8):v.isVector3||v.isColor?(y.boundary=16,y.storage=12):v.isVector4?(y.boundary=16,y.storage=16):v.isMatrix3?(y.boundary=48,y.storage=48):v.isMatrix4?(y.boundary=64,y.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),y}function m(v){const y=v.target;y.removeEventListener("dispose",m);const b=o.indexOf(y.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}return{bind:function l(v,y){i.uniformBlockBinding(v,y.program)},update:function c(v,y){let b=r[v.id];void 0===b&&(function p(v){const y=v.uniforms;let b=0;for(let M=0,A=y.length;M<A;M++){const U=Array.isArray(y[M])?y[M]:[y[M]];for(let w=0,R=U.length;w<R;w++){const Q=U[w],Z=Array.isArray(Q.value)?Q.value:[Q.value];for(let F=0,K=Z.length;F<K;F++){const V=_(Z[F]),H=b%16;0!==H&&16-H<V.boundary&&(b+=16-H),Q.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=b,b+=V.storage}}}const S=b%16;S>0&&(b+=16-S),v.__size=b,v.__cache={}}(v),b=function u(v){const y=function d(){for(let v=0;v<a;v++)if(-1===o.indexOf(v))return o.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();v.__bindingPointIndex=y;const b=n.createBuffer(),E=v.__size,S=v.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,E,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,y,b),b}(v),r[v.id]=b,v.addEventListener("dispose",m)),i.updateUBOMapping(v,y.program);const S=e.render.frame;s[v.id]!==S&&(function h(v){const b=v.uniforms,E=v.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[v.id]);for(let S=0,M=b.length;S<M;S++){const A=Array.isArray(b[S])?b[S]:[b[S]];for(let U=0,w=A.length;U<w;U++){const R=A[U];if(!0===f(R,S,U,E)){const Q=R.__offset,Z=Array.isArray(R.value)?R.value:[R.value];let F=0;for(let K=0;K<Z.length;K++){const L=Z[K],V=_(L);"number"==typeof L||"boolean"==typeof L?(R.__data[0]=L,n.bufferSubData(n.UNIFORM_BUFFER,Q+F,R.__data)):L.isMatrix3?(R.__data[0]=L.elements[0],R.__data[1]=L.elements[1],R.__data[2]=L.elements[2],R.__data[3]=0,R.__data[4]=L.elements[3],R.__data[5]=L.elements[4],R.__data[6]=L.elements[5],R.__data[7]=0,R.__data[8]=L.elements[6],R.__data[9]=L.elements[7],R.__data[10]=L.elements[8],R.__data[11]=0):(L.toArray(R.__data,F),F+=V.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Q,R.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(v),s[v.id]=S)},dispose:function g(){for(const v in r)n.deleteBuffer(r[v]);o=[],r={},s={}}}}class NI{constructor(e={}){const{canvas:t=y9(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==i?i.getContextAttributes().alpha:o;const f=new Uint32Array(4),p=new Int32Array(4);let _=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=gr,this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const y=this;let b=!1,E=0,S=0,M=null,A=-1,U=null;const w=new En,R=new En;let Q=null;const Z=new Re(0);let F=0,K=t.width,L=t.height,V=1,H=null,$=null;const le=new En(0,0,K,L),he=new En(0,0,K,L);let Me=!1;const Xe=new am;let z=!1,pe=!1,Se=null;const Ne=new nt,Oe=new ne,De=new T,Ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function We(){return null===M?V:1}let se,be,ue,Ve,Be,je,Lt,N,x,te,ie,me,ge,_t,st,Ee,Te,yt,we,di,jt,rt,qe,et,P=i;function xe(C,G){for(let J=0;J<C.length;J++){const Y=t.getContext(C[J],G);if(null!==Y)return Y}return null}try{const C={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r162"),t.addEventListener("webglcontextlost",Ke,!1),t.addEventListener("webglcontextrestored",B,!1),t.addEventListener("webglcontextcreationerror",ve,!1),null===P){const G=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&G.shift(),P=xe(G,C),null===P)throw xe(G)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&P instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===P.getShaderPrecisionFormat&&(P.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(C){throw console.error("THREE.WebGLRenderer: "+C.message),C}function I(){se=new eX(P),be=new Xq(P,se,e),se.init(be),rt=new kY(P,se,be),ue=new LY(P,se,be),Ve=new iX(P),Be=new xY,je=new FY(P,se,ue,Be,be,rt,Ve),Lt=new Kq(y),N=new Qq(y),x=new G9(P,be),qe=new jq(P,se,x,be),te=new tX(P,x,Ve,qe),ie=new aX(P,te,x,Ve),we=new oX(P,be,je),Ee=new Yq(Be),me=new MY(y,Lt,N,se,be,qe,Ee),ge=new $Y(y,Be),_t=new EY,st=new NY(se,be),yt=new $q(y,Lt,N,ue,ie,h,l),Te=new OY(y,ie,be),et=new jY(P,Ve,be,ue),di=new qq(P,se,Ve,be),jt=new nX(P,se,Ve,be),Ve.programs=me.programs,y.capabilities=be,y.extensions=se,y.properties=Be,y.renderLists=_t,y.shadowMap=Te,y.state=ue,y.info=Ve}I();const ce=new GY(y,P);function Ke(C){C.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function B(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const C=Ve.autoReset,G=Te.enabled,J=Te.autoUpdate,ee=Te.needsUpdate,Y=Te.type;I(),Ve.autoReset=C,Te.enabled=G,Te.autoUpdate=J,Te.needsUpdate=ee,Te.type=Y}function ve(C){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",C.statusMessage)}function X(C){const G=C.target;G.removeEventListener("dispose",X),function _e(C){(function Fe(C){const G=Be.get(C).programs;void 0!==G&&(G.forEach(function(J){me.releaseProgram(J)}),C.isShaderMaterial&&me.releaseShaderCache(C))})(C),Be.remove(C)}(G)}function Kt(C,G,J){!0===C.transparent&&2===C.side&&!1===C.forceSinglePass?(C.side=1,C.needsUpdate=!0,q_(C,G,J),C.side=0,C.needsUpdate=!0,q_(C,G,J),C.side=2):q_(C,G,J)}this.xr=ce,this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.forceContextLoss=function(){const C=se.get("WEBGL_lose_context");C&&C.loseContext()},this.forceContextRestore=function(){const C=se.get("WEBGL_lose_context");C&&C.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(C){void 0!==C&&(V=C,this.setSize(K,L,!1))},this.getSize=function(C){return C.set(K,L)},this.setSize=function(C,G,J=!0){ce.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(K=C,L=G,t.width=Math.floor(C*V),t.height=Math.floor(G*V),!0===J&&(t.style.width=C+"px",t.style.height=G+"px"),this.setViewport(0,0,C,G))},this.getDrawingBufferSize=function(C){return C.set(K*V,L*V).floor()},this.setDrawingBufferSize=function(C,G,J){K=C,L=G,V=J,t.width=Math.floor(C*J),t.height=Math.floor(G*J),this.setViewport(0,0,C,G)},this.getCurrentViewport=function(C){return C.copy(w)},this.getViewport=function(C){return C.copy(le)},this.setViewport=function(C,G,J,ee){C.isVector4?le.set(C.x,C.y,C.z,C.w):le.set(C,G,J,ee),ue.viewport(w.copy(le).multiplyScalar(V).round())},this.getScissor=function(C){return C.copy(he)},this.setScissor=function(C,G,J,ee){C.isVector4?he.set(C.x,C.y,C.z,C.w):he.set(C,G,J,ee),ue.scissor(R.copy(he).multiplyScalar(V).round())},this.getScissorTest=function(){return Me},this.setScissorTest=function(C){ue.setScissorTest(Me=C)},this.setOpaqueSort=function(C){H=C},this.setTransparentSort=function(C){$=C},this.getClearColor=function(C){return C.copy(yt.getClearColor())},this.setClearColor=function(){yt.setClearColor.apply(yt,arguments)},this.getClearAlpha=function(){return yt.getClearAlpha()},this.setClearAlpha=function(){yt.setClearAlpha.apply(yt,arguments)},this.clear=function(C=!0,G=!0,J=!0){let ee=0;if(C){let Y=!1;if(null!==M){const He=M.texture.format;Y=1033===He||1031===He||1029===He}if(Y){const He=M.texture.type,it=He===Fa||He===ka||1012===He||He===kl||1017===He||1018===He,pt=yt.getClearColor(),bt=yt.getClearAlpha(),qt=pt.r,At=pt.g,Ft=pt.b;it?(f[0]=qt,f[1]=At,f[2]=Ft,f[3]=bt,P.clearBufferuiv(P.COLOR,0,f)):(p[0]=qt,p[1]=At,p[2]=Ft,p[3]=bt,P.clearBufferiv(P.COLOR,0,p))}else ee|=P.COLOR_BUFFER_BIT}G&&(ee|=P.DEPTH_BUFFER_BIT),J&&(ee|=P.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),P.clear(ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ke,!1),t.removeEventListener("webglcontextrestored",B,!1),t.removeEventListener("webglcontextcreationerror",ve,!1),_t.dispose(),st.dispose(),Be.dispose(),Lt.dispose(),N.dispose(),ie.dispose(),qe.dispose(),et.dispose(),me.dispose(),ce.dispose(),ce.removeEventListener("sessionstart",hi),ce.removeEventListener("sessionend",fn),Se&&(Se.dispose(),Se=null),Vn.stop()},this.renderBufferDirect=function(C,G,J,ee,Y,He){null===G&&(G=Ze);const it=Y.isMesh&&Y.matrixWorld.determinant()<0,pt=function eae(C,G,J,ee,Y){!0!==G.isScene&&(G=Ze),je.resetTextureUnits();const He=G.fog,pt=null===M?y.outputColorSpace:!0===M.isXRRenderTarget?M.texture.colorSpace:rr,bt=(ee.isMeshStandardMaterial?N:Lt).get(ee.envMap||(ee.isMeshStandardMaterial?G.environment:null)),qt=!0===ee.vertexColors&&!!J.attributes.color&&4===J.attributes.color.itemSize,At=!!J.attributes.tangent&&(!!ee.normalMap||ee.anisotropy>0),Ft=!!J.morphAttributes.position,_i=!!J.morphAttributes.normal,ds=!!J.morphAttributes.color;let Ki=0;ee.toneMapped&&(null===M||!0===M.isXRRenderTarget)&&(Ki=y.toneMapping);const pa=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,Jn=void 0!==pa?pa.length:0,Vt=Be.get(ee),JM=m.state.lights;!0!==z||!0!==pe&&C===U||Ee.setState(ee,C,C===U&&ee.id===A);let qn=!1;ee.version===Vt.__version?(Vt.needsLights&&Vt.lightsStateVersion!==JM.state.version||Vt.outputColorSpace!==pt||Y.isBatchedMesh&&!1===Vt.batching||!Y.isBatchedMesh&&!0===Vt.batching||Y.isInstancedMesh&&!1===Vt.instancing||!Y.isInstancedMesh&&!0===Vt.instancing||Y.isSkinnedMesh&&!1===Vt.skinning||!Y.isSkinnedMesh&&!0===Vt.skinning||Y.isInstancedMesh&&!0===Vt.instancingColor&&null===Y.instanceColor||Y.isInstancedMesh&&!1===Vt.instancingColor&&null!==Y.instanceColor||Y.isInstancedMesh&&!0===Vt.instancingMorph&&null===Y.morphTexture||Y.isInstancedMesh&&!1===Vt.instancingMorph&&null!==Y.morphTexture||Vt.envMap!==bt||!0===ee.fog&&Vt.fog!==He||void 0!==Vt.numClippingPlanes&&(Vt.numClippingPlanes!==Ee.numPlanes||Vt.numIntersection!==Ee.numIntersection)||Vt.vertexAlphas!==qt||Vt.vertexTangents!==At||Vt.morphTargets!==Ft||Vt.morphNormals!==_i||Vt.morphColors!==ds||Vt.toneMapping!==Ki||!0===be.isWebGL2&&Vt.morphTargetsCount!==Jn)&&(qn=!0):(qn=!0,Vt.__version=ee.version);let Ec=Vt.currentProgram;!0===qn&&(Ec=q_(ee,G,Y));let ik=!1,Bf=!1,ZM=!1;const wr=Ec.getUniforms(),Cc=Vt.uniforms;if(ue.useProgram(Ec.program)&&(ik=!0,Bf=!0,ZM=!0),ee.id!==A&&(A=ee.id,Bf=!0),ik||U!==C){wr.setValue(P,"projectionMatrix",C.projectionMatrix),wr.setValue(P,"viewMatrix",C.matrixWorldInverse);const Fs=wr.map.cameraPosition;void 0!==Fs&&Fs.setValue(P,De.setFromMatrixPosition(C.matrixWorld)),be.logarithmicDepthBuffer&&wr.setValue(P,"logDepthBufFC",2/(Math.log(C.far+1)/Math.LN2)),(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial)&&wr.setValue(P,"isOrthographic",!0===C.isOrthographicCamera),U!==C&&(U=C,Bf=!0,ZM=!0)}if(Y.isSkinnedMesh){wr.setOptional(P,Y,"bindMatrix"),wr.setOptional(P,Y,"bindMatrixInverse");const Fs=Y.skeleton;Fs&&(be.floatVertexTextures?(null===Fs.boneTexture&&Fs.computeBoneTexture(),wr.setValue(P,"boneTexture",Fs.boneTexture,je)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Y.isBatchedMesh&&(wr.setOptional(P,Y,"batchingTexture"),wr.setValue(P,"batchingTexture",Y._matricesTexture,je));const QM=J.morphAttributes;if((void 0!==QM.position||void 0!==QM.normal||void 0!==QM.color&&!0===be.isWebGL2)&&we.update(Y,J,Ec),(Bf||Vt.receiveShadow!==Y.receiveShadow)&&(Vt.receiveShadow=Y.receiveShadow,wr.setValue(P,"receiveShadow",Y.receiveShadow)),ee.isMeshGouraudMaterial&&null!==ee.envMap&&(Cc.envMap.value=bt,Cc.flipEnvMap.value=bt.isCubeTexture&&!1===bt.isRenderTargetTexture?-1:1),Bf&&(wr.setValue(P,"toneMappingExposure",y.toneMappingExposure),Vt.needsLights&&function tae(C,G){C.ambientLightColor.needsUpdate=G,C.lightProbe.needsUpdate=G,C.directionalLights.needsUpdate=G,C.directionalLightShadows.needsUpdate=G,C.pointLights.needsUpdate=G,C.pointLightShadows.needsUpdate=G,C.spotLights.needsUpdate=G,C.spotLightShadows.needsUpdate=G,C.rectAreaLights.needsUpdate=G,C.hemisphereLights.needsUpdate=G}(Cc,ZM),He&&!0===ee.fog&&ge.refreshFogUniforms(Cc,He),ge.refreshMaterialUniforms(Cc,ee,V,L,Se),hm.upload(P,tk(Vt),Cc,je)),ee.isShaderMaterial&&!0===ee.uniformsNeedUpdate&&(hm.upload(P,tk(Vt),Cc,je),ee.uniformsNeedUpdate=!1),ee.isSpriteMaterial&&wr.setValue(P,"center",Y.center),wr.setValue(P,"modelViewMatrix",Y.modelViewMatrix),wr.setValue(P,"normalMatrix",Y.normalMatrix),wr.setValue(P,"modelMatrix",Y.matrixWorld),ee.isShaderMaterial||ee.isRawShaderMaterial){const Fs=ee.uniformsGroups;for(let ex=0,iae=Fs.length;ex<iae;ex++)if(be.isWebGL2){const rk=Fs[ex];et.update(rk,Ec),et.bind(rk,Ec)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ec}(C,G,J,ee,Y);ue.setMaterial(ee,it);let bt=J.index,qt=1;if(!0===ee.wireframe){if(bt=te.getWireframeAttribute(J),void 0===bt)return;qt=2}const At=J.drawRange,Ft=J.attributes.position;let _i=At.start*qt,ds=(At.start+At.count)*qt;null!==He&&(_i=Math.max(_i,He.start*qt),ds=Math.min(ds,(He.start+He.count)*qt)),null!==bt?(_i=Math.max(_i,0),ds=Math.min(ds,bt.count)):null!=Ft&&(_i=Math.max(_i,0),ds=Math.min(ds,Ft.count));const Ki=ds-_i;if(Ki<0||Ki===1/0)return;qe.setup(Y,ee,pt,J,bt);let pa,Jn=di;if(null!==bt&&(pa=x.get(bt),Jn=jt,Jn.setIndex(pa)),Y.isMesh)!0===ee.wireframe?(ue.setLineWidth(ee.wireframeLinewidth*We()),Jn.setMode(P.LINES)):Jn.setMode(P.TRIANGLES);else if(Y.isLine){let Vt=ee.linewidth;void 0===Vt&&(Vt=1),ue.setLineWidth(Vt*We()),Jn.setMode(Y.isLineSegments?P.LINES:Y.isLineLoop?P.LINE_LOOP:P.LINE_STRIP)}else Y.isPoints?Jn.setMode(P.POINTS):Y.isSprite&&Jn.setMode(P.TRIANGLES);if(Y.isBatchedMesh)Jn.renderMultiDraw(Y._multiDrawStarts,Y._multiDrawCounts,Y._multiDrawCount);else if(Y.isInstancedMesh)Jn.renderInstances(_i,Ki,Y.count);else if(J.isInstancedBufferGeometry){const JM=Math.min(J.instanceCount,void 0!==J._maxInstanceCount?J._maxInstanceCount:1/0);Jn.renderInstances(_i,Ki,JM)}else Jn.render(_i,Ki)},this.compile=function(C,G,J=null){null===J&&(J=C),m=st.get(J),m.init(),v.push(m),J.traverseVisible(function(Y){Y.isLight&&Y.layers.test(G.layers)&&(m.pushLight(Y),Y.castShadow&&m.pushShadow(Y))}),C!==J&&C.traverseVisible(function(Y){Y.isLight&&Y.layers.test(G.layers)&&(m.pushLight(Y),Y.castShadow&&m.pushShadow(Y))}),m.setupLights(y._useLegacyLights);const ee=new Set;return C.traverse(function(Y){const He=Y.material;if(He)if(Array.isArray(He))for(let it=0;it<He.length;it++){const pt=He[it];Kt(pt,J,Y),ee.add(pt)}else Kt(He,J,Y),ee.add(He)}),v.pop(),m=null,ee},this.compileAsync=function(C,G,J=null){const ee=this.compile(C,G,J);return new Promise(Y=>{function He(){ee.forEach(function(it){Be.get(it).currentProgram.isReady()&&ee.delete(it)}),0!==ee.size?setTimeout(He,10):Y(C)}null!==se.get("KHR_parallel_shader_compile")?He():setTimeout(He,10)})};let wn=null;function hi(){Vn.stop()}function fn(){Vn.start()}const Vn=new eI;function br(C,G,J,ee){if(!1===C.visible)return;if(C.layers.test(G.layers))if(C.isGroup)J=C.renderOrder;else if(C.isLOD)!0===C.autoUpdate&&C.update(G);else if(C.isLight)m.pushLight(C),C.castShadow&&m.pushShadow(C);else if(C.isSprite){if(!C.frustumCulled||Xe.intersectsSprite(C)){ee&&De.setFromMatrixPosition(C.matrixWorld).applyMatrix4(Ne);const it=ie.update(C),pt=C.material;pt.visible&&_.push(C,it,pt,J,De.z,null)}}else if((C.isMesh||C.isLine||C.isPoints)&&(!C.frustumCulled||Xe.intersectsObject(C))){const it=ie.update(C),pt=C.material;if(ee&&(void 0!==C.boundingSphere?(null===C.boundingSphere&&C.computeBoundingSphere(),De.copy(C.boundingSphere.center)):(null===it.boundingSphere&&it.computeBoundingSphere(),De.copy(it.boundingSphere.center)),De.applyMatrix4(C.matrixWorld).applyMatrix4(Ne)),Array.isArray(pt)){const bt=it.groups;for(let qt=0,At=bt.length;qt<At;qt++){const Ft=bt[qt],_i=pt[Ft.materialIndex];_i&&_i.visible&&_.push(C,it,_i,J,De.z,Ft)}}else pt.visible&&_.push(C,it,pt,J,De.z,null)}const He=C.children;for(let it=0,pt=He.length;it<pt;it++)br(He[it],G,J,ee)}function Sc(C,G,J,ee){const Y=C.opaque,He=C.transmissive,it=C.transparent;m.setupLightsView(J),!0===z&&Ee.setGlobalState(y.clippingPlanes,J),He.length>0&&function $_(C,G,J,ee){if(null!==(!0===J.isScene?J.overrideMaterial:null))return;const He=be.isWebGL2;null===Se&&(Se=new Hl(1,1,{generateMipmaps:!0,type:se.has("EXT_color_buffer_half_float")?Xh:Fa,minFilter:io,samples:He?4:0})),y.getDrawingBufferSize(Oe),He?Se.setSize(Oe.x,Oe.y):Se.setSize(Vg(Oe.x),Vg(Oe.y));const it=y.getRenderTarget();y.setRenderTarget(Se),y.getClearColor(Z),F=y.getClearAlpha(),F<1&&y.setClearColor(16777215,.5),y.clear();const pt=y.toneMapping;y.toneMapping=0,j_(C,J,ee),je.updateMultisampleRenderTarget(Se),je.updateRenderTargetMipmap(Se);let bt=!1;for(let qt=0,At=G.length;qt<At;qt++){const Ft=G[qt],_i=Ft.object,ds=Ft.geometry,Ki=Ft.material,pa=Ft.group;if(2===Ki.side&&_i.layers.test(ee.layers)){const Jn=Ki.side;Ki.side=1,Ki.needsUpdate=!0,ek(_i,J,ee,ds,Ki,pa),Ki.side=Jn,Ki.needsUpdate=!0,bt=!0}}!0===bt&&(je.updateMultisampleRenderTarget(Se),je.updateRenderTargetMipmap(Se)),y.setRenderTarget(it),y.setClearColor(Z,F),y.toneMapping=pt}(Y,He,G,J),ee&&ue.viewport(w.copy(ee)),Y.length>0&&j_(Y,G,J),He.length>0&&j_(He,G,J),it.length>0&&j_(it,G,J),ue.buffers.depth.setTest(!0),ue.buffers.depth.setMask(!0),ue.buffers.color.setMask(!0),ue.setPolygonOffset(!1)}function j_(C,G,J){const ee=!0===G.isScene?G.overrideMaterial:null;for(let Y=0,He=C.length;Y<He;Y++){const it=C[Y],pt=it.object,bt=it.geometry,qt=null===ee?it.material:ee,At=it.group;pt.layers.test(J.layers)&&ek(pt,G,J,bt,qt,At)}}function ek(C,G,J,ee,Y,He){C.onBeforeRender(y,G,J,ee,Y,He),C.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,C.matrixWorld),C.normalMatrix.getNormalMatrix(C.modelViewMatrix),Y.onBeforeRender(y,G,J,ee,C,He),!0===Y.transparent&&2===Y.side&&!1===Y.forceSinglePass?(Y.side=1,Y.needsUpdate=!0,y.renderBufferDirect(J,G,ee,Y,C,He),Y.side=0,Y.needsUpdate=!0,y.renderBufferDirect(J,G,ee,Y,C,He),Y.side=2):y.renderBufferDirect(J,G,ee,Y,C,He),C.onAfterRender(y,G,J,ee,Y,He)}function q_(C,G,J){!0!==G.isScene&&(G=Ze);const ee=Be.get(C),Y=m.state.lights,it=Y.state.version,pt=me.getParameters(C,Y.state,m.state.shadowsArray,G,J),bt=me.getProgramCacheKey(pt);let qt=ee.programs;ee.environment=C.isMeshStandardMaterial?G.environment:null,ee.fog=G.fog,ee.envMap=(C.isMeshStandardMaterial?N:Lt).get(C.envMap||ee.environment),ee.envMapRotation=null!==ee.environment&&null===C.envMap?G.environmentRotation:C.envMapRotation,void 0===qt&&(C.addEventListener("dispose",X),qt=new Map,ee.programs=qt);let At=qt.get(bt);if(void 0!==At){if(ee.currentProgram===At&&ee.lightsStateVersion===it)return nk(C,pt),At}else pt.uniforms=me.getUniforms(C),C.onBuild(J,pt,y),C.onBeforeCompile(pt,y),At=me.acquireProgram(pt,bt),qt.set(bt,At),ee.uniforms=pt.uniforms;const Ft=ee.uniforms;return(!C.isShaderMaterial&&!C.isRawShaderMaterial||!0===C.clipping)&&(Ft.clippingPlanes=Ee.uniform),nk(C,pt),ee.needsLights=function nae(C){return C.isMeshLambertMaterial||C.isMeshToonMaterial||C.isMeshPhongMaterial||C.isMeshStandardMaterial||C.isShadowMaterial||C.isShaderMaterial&&!0===C.lights}(C),ee.lightsStateVersion=it,ee.needsLights&&(Ft.ambientLightColor.value=Y.state.ambient,Ft.lightProbe.value=Y.state.probe,Ft.directionalLights.value=Y.state.directional,Ft.directionalLightShadows.value=Y.state.directionalShadow,Ft.spotLights.value=Y.state.spot,Ft.spotLightShadows.value=Y.state.spotShadow,Ft.rectAreaLights.value=Y.state.rectArea,Ft.ltc_1.value=Y.state.rectAreaLTC1,Ft.ltc_2.value=Y.state.rectAreaLTC2,Ft.pointLights.value=Y.state.point,Ft.pointLightShadows.value=Y.state.pointShadow,Ft.hemisphereLights.value=Y.state.hemi,Ft.directionalShadowMap.value=Y.state.directionalShadowMap,Ft.directionalShadowMatrix.value=Y.state.directionalShadowMatrix,Ft.spotShadowMap.value=Y.state.spotShadowMap,Ft.spotLightMatrix.value=Y.state.spotLightMatrix,Ft.spotLightMap.value=Y.state.spotLightMap,Ft.pointShadowMap.value=Y.state.pointShadowMap,Ft.pointShadowMatrix.value=Y.state.pointShadowMatrix),ee.currentProgram=At,ee.uniformsList=null,At}function tk(C){if(null===C.uniformsList){const G=C.currentProgram.getUniforms();C.uniformsList=hm.seqWithValue(G.seq,C.uniforms)}return C.uniformsList}function nk(C,G){const J=Be.get(C);J.outputColorSpace=G.outputColorSpace,J.batching=G.batching,J.instancing=G.instancing,J.instancingColor=G.instancingColor,J.instancingMorph=G.instancingMorph,J.skinning=G.skinning,J.morphTargets=G.morphTargets,J.morphNormals=G.morphNormals,J.morphColors=G.morphColors,J.morphTargetsCount=G.morphTargetsCount,J.numClippingPlanes=G.numClippingPlanes,J.numIntersection=G.numClipIntersection,J.vertexAlphas=G.vertexAlphas,J.vertexTangents=G.vertexTangents,J.toneMapping=G.toneMapping}Vn.setAnimationLoop(function Rn(C){wn&&wn(C)}),"undefined"!=typeof self&&Vn.setContext(self),this.setAnimationLoop=function(C){wn=C,ce.setAnimationLoop(C),null===C?Vn.stop():Vn.start()},ce.addEventListener("sessionstart",hi),ce.addEventListener("sessionend",fn),this.render=function(C,G){if(void 0===G||!0===G.isCamera){if(!0!==b){if(!0===C.matrixWorldAutoUpdate&&C.updateMatrixWorld(),null===G.parent&&!0===G.matrixWorldAutoUpdate&&G.updateMatrixWorld(),!0===ce.enabled&&!0===ce.isPresenting&&(!0===ce.cameraAutoUpdate&&ce.updateCamera(G),G=ce.getCamera()),!0===C.isScene&&C.onBeforeRender(y,C,G,M),m=st.get(C,v.length),m.init(),v.push(m),Ne.multiplyMatrices(G.projectionMatrix,G.matrixWorldInverse),Xe.setFromProjectionMatrix(Ne),pe=this.localClippingEnabled,z=Ee.init(this.clippingPlanes,pe),_=_t.get(C,g.length),_.init(),g.push(_),br(C,G,0,y.sortObjects),_.finish(),!0===y.sortObjects&&_.sort(H,$),this.info.render.frame++,!0===z&&Ee.beginShadows(),Te.render(m.state.shadowsArray,C,G),!0===z&&Ee.endShadows(),!0===this.info.autoReset&&this.info.reset(),(!1===ce.enabled||!1===ce.isPresenting||!1===ce.hasDepthSensing())&&yt.render(_,C),m.setupLights(y._useLegacyLights),G.isArrayCamera){const ee=G.cameras;for(let Y=0,He=ee.length;Y<He;Y++){const it=ee[Y];Sc(_,C,it,it.viewport)}}else Sc(_,C,G);null!==M&&(je.updateMultisampleRenderTarget(M),je.updateRenderTargetMipmap(M)),!0===C.isScene&&C.onAfterRender(y,C,G),qe.resetDefaultState(),A=-1,U=null,v.pop(),m=v.length>0?v[v.length-1]:null,g.pop(),_=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(C,G,J){Be.get(C.texture).__webglTexture=G,Be.get(C.depthTexture).__webglTexture=J;const ee=Be.get(C);ee.__hasExternalTextures=!0,ee.__autoAllocateDepthBuffer=void 0===J,ee.__autoAllocateDepthBuffer||!0===se.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ee.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(C,G){const J=Be.get(C);J.__webglFramebuffer=G,J.__useDefaultFramebuffer=void 0===G},this.setRenderTarget=function(C,G=0,J=0){M=C,E=G,S=J;let ee=!0,Y=null,He=!1,it=!1;if(C){const bt=Be.get(C);void 0!==bt.__useDefaultFramebuffer?(ue.bindFramebuffer(P.FRAMEBUFFER,null),ee=!1):void 0===bt.__webglFramebuffer?je.setupRenderTarget(C):bt.__hasExternalTextures&&je.rebindTextures(C,Be.get(C.texture).__webglTexture,Be.get(C.depthTexture).__webglTexture);const qt=C.texture;(qt.isData3DTexture||qt.isDataArrayTexture||qt.isCompressedArrayTexture)&&(it=!0);const At=Be.get(C).__webglFramebuffer;C.isWebGLCubeRenderTarget?(Y=Array.isArray(At[G])?At[G][J]:At[G],He=!0):Y=be.isWebGL2&&C.samples>0&&!1===je.useMultisampledRTT(C)?Be.get(C).__webglMultisampledFramebuffer:Array.isArray(At)?At[J]:At,w.copy(C.viewport),R.copy(C.scissor),Q=C.scissorTest}else w.copy(le).multiplyScalar(V).floor(),R.copy(he).multiplyScalar(V).floor(),Q=Me;if(ue.bindFramebuffer(P.FRAMEBUFFER,Y)&&be.drawBuffers&&ee&&ue.drawBuffers(C,Y),ue.viewport(w),ue.scissor(R),ue.setScissorTest(Q),He){const bt=Be.get(C.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+G,bt.__webglTexture,J)}else if(it){const bt=Be.get(C.texture);P.framebufferTextureLayer(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,bt.__webglTexture,J||0,G||0)}A=-1},this.readRenderTargetPixels=function(C,G,J,ee,Y,He,it){if(!C||!C.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let pt=Be.get(C).__webglFramebuffer;if(C.isWebGLCubeRenderTarget&&void 0!==it&&(pt=pt[it]),pt){ue.bindFramebuffer(P.FRAMEBUFFER,pt);try{const bt=C.texture,qt=bt.format,At=bt.type;if(qt!==is&&rt.convert(qt)!==P.getParameter(P.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Ft=At===Xh&&(se.has("EXT_color_buffer_half_float")||be.isWebGL2&&se.has("EXT_color_buffer_float"));if(!(At===Fa||rt.convert(At)===P.getParameter(P.IMPLEMENTATION_COLOR_READ_TYPE)||At===As&&(be.isWebGL2||se.has("OES_texture_float")||se.has("WEBGL_color_buffer_float"))||Ft))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");G>=0&&G<=C.width-ee&&J>=0&&J<=C.height-Y&&P.readPixels(G,J,ee,Y,rt.convert(qt),rt.convert(At),He)}finally{const bt=null!==M?Be.get(M).__webglFramebuffer:null;ue.bindFramebuffer(P.FRAMEBUFFER,bt)}}},this.copyFramebufferToTexture=function(C,G,J=0){const ee=Math.pow(2,-J),Y=Math.floor(G.image.width*ee),He=Math.floor(G.image.height*ee);je.setTexture2D(G,0),P.copyTexSubImage2D(P.TEXTURE_2D,J,0,0,C.x,C.y,Y,He),ue.unbindTexture()},this.copyTextureToTexture=function(C,G,J,ee=0){const Y=G.image.width,He=G.image.height,it=rt.convert(J.format),pt=rt.convert(J.type);je.setTexture2D(J,0),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,J.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,J.unpackAlignment),G.isDataTexture?P.texSubImage2D(P.TEXTURE_2D,ee,C.x,C.y,Y,He,it,pt,G.image.data):G.isCompressedTexture?P.compressedTexSubImage2D(P.TEXTURE_2D,ee,C.x,C.y,G.mipmaps[0].width,G.mipmaps[0].height,it,G.mipmaps[0].data):P.texSubImage2D(P.TEXTURE_2D,ee,C.x,C.y,it,pt,G.image),0===ee&&J.generateMipmaps&&P.generateMipmap(P.TEXTURE_2D),ue.unbindTexture()},this.copyTextureToTexture3D=function(C,G,J,ee,Y=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const He=Math.round(C.max.x-C.min.x),it=Math.round(C.max.y-C.min.y),pt=C.max.z-C.min.z+1,bt=rt.convert(ee.format),qt=rt.convert(ee.type);let At;if(ee.isData3DTexture)je.setTexture3D(ee,0),At=P.TEXTURE_3D;else{if(!ee.isDataArrayTexture&&!ee.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");je.setTexture2DArray(ee,0),At=P.TEXTURE_2D_ARRAY}P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,ee.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,ee.unpackAlignment);const Ft=P.getParameter(P.UNPACK_ROW_LENGTH),_i=P.getParameter(P.UNPACK_IMAGE_HEIGHT),ds=P.getParameter(P.UNPACK_SKIP_PIXELS),Ki=P.getParameter(P.UNPACK_SKIP_ROWS),pa=P.getParameter(P.UNPACK_SKIP_IMAGES),Jn=J.isCompressedTexture?J.mipmaps[Y]:J.image;P.pixelStorei(P.UNPACK_ROW_LENGTH,Jn.width),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,Jn.height),P.pixelStorei(P.UNPACK_SKIP_PIXELS,C.min.x),P.pixelStorei(P.UNPACK_SKIP_ROWS,C.min.y),P.pixelStorei(P.UNPACK_SKIP_IMAGES,C.min.z),J.isDataTexture||J.isData3DTexture?P.texSubImage3D(At,Y,G.x,G.y,G.z,He,it,pt,bt,qt,Jn.data):ee.isCompressedArrayTexture?P.compressedTexSubImage3D(At,Y,G.x,G.y,G.z,He,it,pt,bt,Jn.data):P.texSubImage3D(At,Y,G.x,G.y,G.z,He,it,pt,bt,qt,Jn),P.pixelStorei(P.UNPACK_ROW_LENGTH,Ft),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,_i),P.pixelStorei(P.UNPACK_SKIP_PIXELS,ds),P.pixelStorei(P.UNPACK_SKIP_ROWS,Ki),P.pixelStorei(P.UNPACK_SKIP_IMAGES,pa),0===Y&&ee.generateMipmaps&&P.generateMipmap(At),ue.unbindTexture()},this.initTexture=function(C){C.isCubeTexture?je.setTextureCube(C,0):C.isData3DTexture?je.setTexture3D(C,0):C.isDataArrayTexture||C.isCompressedArrayTexture?je.setTexture2DArray(C,0):je.setTexture2D(C,0),ue.unbindTexture()},this.resetState=function(){E=0,S=0,M=null,ue.reset(),qe.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Qo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Bb?"display-p3":"srgb",t.unpackColorSpace=yn.workingColorSpace===Og?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class qY extends NI{}).prototype.isWebGL1Renderer=!0;class II extends $i{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new na,this.environmentRotation=new na,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class b1{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=rs()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return RN("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rs()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rs()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Lr=new T;class Kl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Lr.fromBufferAttribute(this,t),Lr.applyMatrix4(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Lr.fromBufferAttribute(this,t),Lr.applyNormalMatrix(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Lr.fromBufferAttribute(this,t),Lr.transformDirection(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ir(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Dt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Dt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Dt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Dt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Dt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ir(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ir(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ir(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ir(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dt(t,this.array),i=Dt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dt(t,this.array),i=Dt(i,this.array),r=Dt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dt(t,this.array),i=Dt(i,this.array),r=Dt(r,this.array),s=Dt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new $n(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Kl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const BI=new T,UI=new En,VI=new En,KY=new T,HI=new nt,_m=new T,M1=new _r,zI=new nt,x1=new zu;class GI extends qi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=HR,this.bindMatrix=new nt,this.bindMatrixInverse=new nt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Pr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,_m),this.boundingBox.expandByPoint(_m)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new _r),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,_m),this.boundingSphere.expandByPoint(_m)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),M1.copy(this.boundingSphere),M1.applyMatrix4(r),!1!==e.ray.intersectsSphere(M1)&&(zI.copy(r).invert(),x1.copy(e.ray).applyMatrix4(zI),(null===this.boundingBox||!1!==x1.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,x1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new En,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===HR?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;UI.fromBufferAttribute(r.attributes.skinIndex,e),VI.fromBufferAttribute(r.attributes.skinWeight,e),BI.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=VI.getComponent(s);if(0!==o){const a=UI.getComponent(s);HI.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(KY.copy(BI).applyMatrix4(HI),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class S1 extends $i{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Jl extends Rs{constructor(e=null,t=1,i=1,r,s,o,a,l,c=gi,u=gi,d,h){super(null,o,a,l,c,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const WI=new nt,JY=new nt;class ym{constructor(e=[],t=[]){this.uuid=rs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new nt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new nt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)WI.multiplyMatrices(e[s]?e[s].matrixWorld:JY,t[s]),WI.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new ym(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Jl(t,e,e,is,As);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new S1),this.bones.push(o),this.boneInverses.push((new nt).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class cd extends $n{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ud=new nt,$I=new nt,vm=[],jI=new Pr,ZY=new nt,lf=new qi,cf=new _r;class qI extends qi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new cd(new Float32Array(16*i),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,ZY)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Pr),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ud),jI.copy(e.boundingBox).applyMatrix4(ud),this.boundingBox.union(jI)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new _r),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ud),cf.copy(e.boundingSphere).applyMatrix4(ud),this.boundingSphere.union(cf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=e*(i.length+1)+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(lf.geometry=this.geometry,lf.material=this.material,void 0!==lf.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),cf.copy(this.boundingSphere),cf.applyMatrix4(i),!1!==e.ray.intersectsSphere(cf)))for(let s=0;s<r;s++){this.getMatrixAt(s,ud),$I.multiplyMatrices(i,ud),lf.matrixWorld=$I,lf.raycast(e,vm);for(let o=0,a=vm.length;o<a;o++){const l=vm[o];l.instanceId=s,l.object=this,t.push(l)}vm.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new cd(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;null===this.morphTexture&&(this.morphTexture=new Jl(new Float32Array(r*this.count),r,this.count,1028,As));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const l=r*e;s[l]=this.geometry.morphTargetsRelative?1:1-o,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class qr extends ao{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Re(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const KI=new T,JI=new T,ZI=new nt,T1=new zu,Mm=new _r;class Ql extends $i{constructor(e=new Wt,t=new qr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)KI.fromBufferAttribute(t,r-1),JI.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=KI.distanceTo(JI);e.setAttribute("lineDistance",new Je(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Mm.copy(i.boundingSphere),Mm.applyMatrix4(r),Mm.radius+=s,!1===e.ray.intersectsSphere(Mm))return;ZI.copy(r).invert(),T1.copy(e.ray).applyMatrix4(ZI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new T,u=new T,d=new T,h=new T,f=this.isLineSegments?2:1,p=i.index,m=i.attributes.position;if(null!==p)for(let y=Math.max(0,o.start),b=Math.min(p.count,o.start+o.count)-1;y<b;y+=f){const E=p.getX(y),S=p.getX(y+1);if(c.fromBufferAttribute(m,E),u.fromBufferAttribute(m,S),T1.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(h);A<e.near||A>e.far||t.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count)-1;y<b;y+=f){if(c.fromBufferAttribute(m,y),u.fromBufferAttribute(m,y+1),T1.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(h);S<e.near||S>e.far||t.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const QI=new T,eP=new T;class D1 extends Ql{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)QI.fromBufferAttribute(t,r),eP.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+QI.distanceTo(eP);e.setAttribute("lineDistance",new Je(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class tP extends Ql{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class A1 extends ao{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Re(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const nP=new nt,R1=new zu,xm=new _r,Sm=new T;class iP extends $i{constructor(e=new Wt,t=new A1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),xm.copy(i.boundingSphere),xm.applyMatrix4(r),xm.radius+=s,!1===e.ray.intersectsSphere(xm))return;nP.copy(r).invert(),R1.copy(e.ray).applyMatrix4(nP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),_=Math.min(c.count,o.start+o.count);p<_;p++){const m=c.getX(p);Sm.fromBufferAttribute(d,m),rP(Sm,m,l,r,e,t,this)}else for(let p=Math.max(0,o.start),_=Math.min(d.count,o.start+o.count);p<_;p++)Sm.fromBufferAttribute(d,p),rP(Sm,p,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function rP(n,e,t,i,r,s,o){const a=R1.distanceSqToPoint(n);if(a<t){const l=new T;R1.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class km extends ao{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Re(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Re(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new na,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class To extends km{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ne(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ai(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Re(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Re(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Re(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function nc(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function bP(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function J1(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function Z1(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class _f{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class KK extends _f{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Nu,endingEnd:Nu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Iu:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case Iu:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),_=p*p,m=_*p,g=-h*m+2*h*_-h*p,v=(1+h)*m+(-1.5-2*h)*_+(-.5+h)*p+1,y=(-1-f)*m+(1.5+f)*_+.5*p,b=f*m-f*_;for(let E=0;E!==a;++E)s[E]=g*o[u+E]+v*o[c+E]+y*o[l+E]+b*o[d+E];return s}}class wP extends _f{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class JK extends _f{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Do{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=nc(t,this.TimeBufferType),this.values=nc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:nc(e.times,Array),values:nc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new JK(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new wP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new KK(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Yh:t=this.InterpolantFactoryMethodDiscrete;break;case Ru:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yh;case this.InterpolantFactoryMethodLinear:return Ru;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&function vP(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const _=t[d+p];if(_!==t[h+p]||_!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Do.prototype.TimeBufferType=Float32Array,Do.prototype.ValueBufferType=Float32Array,Do.prototype.DefaultInterpolation=Ru;class pd extends Do{}pd.prototype.ValueTypeName="bool",pd.prototype.ValueBufferType=Array,pd.prototype.DefaultInterpolation=Yh,pd.prototype.InterpolantFactoryMethodLinear=void 0,pd.prototype.InterpolantFactoryMethodSmooth=void 0;class MP extends Do{}MP.prototype.ValueTypeName="color";class gd extends Do{}gd.prototype.ValueTypeName="number";class ZK extends _f{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)sr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class ic extends Do{InterpolantFactoryMethodLinear(e){return new ZK(this.times,this.values,this.getValueSize(),e)}}ic.prototype.ValueTypeName="quaternion",ic.prototype.DefaultInterpolation=Ru,ic.prototype.InterpolantFactoryMethodSmooth=void 0;class md extends Do{}md.prototype.ValueTypeName="string",md.prototype.ValueBufferType=Array,md.prototype.DefaultInterpolation=Yh,md.prototype.InterpolantFactoryMethodLinear=void 0,md.prototype.InterpolantFactoryMethodSmooth=void 0;class _d extends Do{}_d.prototype.ValueTypeName="vector";class yd{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=rs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(eJ(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Do.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=bP(l);l=J1(l,1,u),c=J1(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new gd(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,p,_){if(0!==f.length){const m=[],g=[];Z1(f,m,g,p),0!==m.length&&_.push(new d(h,m,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let _=0;_<h[p].morphTargets.length;_++)f[h[p].morphTargets[_]]=-1;for(const _ in f){const m=[],g=[];for(let v=0;v!==h[p].morphTargets.length;++v){const y=h[p];m.push(y.time),g.push(y.morphTarget===_?1:0)}r.push(new gd(".morphTargetInfluence["+_+"]",m,g))}l=f.length*o}else{const f=".bones["+t[d].name+"]";i(_d,f+".position",h,"pos",r),i(ic,f+".quaternion",h,"rot",r),i(_d,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function eJ(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function QK(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gd;case"vector":case"vector2":case"vector3":case"vector4":return _d;case"color":return MP;case"quaternion":return ic;case"bool":case"boolean":return pd;case"string":return md}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];Z1(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ya={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class xP{constructor(e,t,i){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const tJ=new xP;let yf=(()=>{class n{constructor(t){this.manager=void 0!==t?t:tJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(s,o){r.load(t,s,i,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();const ca={};class nJ extends Error{constructor(e,t){super(e),this.response=t}}class Ao extends yf{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ya.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==ca[e])return void ca[e].push({onLoad:t,onProgress:i,onError:r});ca[e]=[],ca[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===c.body||void 0===c.body.getReader)return c;const u=ca[e],d=c.body.getReader(),h=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=h?parseInt(h):0,p=0!==f;let _=0;const m=new ReadableStream({start(g){!function v(){d.read().then(({done:y,value:b})=>{if(y)g.close();else{_+=b.byteLength;const E=new ProgressEvent("progress",{lengthComputable:p,loaded:_,total:f});for(let S=0,M=u.length;S<M;S++){const A=u[S];A.onProgress&&A.onProgress(E)}g.enqueue(b),v()}})}()}});return new Response(m)}throw new nJ(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{Ya.add(e,c);const u=ca[e];delete ca[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=ca[e];if(void 0===u)throw this.manager.itemError(e),c;delete ca[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Bm extends yf{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ya.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Jh("img");function l(){u(),Ya.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class SP extends yf{constructor(e){super(e)}load(e,t,i,r){const s=new Rs,o=new Bm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class Um extends $i{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Re(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const Q1=new nt,EP=new T,CP=new T;class ew{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ne(512,512),this.map=null,this.mapPass=null,this.matrix=new nt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new am,this._frameExtents=new ne(1,1),this._viewportCount=1,this._viewports=[new En(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;EP.setFromMatrixPosition(e.matrixWorld),t.position.copy(EP),CP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(CP),t.updateMatrixWorld(),Q1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Q1),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Q1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class rJ extends ew{constructor(){super(new Xi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Ou*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class TP extends Um{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy($i.DEFAULT_UP),this.updateMatrix(),this.target=new $i,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new rJ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const DP=new nt,vf=new T,tw=new T;class sJ extends ew{constructor(){super(new Xi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ne(4,2),this._viewportCount=6,this._viewports=[new En(2,1,1,1),new En(0,1,1,1),new En(3,1,1,1),new En(1,1,1,1),new En(3,0,1,1),new En(1,0,1,1)],this._cubeDirections=[new T(1,0,0),new T(-1,0,0),new T(0,0,1),new T(0,0,-1),new T(0,1,0),new T(0,-1,0)],this._cubeUps=[new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,0,1),new T(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),vf.setFromMatrixPosition(e.matrixWorld),i.position.copy(vf),tw.copy(i.position),tw.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(tw),i.updateMatrixWorld(),r.makeTranslation(-vf.x,-vf.y,-vf.z),DP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DP)}}class AP extends Um{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new sJ}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class oJ extends ew{constructor(){super(new cm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class RP extends Um{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy($i.DEFAULT_UP),this.updateMatrix(),this.target=new $i,this.shadow=new oJ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class NP extends Um{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class rc{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(i){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class fJ extends yf{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ya.get(e);if(void 0!==o)return s.manager.itemStart(e),o.then?void o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)}):(setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ya.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Ya.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ya.add(e,l),s.manager.itemStart(e)}}class kP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=BP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=BP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function BP(){return("undefined"==typeof performance?Date:performance).now()}class mJ{constructor(e,t,i){let r,s,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else o+=t,this._mixBufferRegion(i,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){sr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;sr.multiplyQuaternionsFlat(e,o,e,t,e,i),sr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const iw="\\[\\]\\.:\\/",_J=new RegExp("["+iw+"]","g"),rw="[^"+iw+"]",yJ="[^"+iw.replace("\\.","")+"]",xJ=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",rw)+/(WCOD+)?/.source.replace("WCOD",yJ)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",rw)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",rw)+"$"),SJ=["material","materials","bones","map"];class EJ{constructor(e,t,i){const r=i||On.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let On=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(_J,"")}static parseTrackName(t){const i=xJ.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==SJ.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=EJ,n})();On.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},On.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},On.prototype.GetterByBindingType=[On.prototype._getValue_direct,On.prototype._getValue_array,On.prototype._getValue_arrayElement,On.prototype._getValue_toArray],On.prototype.SetterByBindingTypeAndVersioning=[[On.prototype._setValue_direct,On.prototype._setValue_direct_setNeedsUpdate,On.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[On.prototype._setValue_array,On.prototype._setValue_array_setNeedsUpdate,On.prototype._setValue_array_setMatrixWorldNeedsUpdate],[On.prototype._setValue_arrayElement,On.prototype._setValue_arrayElement_setNeedsUpdate,On.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[On.prototype._setValue_fromArray,On.prototype._setValue_fromArray_setNeedsUpdate,On.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class CJ{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Nu,endingEnd:Nu};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const l=(e-s)*i;l<0||0===i?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===i;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(2200===i){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Iu,r.endingEnd=Iu):(r.endingStart=e?this.zeroSlopeAtStart?Iu:Nu:2402,r.endingEnd=t?this.zeroSlopeAtEnd?Iu:Nu:2402)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const TJ=new Float32Array(1);class DJ extends Ua{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=r[d],f=h.name;let p=u[f];if(void 0!==p)++p.referenceCount,o[d]=p;else{if(p=o[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}p=new mJ(On.create(i,f,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new wP(new Float32Array(2),new Float32Array(2),1,TJ),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o="string"==typeof e?yd.findByName(r,e):e;const a=null!==o?o.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==l){const d=l.actionByRoot[s];if(void 0!==d&&d.blendMode===i)return d;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new CJ(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s="string"==typeof e?yd.findByName(i,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class WP{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ai(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"162"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="162");const eO={type:"change"},lw={type:"start"},tO={type:"end"},qm=new zu,nO=new ja,NJ=Math.cos(70*TN_DEG2RAD);class IJ extends Ua{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new T,this.cursor=new T,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(I){I.addEventListener("keydown",st),this._domElementKeyEvents=I},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",st),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(eO),i.update(),s=r.NONE},this.update=function(){const I=new T,ce=(new sr).setFromUnitVectors(e.up,new T(0,1,0)),Ke=ce.clone().invert(),B=new T,ve=new sr,X=new T,_e=2*Math.PI;return function(Kt=null){const wn=i.object.position;I.copy(wn).sub(i.target),I.applyQuaternion(ce),a.setFromVector3(I),i.autoRotate&&s===r.NONE&&Q(function w(I){return null!==I?2*Math.PI/60*i.autoRotateSpeed*I:2*Math.PI/60/60*i.autoRotateSpeed}(Kt)),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Rn=i.minAzimuthAngle,hi=i.maxAzimuthAngle;isFinite(Rn)&&isFinite(hi)&&(Rn<-Math.PI?Rn+=_e:Rn>Math.PI&&(Rn-=_e),hi<-Math.PI?hi+=_e:hi>Math.PI&&(hi-=_e),a.theta=Rn<=hi?Math.max(Rn,Math.min(hi,a.theta)):a.theta>(Rn+hi)/2?Math.max(Rn,a.theta):Math.min(hi,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),i.target.sub(i.cursor),i.target.clampLength(i.minTargetRadius,i.maxTargetRadius),i.target.add(i.cursor);let fn=!1;if(i.zoomToCursor&&S||i.object.isOrthographicCamera)a.radius=le(a.radius);else{const Vn=a.radius;a.radius=le(a.radius*c),fn=Vn!=a.radius}if(I.setFromSpherical(a),I.applyQuaternion(Ke),wn.copy(i.target).add(I),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),i.zoomToCursor&&S){let Vn=null;if(i.object.isPerspectiveCamera){const br=I.length();Vn=le(br*c);const Sc=br-Vn;i.object.position.addScaledVector(b,Sc),i.object.updateMatrixWorld(),fn=!!Sc}else if(i.object.isOrthographicCamera){const br=new T(E.x,E.y,0);br.unproject(i.object);const Sc=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),fn=Sc!==i.object.zoom;const $_=new T(E.x,E.y,0);$_.unproject(i.object),i.object.position.sub($_).add(br),i.object.updateMatrixWorld(),Vn=I.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;null!==Vn&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Vn).add(i.object.position):(qm.origin.copy(i.object.position),qm.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(qm.direction))<NJ?e.lookAt(i.target):(nO.setFromNormalAndCoplanarPoint(i.object.up,i.target),qm.intersectPlane(nO,i.target))))}else if(i.object.isOrthographicCamera){const Vn=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),Vn!==i.object.zoom&&(i.object.updateProjectionMatrix(),fn=!0)}return c=1,S=!1,!!(fn||B.distanceToSquared(i.object.position)>o||8*(1-ve.dot(i.object.quaternion))>o||X.distanceToSquared(i.target)>o)&&(i.dispatchEvent(eO),B.copy(i.object.position),ve.copy(i.object.quaternion),X.copy(i.target),!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",yt),i.domElement.removeEventListener("pointerdown",je),i.domElement.removeEventListener("pointercancel",N),i.domElement.removeEventListener("wheel",ie),i.domElement.removeEventListener("pointermove",Lt),i.domElement.removeEventListener("pointerup",N),i.domElement.getRootNode().removeEventListener("keydown",ge,{capture:!0}),null!==i._domElementKeyEvents&&(i._domElementKeyEvents.removeEventListener("keydown",st),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new WP,l=new WP;let c=1;const u=new T,d=new ne,h=new ne,f=new ne,p=new ne,_=new ne,m=new ne,g=new ne,v=new ne,y=new ne,b=new T,E=new ne;let S=!1;const M=[],A={};let U=!1;function R(I){const ce=Math.abs(.01*I);return Math.pow(.95,i.zoomSpeed*ce)}function Q(I){l.theta-=I}function Z(I){l.phi-=I}const F=function(){const I=new T;return function(Ke,B){I.setFromMatrixColumn(B,0),I.multiplyScalar(-Ke),u.add(I)}}(),K=function(){const I=new T;return function(Ke,B){!0===i.screenSpacePanning?I.setFromMatrixColumn(B,1):(I.setFromMatrixColumn(B,0),I.crossVectors(i.object.up,I)),I.multiplyScalar(Ke),u.add(I)}}(),L=function(){const I=new T;return function(Ke,B){const ve=i.domElement;if(i.object.isPerspectiveCamera){I.copy(i.object.position).sub(i.target);let _e=I.length();_e*=Math.tan(i.object.fov/2*Math.PI/180),F(2*Ke*_e/ve.clientHeight,i.object.matrix),K(2*B*_e/ve.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(F(Ke*(i.object.right-i.object.left)/i.object.zoom/ve.clientWidth,i.object.matrix),K(B*(i.object.top-i.object.bottom)/i.object.zoom/ve.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function V(I){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c/=I:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function H(I){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c*=I:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function $(I,ce){if(!i.zoomToCursor)return;S=!0;const Ke=i.domElement.getBoundingClientRect(),ve=ce-Ke.top,_e=Ke.height;E.x=(I-Ke.left)/Ke.width*2-1,E.y=-ve/_e*2+1,b.set(E.x,E.y,1).unproject(i.object).sub(i.object.position).normalize()}function le(I){return Math.max(i.minDistance,Math.min(i.maxDistance,I))}function he(I){d.set(I.clientX,I.clientY)}function Xe(I){p.set(I.clientX,I.clientY)}function De(I){if(1===M.length)d.set(I.pageX,I.pageY);else{const ce=qe(I);d.set(.5*(I.pageX+ce.x),.5*(I.pageY+ce.y))}}function Ze(I){if(1===M.length)p.set(I.pageX,I.pageY);else{const ce=qe(I);p.set(.5*(I.pageX+ce.x),.5*(I.pageY+ce.y))}}function We(I){const ce=qe(I),Ke=I.pageX-ce.x,B=I.pageY-ce.y,ve=Math.sqrt(Ke*Ke+B*B);g.set(0,ve)}function se(I){if(1==M.length)h.set(I.pageX,I.pageY);else{const Ke=qe(I);h.set(.5*(I.pageX+Ke.x),.5*(I.pageY+Ke.y))}f.subVectors(h,d).multiplyScalar(i.rotateSpeed);const ce=i.domElement;Q(2*Math.PI*f.x/ce.clientHeight),Z(2*Math.PI*f.y/ce.clientHeight),d.copy(h)}function be(I){if(1===M.length)_.set(I.pageX,I.pageY);else{const ce=qe(I);_.set(.5*(I.pageX+ce.x),.5*(I.pageY+ce.y))}m.subVectors(_,p).multiplyScalar(i.panSpeed),L(m.x,m.y),p.copy(_)}function ue(I){const ce=qe(I),Ke=I.pageX-ce.x,B=I.pageY-ce.y,ve=Math.sqrt(Ke*Ke+B*B);v.set(0,ve),y.set(0,Math.pow(v.y/g.y,i.zoomSpeed)),V(y.y),g.copy(v),$(.5*(I.pageX+ce.x),.5*(I.pageY+ce.y))}function je(I){!1!==i.enabled&&(0===M.length&&(i.domElement.setPointerCapture(I.pointerId),i.domElement.addEventListener("pointermove",Lt),i.domElement.addEventListener("pointerup",N)),!function jt(I){for(let ce=0;ce<M.length;ce++)if(M[ce]==I.pointerId)return!0;return!1}(I)&&(function we(I){M.push(I.pointerId)}(I),"touch"===I.pointerType?Ee(I):function x(I){let ce;switch(I.button){case 0:ce=i.mouseButtons.LEFT;break;case 1:ce=i.mouseButtons.MIDDLE;break;case 2:ce=i.mouseButtons.RIGHT;break;default:ce=-1}switch(ce){case 1:if(!1===i.enableZoom)return;(function Me(I){$(I.clientX,I.clientX),g.set(I.clientX,I.clientY)})(I),s=r.DOLLY;break;case 0:if(I.ctrlKey||I.metaKey||I.shiftKey){if(!1===i.enablePan)return;Xe(I),s=r.PAN}else{if(!1===i.enableRotate)return;he(I),s=r.ROTATE}break;case 2:if(I.ctrlKey||I.metaKey||I.shiftKey){if(!1===i.enableRotate)return;he(I),s=r.ROTATE}else{if(!1===i.enablePan)return;Xe(I),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(lw)}(I)))}function Lt(I){!1!==i.enabled&&("touch"===I.pointerType?function Te(I){switch(rt(I),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;se(I),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;be(I),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Ve(I){i.enableZoom&&ue(I),i.enablePan&&be(I)})(I),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Be(I){i.enableZoom&&ue(I),i.enableRotate&&se(I)})(I),i.update();break;default:s=r.NONE}}(I):function te(I){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function z(I){h.set(I.clientX,I.clientY),f.subVectors(h,d).multiplyScalar(i.rotateSpeed);const ce=i.domElement;Q(2*Math.PI*f.x/ce.clientHeight),Z(2*Math.PI*f.y/ce.clientHeight),d.copy(h),i.update()}(I);break;case r.DOLLY:if(!1===i.enableZoom)return;!function pe(I){v.set(I.clientX,I.clientY),y.subVectors(v,g),y.y>0?V(R(y.y)):y.y<0&&H(R(y.y)),g.copy(v),i.update()}(I);break;case r.PAN:if(!1===i.enablePan)return;!function Se(I){_.set(I.clientX,I.clientY),m.subVectors(_,p).multiplyScalar(i.panSpeed),L(m.x,m.y),p.copy(_),i.update()}(I)}}(I))}function N(I){switch(function di(I){delete A[I.pointerId];for(let ce=0;ce<M.length;ce++)if(M[ce]==I.pointerId)return void M.splice(ce,1)}(I),M.length){case 0:i.domElement.releasePointerCapture(I.pointerId),i.domElement.removeEventListener("pointermove",Lt),i.domElement.removeEventListener("pointerup",N),i.dispatchEvent(tO),s=r.NONE;break;case 1:const ce=M[0],Ke=A[ce];Ee({pointerId:ce,pageX:Ke.x,pageY:Ke.y})}}function ie(I){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(I.preventDefault(),i.dispatchEvent(lw),function Ne(I){$(I.clientX,I.clientY),I.deltaY<0?H(R(I.deltaY)):I.deltaY>0&&V(R(I.deltaY)),i.update()}(function me(I){const Ke={clientX:I.clientX,clientY:I.clientY,deltaY:I.deltaY};switch(I.deltaMode){case 1:Ke.deltaY*=16;break;case 2:Ke.deltaY*=100}return I.ctrlKey&&!U&&(Ke.deltaY*=10),Ke}(I)),i.dispatchEvent(tO))}function ge(I){"Control"===I.key&&(U=!0,i.domElement.getRootNode().addEventListener("keyup",_t,{passive:!0,capture:!0}))}function _t(I){"Control"===I.key&&(U=!1,i.domElement.getRootNode().removeEventListener("keyup",_t,{passive:!0,capture:!0}))}function st(I){!1===i.enabled||!1===i.enablePan||function Oe(I){let ce=!1;switch(I.code){case i.keys.UP:I.ctrlKey||I.metaKey||I.shiftKey?Z(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(0,i.keyPanSpeed),ce=!0;break;case i.keys.BOTTOM:I.ctrlKey||I.metaKey||I.shiftKey?Z(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(0,-i.keyPanSpeed),ce=!0;break;case i.keys.LEFT:I.ctrlKey||I.metaKey||I.shiftKey?Q(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(i.keyPanSpeed,0),ce=!0;break;case i.keys.RIGHT:I.ctrlKey||I.metaKey||I.shiftKey?Q(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(-i.keyPanSpeed,0),ce=!0}ce&&(I.preventDefault(),i.update())}(I)}function Ee(I){switch(rt(I),M.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;De(I),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;Ze(I),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function P(I){i.enableZoom&&We(I),i.enablePan&&Ze(I)})(I),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function xe(I){i.enableZoom&&We(I),i.enableRotate&&De(I)})(I),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(lw)}function yt(I){!1!==i.enabled&&I.preventDefault()}function rt(I){let ce=A[I.pointerId];void 0===ce&&(ce=new ne,A[I.pointerId]=ce),ce.set(I.pageX,I.pageY)}function qe(I){return A[I.pointerId===M[0]?M[1]:M[0]]}i.domElement.addEventListener("contextmenu",yt),i.domElement.addEventListener("pointerdown",je),i.domElement.addEventListener("pointercancel",N),i.domElement.addEventListener("wheel",ie,{passive:!1}),i.domElement.getRootNode().addEventListener("keydown",ge,{passive:!0,capture:!0}),this.update()}}function rO(n,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(2===e||1===e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class PJ extends yf{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new BJ(t)}),this.register(function(t){return new qJ(t)}),this.register(function(t){return new XJ(t)}),this.register(function(t){return new YJ(t)}),this.register(function(t){return new VJ(t)}),this.register(function(t){return new HJ(t)}),this.register(function(t){return new zJ(t)}),this.register(function(t){return new GJ(t)}),this.register(function(t){return new kJ(t)}),this.register(function(t){return new WJ(t)}),this.register(function(t){return new UJ(t)}),this.register(function(t){return new jJ(t)}),this.register(function(t){return new $J(t)}),this.register(function(t){return new LJ(t)}),this.register(function(t){return new KJ(t)}),this.register(function(t){return new JJ(t)})}load(e,t,i,r){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const c=rc.extractUrlBase(e);o=rc.resolveURL(c,this.path)}else o=rc.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ao(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={},l=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===sO){try{o[Qt.KHR_BINARY_GLTF]=new ZJ(e)}catch(d){return void(r&&r(d))}s=JSON.parse(o[Qt.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new dZ(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(d){case Qt.KHR_MATERIALS_UNLIT:o[d]=new FJ;break;case Qt.KHR_DRACO_MESH_COMPRESSION:o[d]=new QJ(s,this.dracoLoader);break;case Qt.KHR_TEXTURE_TRANSFORM:o[d]=new eZ;break;case Qt.KHR_MESH_QUANTIZATION:o[d]=new tZ;break;default:h.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function OJ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Qt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class LJ{constructor(e){this.parser=e,this.name=Qt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Re(16777215);void 0!==l.color&&u.setRGB(l.color[0],l.color[1],l.color[2],rr);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new RP(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new AP(u),c.distance=d;break;case"spot":c=new TP(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Za(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class FJ{constructor(){this.name=Qt.KHR_MATERIALS_UNLIT}getMaterialType(){return os}extendParams(e,t,i){const r=[];e.color=new Re(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],rr),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,gr))}return Promise.all(r)}}class kJ{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class BJ{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?To:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ne(a,a)}return Promise.all(s)}}class UJ{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?To:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class VJ{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?To:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Re(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],rr)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,gr)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class HJ{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?To:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class zJ{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?To:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new Re).setRGB(a[0],a[1],a[2],rr),Promise.all(s)}}class GJ{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?To:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class WJ{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?To:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new Re).setRGB(a[0],a[1],a[2],rr),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,gr)),Promise.all(s)}}class $J{constructor(e){this.parser=e,this.name=Qt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?To:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class jJ{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?To:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class qJ{constructor(e){this.parser=e,this.name=Qt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class XJ{constructor(e){this.parser=e,this.name=Qt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class YJ{constructor(e){this.parser=e,this.name=Qt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class KJ{constructor(e){this.name=Qt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,d=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})})}return null}}class JJ{constructor(e){this.name=Qt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Ps.TRIANGLES&&c.mode!==Ps.TRIANGLE_STRIP&&c.mode!==Ps.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],h=c[0].count,f=[];for(const p of d){const _=new nt,m=new T,g=new sr,v=new T(1,1,1),y=new qI(p.geometry,p.material,h);for(let b=0;b<h;b++)l.TRANSLATION&&m.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,b),l.SCALE&&v.fromBufferAttribute(l.SCALE,b),y.setMatrixAt(b,_.compose(m,g,v));for(const b in l)if("_COLOR_0"===b){const E=l[b];y.instanceColor=new cd(E.array,E.itemSize,E.normalized)}else"TRANSLATION"!==b&&"ROTATION"!==b&&"SCALE"!==b&&p.geometry.setAttribute(b,l[b]);$i.prototype.copy.call(y,p),this.parser.assignFinalMaterial(y),f.push(y)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}}const sO="glTF";class ZJ{constructor(e){this.name=Qt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==sO)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(e,12+o,a);this.content=i.decode(c)}else if(5130562===l){const c=12+o;this.body=e.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class QJ{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Qt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=dw[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=dw[u]||u.toLowerCase();if(void 0!==o[u]){const h=i.accessors[e.attributes[u]];c[d]=vd[h.componentType].name,l[d]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,h){r.decodeDracoFile(u,function(f){for(const p in f.attributes){const _=f.attributes[p],m=l[p];void 0!==m&&(_.normalized=m)}d(f)},a,c,rr,h)})})}}class eZ{constructor(){this.name=Qt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class tZ{constructor(){this.name=Qt.KHR_MESH_QUANTIZATION}}class aO extends _f{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,u=r-t,d=(i-t)/u,h=d*d,f=h*d,p=e*c,_=p-c,m=-2*f+3*h,g=f-h,v=1-m,y=g-h+d;for(let b=0;b!==a;b++)s[b]=v*o[_+b+a]+y*(o[_+b+l]*u)+m*o[p+b+a]+g*(o[p+b]*u);return s}}const nZ=new sr;class iZ extends aO{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return nZ.fromArray(s).normalize().toArray(s),s}}const Ps={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},vd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},lO={9728:gi,9729:Wn,9984:1004,9985:1007,9986:Fl,9987:io},cO={33071:pr,33648:1002,10497:Ll},uw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},dw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ja={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rZ={CUBICSPLINE:void 0,LINEAR:Ru,STEP:Yh};function sZ(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new km({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function uc(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Za(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function aZ(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function lZ(n){let e;const t=n.extensions&&n.extensions[Qt.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+fw(t.attributes):n.indices+":"+fw(n.attributes)+":"+n.mode,void 0!==n.targets)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+fw(n.targets[i]);return e}function fw(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function pw(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const uZ=new nt;class dZ{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new OJ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;"undefined"!=typeof navigator&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader="undefined"==typeof createImageBitmap||i||r&&s<98?new SP(this.options.manager):new fJ(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ao(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return uc(s,a,r),Za(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Qt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(rc.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=uw[r.type],l=!0===r.normalized,c=new(0,vd[r.componentType])(r.count*o);return Promise.resolve(new $n(c,o,l))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=uw[r.type],c=vd[r.componentType],u=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let _,m;if(f&&f!==u*l){const g=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let y=t.cache.get(v);y||(_=new c(a,g*f,r.count*f/u),y=new b1(_,f/u),t.cache.add(v,y)),m=new Kl(y,l,h%f/u,p)}else _=null===a?new c(r.count*l):new c(a,h,r.count*l),m=new $n(_,l,p);if(void 0!==r.sparse){const b=r.sparse.values.byteOffset||0,E=new(0,vd[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*uw.SCALAR),S=new c(o[2],b,r.sparse.count*l);null!==a&&(m=new $n(m.array.slice(),m.itemSize,m.normalized));for(let M=0,A=E.length;M<A;M++){const U=E[M];if(m.setX(U,S[M*l]),l>=2&&m.setY(U,S[M*l+1]),l>=3&&m.setZ(U,S[M*l+2]),l>=4&&m.setW(U,S[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",""===u.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=lO[h.magFilter]||Wn,u.minFilter=lO[h.minFilter]||io,u.wrapS=cO[h.wrapS]||Ll,u.wrapT=cO[h.wrapT]||Ll,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let p=h;!0===t.isImageBitmapLoader&&(p=function(_){const m=new Rs(_);m.needsUpdate=!0,h(m)}),t.load(rc.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return!0===c&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||function cZ(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((o=o.clone()).channel=i.texCoord),s.extensions[Qt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Qt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Qt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new A1,ao.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new qr,ao.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return km}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},c=[];if((s.extensions||{})[Qt.KHR_MATERIALS_UNLIT]){const d=r[Qt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Re(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],rr),a.opacity=h[3]}void 0!==d.baseColorTexture&&c.push(t.assignTexture(a,"map",d.baseColorTexture,gr)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==os&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ne(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(void 0!==s.occlusionTexture&&o!==os&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==os){const d=s.emissiveFactor;a.emissive=(new Re).setRGB(d[0],d[1],d[2],rr)}return void 0!==s.emissiveTexture&&o!==os&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,gr)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Za(d,s),t.associations.set(d,{materials:e}),s.extensions&&uc(r,d,s),d})}createUniqueName(e){const t=On.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Qt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return uO(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=lZ(c),d=r[u];if(d)o.push(d.promise);else{let h;h=c.extensions&&c.extensions[Qt.KHR_DRACO_MESH_COMPRESSION]?s(c):uO(new Wt,c,t),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?sZ(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,p=u.length;f<p;f++){const _=u[f],m=o[f];let g;const v=c[f];if(m.mode===Ps.TRIANGLES||m.mode===Ps.TRIANGLE_STRIP||m.mode===Ps.TRIANGLE_FAN||void 0===m.mode)g=!0===s.isSkinnedMesh?new GI(_,v):new qi(_,v),!0===g.isSkinnedMesh&&g.normalizeSkinWeights(),m.mode===Ps.TRIANGLE_STRIP?g.geometry=rO(g.geometry,1):m.mode===Ps.TRIANGLE_FAN&&(g.geometry=rO(g.geometry,2));else if(m.mode===Ps.LINES)g=new D1(_,v);else if(m.mode===Ps.LINE_STRIP)g=new Ql(_,v);else if(m.mode===Ps.LINE_LOOP)g=new tP(_,v);else{if(m.mode!==Ps.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);g=new iP(_,v)}Object.keys(g.geometry.morphAttributes).length>0&&aZ(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Za(g,s),m.extensions&&uc(r,g,m),t.assignFinalMaterial(g),d.push(g)}for(let f=0,p=d.length;f<p;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(1===d.length)return s.extensions&&uc(r,d[0],s),d[0];const h=new qa;s.extensions&&uc(r,h,s),t.associations.set(h,{meshes:e});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new Xi(TN_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new cm(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Za(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const h=new nt;null!==s&&h.fromArray(s.array,16*c),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new ym(a,l)})}loadAnimation(e){const i=this,r=this.json.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,h=r.channels.length;d<h;d++){const f=r.channels[d],p=r.samplers[f.sampler],_=f.target,m=_.node,g=void 0!==r.parameters?r.parameters[p.input]:p.input,v=void 0!==r.parameters?r.parameters[p.output]:p.output;void 0!==_.node&&(o.push(this.getDependency("node",m)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",v)),c.push(p),u.push(_))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const h=d[0],f=d[1],p=d[2],_=d[3],m=d[4],g=[];for(let v=0,y=h.length;v<y;v++){const b=h[v],E=f[v],S=p[v],M=_[v],A=m[v];if(void 0===b)continue;b.updateMatrix&&b.updateMatrix();const U=i._createAnimationTracks(b,E,S,M,A);if(U)for(let w=0;w<U.length;w++)g.push(U[w])}return new yd(s,void 0,g)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const i=this,r=this.json.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],h=c[2];null!==h&&u.traverse(function(f){!f.isSkinnedMesh||f.bind(h,uZ)});for(let f=0,p=d.length;f<p;f++)u.add(d[f]);return u})}_loadNodeShallow(e){const i=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(u=!0===s.isBone?new S1:c.length>1?new qa:1===c.length?c[0]:new $i,u!==c[0])for(let d=0,h=c.length;d<h;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),Za(u,s),s.extensions&&uc(i,u,s),void 0!==s.matrix){const d=new nt;d.fromArray(s.matrix),u.applyMatrix4(d)}else void 0!==s.translation&&u.position.fromArray(s.translation),void 0!==s.rotation&&u.quaternion.fromArray(s.rotation),void 0!==s.scale&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new qa;i.name&&(s.name=r.createUniqueName(i.name)),Za(s,i),i.extensions&&uc(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);return r.associations=(u=>{const d=new Map;for(const[h,f]of r.associations)(h instanceof ao||h instanceof Rs)&&d.set(h,f);return u.traverse(h=>{const f=r.associations.get(h);null!=f&&d.set(h,f)}),d})(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];let c;switch(Ja[s.path]===Ja.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a),Ja[s.path]){case Ja.weights:c=gd;break;case Ja.rotation:c=ic;break;case Ja.position:case Ja.scale:c=_d;break;default:c=1===i.itemSize?gd:_d}const u=void 0!==r.interpolation?rZ[r.interpolation]:Ru,d=this._getArrayFromAccessor(i);for(let h=0,f=l.length;h<f;h++){const p=new c(l[h]+"."+Ja[s.path],t.array,d,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=pw(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){return new(this instanceof ic?iZ:aO)(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function uO(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=dw[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return yn.workingColorSpace!==rr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${yn.workingColorSpace}" not supported.`),Za(n,e),function hZ(n,e,t){const i=e.attributes,r=new Pr;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new T(l[0],l[1],l[2]),new T(c[0],c[1],c[2])),a.normalized){const u=pw(vd[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new T,l=new T;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(void 0!==d.POSITION){const h=t.json.accessors[d.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const _=pw(vd[h.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new _r;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function oZ(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(void 0!==d.POSITION&&(i=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const h=void 0!==d.POSITION?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(r){const h=void 0!==d.NORMAL?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=void 0!==d.COLOR_0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[1],h=c[2];return i&&(n.morphAttributes.position=c[0]),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}const bd=new T,dO=new nt,hO=new nt,fO=new T,pO=new T;class fZ{constructor(e={}){const t=this;let i,r,s,o;const a={objects:new WeakMap},l=void 0!==e.element?e.element:document.createElement("div");function c(f,p,_){if(f.isCSS2DObject){bd.setFromMatrixPosition(f.matrixWorld),bd.applyMatrix4(hO);const m=!0===f.visible&&bd.z>=-1&&bd.z<=1&&!0===f.layers.test(_.layers);if(f.element.style.display=!0===m?"":"none",!0===m){f.onBeforeRender(t,p,_);const v=f.element;v.style.transform="translate("+-100*f.center.x+"%,"+-100*f.center.y+"%)translate("+(bd.x*s+s)+"px,"+(-bd.y*o+o)+"px)",v.parentNode!==l&&l.appendChild(v),f.onAfterRender(t,p,_)}const g={distanceToCameraSquared:u(_,f)};a.objects.set(f,g)}for(let m=0,g=f.children.length;m<g;m++)c(f.children[m],p,_)}function u(f,p){return fO.setFromMatrixPosition(f.matrixWorld),pO.setFromMatrixPosition(p.matrixWorld),fO.distanceToSquared(pO)}l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:i,height:r}},this.render=function(f,p){!0===f.matrixWorldAutoUpdate&&f.updateMatrixWorld(),null===p.parent&&!0===p.matrixWorldAutoUpdate&&p.updateMatrixWorld(),dO.copy(p.matrixWorldInverse),hO.multiplyMatrices(p.projectionMatrix,dO),c(f,f,p),function h(f){const p=function d(f){const p=[];return f.traverse(function(_){_.isCSS2DObject&&p.push(_)}),p}(f).sort(function(m,g){return m.renderOrder!==g.renderOrder?g.renderOrder-m.renderOrder:a.objects.get(m).distanceToCameraSquared-a.objects.get(g).distanceToCameraSquared}),_=p.length;for(let m=0,g=p.length;m<g;m++)p[m].element.style.zIndex=_-m}(f)},this.setSize=function(f,p){i=f,r=p,s=i/2,o=r/2,l.style.width=f+"px",l.style.height=p+"px"}}}const pZ=["humanCanvas"];let gw=(()=>{class n{constructor(){this.animationName="idle",this.size=3,this.position=[-2,-2.5,0],this.texture_blue="/assets/texture_blue.png",this.clock=new kP,this.loader=new SP,this.material_blue=new os({map:this.loader.load(this.texture_blue)}),this.createControls=()=>{const t=new fZ;t.setSize(window.innerWidth,window.innerHeight),t.domElement.style.position="absolute",t.domElement.style.top="0px",document.body.appendChild(t.domElement),this.controls=new IJ(this.camera,t.domElement),this.controls.autoRotate=!1,this.controls.enableZoom=!1,this.controls.enablePan=!1,this.controls.minPolarAngle=Math.PI/2,this.controls.maxPolarAngle=Math.PI/2,this.controls.update()}}ngAfterViewInit(){this.initThree(),this.createHuman(),this.createControls(),this.animate()}initThree(){this.renderer=new NI({canvas:this.humanCanvasRef.nativeElement}),this.renderer.setSize(400,300),this.renderer.setClearColor(16777215,1),this.scene=new II,this.scene.background=new Re(661807),this.camera=new Xi(50,1,.1,1e3),this.camera.position.set(5,0,5)}createHuman(){const t=new PJ;var i=this.scene;t.load("/assets/Man.glb",r=>{r.scene.scale.setScalar(this.size),r.scene.position.set(this.position[0],this.position[1],this.position[2]);const s=r.animations;this.abcMixer=new DJ(r.scene);const a=yd.findByName(s,this.animationName);this.abcMixer.clipAction(a).play(),i.add(r.scene)},void 0,function(r){console.error(r)}),this.scene=i,this.ambientLight=new NP(16777215,4),this.scene.add(this.ambientLight)}animate(){requestAnimationFrame(()=>this.animate());const t=this.clock.getDelta();this.abcMixer&&this.abcMixer.update(t),this.renderer.render(this.scene,this.camera)}onWindowScroll(){const t=window.pageYOffset||document.documentElement.scrollTop;this.body.position.y=-t/100}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=tn({type:n,selectors:[["app-human-animation"]],viewQuery:function(t,i){if(1&t&&Vo(pZ,7),2&t){let r;un(r=dn())&&(i.humanCanvasRef=r.first)}},inputs:{animationName:"animationName",size:"size",position:"position"},decls:2,vars:0,consts:[["humanCanvas",""]],template:function(t,i){1&t&&Qe(0,"canvas",null,0)},styles:[""]}),n})();function Qa(n){return!!n&&(n instanceof wt||"function"==typeof n.lift&&"function"==typeof n.subscribe)}function Xm(n,e){return new wt(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=Zi(n[a]);let c=!1;t.add(l.subscribe({next:u=>{c||(c=!0,o++),r[a]=u},error:u=>t.error(u),complete:()=>{s++,(s===i||!c)&&(o===i&&t.next(e?e.reduce((u,d,h)=>(u[d]=r[h],u),{}):r),t.complete())}}))}})}class gZ extends $e{constructor(e,t){super()}schedule(e,t=0){return this}}class mO extends gZ{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let _O=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class ua extends _O{constructor(e,t=_O.now){super(e,()=>ua.delegate&&ua.delegate!==this?ua.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return ua.delegate&&ua.delegate!==this?ua.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const yZ=new class _Z extends ua{}(class mZ extends mO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}});function yO(n,e){return new wt(e?t=>e.schedule(vZ,0,{error:n,subscriber:t}):t=>t.error(n))}function vZ({error:n,subscriber:e}){e.error(n)}class Xr{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return Ge(this.value);case"E":return yO(this.error);case"C":return ag()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new Xr("N",e):Xr.undefinedValueNotification}static createError(e){return new Xr("E",void 0,e)}static createComplete(){return Xr.completeNotification}}Xr.completeNotification=new Xr("C"),Xr.undefinedValueNotification=new Xr("N",void 0);class Ym extends an{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Ym.dispatch,this.delay,new wZ(e,this.destination)))}_next(e){this.scheduleMessage(Xr.createNext(e))}_error(e){this.scheduleMessage(Xr.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Xr.createComplete()),this.unsubscribe()}}class wZ{constructor(e,t){this.notification=e,this.destination=t}}class MZ extends Ye{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new xZ(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let o;if(this.closed)throw new ke;if(this.isStopped||this.hasError?o=$e.EMPTY:(this.observers.push(e),o=new ln(this,e)),r&&e.add(e=new Ym(e,r)),t)for(let a=0;a<s&&!e.closed;a++)e.next(i[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(i[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||yZ).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(e-r[o].time<i);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&r.splice(0,o),r}}class xZ{constructor(e,t){this.time=e,this.value=t}}function vO(n,e,t){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},r=>r.lift(function SZ({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:i}){let r,o,s=0,a=!1,l=!1;return function(u){s++,(!r||a)&&(a=!1,r=new MZ(n,e,i),o=u.subscribe({next(h){r.next(h)},error(h){a=!0,r.error(h)},complete(){l=!0,o=void 0,r.complete()}}));const d=r.subscribe(this);this.add(()=>{s--,d.unsubscribe(),o&&!l&&t&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}class dc{}let bO=(()=>{class n extends dc{getTranslation(t){return Ge({})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zn(n)))(i||n)}}(),n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class mw{}let wO=(()=>{class n{handle(t){return t.key}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();function wf(n,e){if(n===e)return!0;if(null===n||null===e)return!1;if(n!=n&&e!=e)return!0;let r,s,o,t=typeof n;if(t==typeof e&&"object"==t){if(!Array.isArray(n)){if(Array.isArray(e))return!1;for(s in o=Object.create(null),n){if(!wf(n[s],e[s]))return!1;o[s]=!0}for(s in e)if(!(s in o)&&void 0!==e[s])return!1;return!0}if(!Array.isArray(e))return!1;if((r=n.length)==e.length){for(s=0;s<r;s++)if(!wf(n[s],e[s]))return!1;return!0}}return!1}function ls(n){return null!=n}function _w(n){return n&&"object"==typeof n&&!Array.isArray(n)}function MO(n,e){let t=Object.assign({},n);return _w(n)&&_w(e)&&Object.keys(e).forEach(i=>{_w(e[i])?i in n?t[i]=MO(n[i],e[i]):Object.assign(t,{[i]:e[i]}):Object.assign(t,{[i]:e[i]})}),t}class Km{}let xO=(()=>{class n extends Km{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(t,i){let r;return r="string"==typeof t?this.interpolateString(t,i):"function"==typeof t?this.interpolateFunction(t,i):t,r}getValue(t,i){let r="string"==typeof i?i.split("."):[i];i="";do{i+=r.shift(),!ls(t)||!ls(t[i])||"object"!=typeof t[i]&&r.length?r.length?i+=".":t=void 0:(t=t[i],i="")}while(r.length);return t}interpolateFunction(t,i){return t(i)}interpolateString(t,i){return i?t.replace(this.templateMatcher,(r,s)=>{let o=this.getValue(i,s);return ls(o)?o:r}):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zn(n)))(i||n)}}(),n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class Jm{}let SO=(()=>{class n extends Jm{compile(t,i){return t}compileTranslations(t,i){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zn(n)))(i||n)}}(),n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class EO{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new Ae,this.onLangChange=new Ae,this.onDefaultLangChange=new Ae}}const yw=new tt("USE_STORE"),vw=new tt("USE_DEFAULT_LANG"),bw=new tt("DEFAULT_LANGUAGE"),ww=new tt("USE_EXTEND");let hc=(()=>{class n{constructor(t,i,r,s,o,a=!0,l=!1,c=!1,u){this.store=t,this.currentLoader=i,this.compiler=r,this.parser=s,this.missingTranslationHandler=o,this.useDefaultLang=a,this.isolate=l,this.extend=c,this.pending=!1,this._onTranslationChange=new Ae,this._onLangChange=new Ae,this._onDefaultLangChange=new Ae,this._langs=[],this._translations={},this._translationRequests={},u&&this.setDefaultLang(u)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}setDefaultLang(t){if(t===this.defaultLang)return;let i=this.retrieveTranslations(t);void 0!==i?(null==this.defaultLang&&(this.defaultLang=t),i.pipe(An(1)).subscribe(r=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return Ge(this.translations[t]);let i=this.retrieveTranslations(t);return void 0!==i?(this.currentLang||(this.currentLang=t),i.pipe(An(1)).subscribe(r=>{this.changeLang(t)}),i):(this.changeLang(t),Ge(this.translations[t]))}retrieveTranslations(t){let i;return(void 0===this.translations[t]||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),i=this._translationRequests[t]),i}getTranslation(t){this.pending=!0;const i=this.currentLoader.getTranslation(t).pipe(vO(1),An(1));return this.loadingTranslations=i.pipe(ze(r=>this.compiler.compileTranslations(r,t)),vO(1),An(1)),this.loadingTranslations.subscribe({next:r=>{this.translations[t]=this.extend&&this.translations[t]?Object.assign(Object.assign({},r),this.translations[t]):r,this.updateLangs(),this.pending=!1},error:r=>{this.pending=!1}}),i}setTranslation(t,i,r=!1){i=this.compiler.compileTranslations(i,t),this.translations[t]=(r||this.extend)&&this.translations[t]?MO(this.translations[t],i):i,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(i=>{-1===this.langs.indexOf(i)&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,i,r){let s;if(i instanceof Array){let o={},a=!1;for(let l of i)o[l]=this.getParsedResult(t,l,r),Qa(o[l])&&(a=!0);return a?function gO(...n){if(1===n.length){const e=n[0];if(ot(e))return Xm(e,null);if(gn(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Xm(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Xm(n=1===n.length&&ot(n[0])?n[0]:n,null).pipe(ze(t=>e(...t)))}return Xm(n,null)}(i.map(c=>Qa(o[c])?o[c]:Ge(o[c]))).pipe(ze(c=>{let u={};return c.forEach((d,h)=>{u[i[h]]=d}),u})):o}if(t&&(s=this.parser.interpolate(this.parser.getValue(t,i),r)),void 0===s&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),r)),void 0===s){let o={key:i,translateService:this};void 0!==r&&(o.interpolateParams=r),s=this.missingTranslationHandler.handle(o)}return void 0!==s?s:i}get(t,i){if(!ls(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(Tl(r=>Qa(r=this.getParsedResult(r,t,i))?r:Ge(r)));{let r=this.getParsedResult(this.translations[this.currentLang],t,i);return Qa(r)?r:Ge(r)}}getStreamOnTranslationChange(t,i){if(!ls(t)||!t.length)throw new Error('Parameter "key" required');return El(Mu(()=>this.get(t,i)),this.onTranslationChange.pipe(si(r=>{const s=this.getParsedResult(r.translations,t,i);return"function"==typeof s.subscribe?s:Ge(s)})))}stream(t,i){if(!ls(t)||!t.length)throw new Error('Parameter "key" required');return El(Mu(()=>this.get(t,i)),this.onLangChange.pipe(si(r=>{const s=this.getParsedResult(r.translations,t,i);return Qa(s)?s:Ge(s)})))}instant(t,i){if(!ls(t)||!t.length)throw new Error('Parameter "key" required');let r=this.getParsedResult(this.translations[this.currentLang],t,i);if(Qa(r)){if(t instanceof Array){let s={};return t.forEach((o,a)=>{s[t[a]]=t[a]}),s}return t}return r}set(t,i,r=this.currentLang){this.translations[r][t]=this.compiler.compile(i,r),this.updateLangs(),this.onTranslationChange.emit({lang:r,translations:this.translations[r]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==t?(-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}}return n.\u0275fac=function(t){return new(t||n)(q(EO),q(dc),q(Jm),q(Km),q(mw),q(vw),q(yw),q(ww),q(bw))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),wd=(()=>{class n{constructor(t,i){this.translate=t,this._ref=i,this.value=""}updateValue(t,i,r){let s=o=>{this.value=void 0!==o?o:t,this.lastKey=t,this._ref.markForCheck()};if(r){let o=this.translate.getParsedResult(r,t,i);Qa(o.subscribe)?o.subscribe(s):s(o)}this.translate.get(t,i).subscribe(s)}transform(t,...i){if(!t||!t.length)return t;if(wf(t,this.lastKey)&&wf(i,this.lastParams))return this.value;let r;if(ls(i[0])&&i.length)if("string"==typeof i[0]&&i[0].length){let s=i[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{r=JSON.parse(s)}catch(o){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${i[0]}`)}}else"object"==typeof i[0]&&!Array.isArray(i[0])&&(r=i[0]);return this.lastKey=t,this.lastParams=i,this.updateValue(t,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(s=>{this.lastKey&&s.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,r,s.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(s=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,r,s.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,r))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return n.\u0275fac=function(t){return new(t||n)(D(hc,16),D(pi,16))},n.\u0275pipe=Er({name:"translate",type:n,pure:!1}),n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Mw=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[t.loader||{provide:dc,useClass:bO},t.compiler||{provide:Jm,useClass:SO},t.parser||{provide:Km,useClass:xO},t.missingTranslationHandler||{provide:mw,useClass:wO},EO,{provide:yw,useValue:t.isolate},{provide:vw,useValue:t.useDefaultLang},{provide:ww,useValue:t.extend},{provide:bw,useValue:t.defaultLanguage},hc]}}static forChild(t={}){return{ngModule:n,providers:[t.loader||{provide:dc,useClass:bO},t.compiler||{provide:Jm,useClass:SO},t.parser||{provide:Km,useClass:xO},t.missingTranslationHandler||{provide:mw,useClass:wO},{provide:yw,useValue:t.isolate},{provide:vw,useValue:t.useDefaultLang},{provide:ww,useValue:t.extend},{provide:bw,useValue:t.defaultLanguage},hc]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({}),n})();const EZ=function(n,e){return[n,e,0]};let CZ=(()=>{class n{constructor(t){this.analyticsService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(D(Il))},n.\u0275cmp=tn({type:n,selectors:[["app-banner"]],decls:23,vars:16,consts:[[1,"section","banner"],[1,"container"],[1,"section-box-banner"],[1,"content"],[2,"display","flex","justify-content","space-evenly","flex-direction","row"],[1,"banner-title"],[1,"banner-description"],[1,"mt-4",3,"innerHTML"],[3,"animationName","size","position"],[1,"div-btn-banner"],["href","mailto:andresjosehr@gmail.com","target","_black",1,"main-btn",3,"click"]],template:function(t,i){1&t&&(O(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1"),re(6),Ni(7,"translate"),k()(),O(8,"div",4)(9,"div")(10,"div",5)(11,"h2"),re(12,"Gaurav Khatwani"),k(),O(13,"h3"),re(14,"Full Stack Developer"),k()(),O(15,"div",6),Qe(16,"p",7),Ni(17,"translate"),k()(),Qe(18,"app-human-animation",8),k()(),O(19,"div",9)(20,"a",10),Pe("click",function(){return i.analyticsService.sendAnalyticEvent("click_send_mail","banner","email")}),re(21),Ni(22,"translate"),k()()()()()),2&t&&(W(1),j("@bannerTrigger",void 0),W(5),ii(Ii(7,7,"Banner.Pretitle")),W(10),j("innerHTML",Ii(17,9,"Banner.Description"),xa),W(2),j("animationName","Idle")("size",3)("position",Js(13,EZ,-2,-2.5)),W(3),Ri(" ",Ii(22,11,"Banner.ActionBtn")," "))},directives:[gw],pipes:[wd],styles:[".banner[_ngcontent-%COMP%]{min-height:100vh}.banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:table;height:100vh}.banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .section-box-banner[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .section-box-banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:98px}.banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .section-box-banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#64ffda;margin:0 0 20px 3px;font-size:16px;font-weight:400;font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace}.banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .section-box-banner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .section-box-banner[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:80px;line-height:1.1;margin:0;font-family:Calibre,San Francisco,SF Pro Text,-apple-system,system-ui,BlinkMacSystemFont,Roboto,Helvetica Neue,Segoe UI,Arial,sans-serif}.banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .section-box-banner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ccd6f6}.banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .section-box-banner[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#8892b0}.banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .section-box-banner[_ngcontent-%COMP%]   .banner-description[_ngcontent-%COMP%]{margin-bottom:70px}.banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .section-box-banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:500px}.banner[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .section-box-banner[_ngcontent-%COMP%]   .div-btn-banner[_ngcontent-%COMP%]{height:43px}"],data:{animation:[xb("bannerTrigger",[Tg(":enter",[Cg("1s",Kj([Ko({opacity:0,transform:"translateY(-50px)",offset:0}),Ko({opacity:.5,transform:"translateY(10px)",offset:.3}),Ko({opacity:1,transform:"translateY(0)",offset:1})]))])])]}}),n})();function TZ(n,e){1&n&&Qe(0,"p",16),2&n&&j("innerHTML",e.$implicit,xa)}let DZ=(()=>{class n{constructor(t){this.analyticsService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(D(Il))},n.\u0275cmp=tn({type:n,selectors:[["app-about"]],decls:42,vars:6,consts:[["id","about",1,"section","about"],[1,"container"],[1,"section-box"],["data-aos","fade-up",1,"about-title"],[1,"section-title"],[1,"n-section-title"],[1,"row"],[1,"col-12","col-md-6","mb-4","mb-md-0"],[1,"about-description"],["data-aos","fade-up","data-aos-duration","1000",3,"innerHTML",4,"ngFor","ngForOf"],["data-aos","fade-up",1,"skills-list"],["data-aos","fade-up","data-aos-duration","1000",1,"skill-element"],[1,"underline"],["data-aos","fade-up","data-aos-duration","1000",1,"col-12","col-md-6","mt-4","mt-md-0","text-center"],[1,"about-img-container"],["width","300","height","300","src","assets/images/me.jpg","alt","Jos\xe9 Andr\xe9s",1,"rounded",3,"click"],["data-aos","fade-up","data-aos-duration","1000",3,"innerHTML"]],template:function(t,i){1&t&&(O(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4)(5,"span",5),re(6,"01."),k(),re(7),Ni(8,"translate"),k()(),O(9,"div",6)(10,"div",7)(11,"div",8),ae(12,TZ,1,1,"p",9),Ni(13,"translate"),O(14,"ul",10)(15,"li",11)(16,"span",12),re(17,"Angular "),k()(),O(18,"li",11)(19,"span",12),re(20,"RxJS "),k()(),O(21,"li",11)(22,"span",12),re(23,"HTML & (S)CSS "),k()(),O(24,"li",11)(25,"span",12),re(26,"Laravel "),k()(),O(27,"li",11)(28,"span",12),re(29,"Express "),k()(),O(30,"li",11)(31,"span",12),re(32,"WordPress "),k()(),O(33,"li",11)(34,"span",12),re(35,"Jasmine / Karma (TDD) "),k()(),O(36,"li",11)(37,"span",12),re(38,"CI / CD "),k()()()()(),O(39,"div",13)(40,"div",14)(41,"img",15),Pe("click",function(){return i.analyticsService.sendAnalyticEvent("click_image","about","image")}),k()()()()()()()),2&t&&(W(7),Ri(" ",Ii(8,2,"AboutMe.Title")," "),W(5),j("ngForOf",Ii(13,4,"AboutMe.Paragraphs")))},directives:[zi],pipes:[wd],styles:['@charset "UTF-8";.about[_ngcontent-%COMP%]   .about-description[_ngcontent-%COMP%]{margin-top:30px;max-width:480px}.about[_ngcontent-%COMP%]   .about-img-container[_ngcontent-%COMP%]{width:324px;margin:auto}.about[_ngcontent-%COMP%]   .about-img-container[_ngcontent-%COMP%]:after{content:"";border:2px solid #64ffda;z-index:0;display:block;position:relative;width:300px;height:300px;border-radius:3px;bottom:290px;left:23px}.about[_ngcontent-%COMP%]   .about-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{z-index:2;position:relative}.about[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(140px,200px));overflow:hidden;padding:0;margin:20px 0 0;list-style:none}.about[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]{position:relative;margin-bottom:10px;padding-left:20px;font-size:13px;font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace;color:#8892b0}.about[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-bottom:5px}.about[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]:before{content:"\\25b9";position:absolute;left:0;color:#64ffda;font-size:14px;line-height:12px}@media (min-width: 992px) and (max-width: 1300px){.about-img-container[_ngcontent-%COMP%]{margin-left:auto;margin-right:0}}@media (max-width: 500px){.about[_ngcontent-%COMP%]   .about-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.about[_ngcontent-%COMP%]   .about-img-container[_ngcontent-%COMP%]:after{width:200px;height:200px;bottom:190px;left:74px}}@media (max-width: 500px){.about[_ngcontent-%COMP%]   .about-img-container[_ngcontent-%COMP%]{width:100%}.about[_ngcontent-%COMP%]   .about-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180px;height:180px}.about[_ngcontent-%COMP%]   .about-img-container[_ngcontent-%COMP%]:after{display:none}}']}),n})();const CO=new ua(mO);function TO(n){return!ot(n)&&n-parseFloat(n)+1>=0}function AZ(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}class RZ{call(e,t){return t.subscribe(new NZ(e))}}class NZ extends Ji{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let i=0;i<t&&!this.hasFirst;i++){let r=e[i],s=ei(this,r,r,i);this.subscriptions&&this.subscriptions.push(s),this.add(s)}this.observables=null}}notifyNext(e,t,i,r,s){if(!this.hasFirst){this.hasFirst=!0;for(let o=0;o<this.subscriptions.length;o++)if(o!==i){let a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)}}const da=new wt($o);function Zm(...n){const e=n[n.length-1];return"function"==typeof e&&n.pop(),Ld(n,void 0).lift(new IZ(e))}class IZ{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new PZ(e,this.resultSelector))}}class PZ extends an{constructor(e,t,i=Object.create(null)){super(e),this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:null,this.values=i}_next(e){const t=this.iterators;ot(e)?t.push(new LZ(e)):t.push("function"==typeof e[Ur]?new OZ(e[Ur]()):new FZ(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let i=0;i<t;i++){let r=e[i];r.stillUnsubscribed?this.destination.add(r.subscribe(r,i)):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,i=this.destination;for(let o=0;o<t;o++){let a=e[o];if("function"==typeof a.hasValue&&!a.hasValue())return}let r=!1;const s=[];for(let o=0;o<t;o++){let a=e[o],l=a.next();if(a.hasCompleted()&&(r=!0),l.done)return void i.complete();s.push(l.value)}this.resultSelector?this._tryresultSelector(s):i.next(s),r&&i.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class OZ{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return e&&e.done}}class LZ{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[Ur](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class FZ extends Ji{constructor(e,t,i){super(e),this.parent=t,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Ur](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e,t,i,r,s){this.buffer.push(t),this.parent.checkIterators()}subscribe(e,t){return ei(this,this.observable,this,t)}}function ci(n){return e=>e.lift(new BZ(n))}class BZ{constructor(e){this.notifier=e}call(e,t){const i=new UZ(e),r=ei(i,this.notifier);return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class UZ extends Ji{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,i,r,s){this.seenValue=!0,this.complete()}notifyComplete(){}}class VZ{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new HZ(e,this.compare,this.keySelector))}}class HZ extends an{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}function Sw(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new zZ(n,t))}}class zZ{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new GZ(e,this.observables,this.project))}}class GZ extends Ji{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let s=0;s<r;s++)this.toRespond.push(s);for(let s=0;s<r;s++){let o=t[s];this.add(ei(this,o,o,s))}}notifyNext(e,t,i,r,s){this.values[i]=t;const o=this.toRespond;if(o.length>0){const a=o.indexOf(i);-1!==a&&o.splice(a,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}function Qm(n,e=CO){const i=function WZ(n){return n instanceof Date&&!isNaN(+n)}(n)?+n-e.now():Math.abs(n);return r=>r.lift(new $Z(i,e))}class $Z{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new Ew(e,this.delay,this.scheduler))}}class Ew extends an{constructor(e,t,i){super(e),this.delay=t,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,i=t.queue,r=e.scheduler,s=e.destination;for(;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(s);if(i.length>0){const o=Math.max(0,i[0].time-r.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(Ew.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,i=new jZ(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(Xr.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(Xr.createComplete()),this.unsubscribe()}}class jZ{constructor(e,t){this.time=e,this.notification=t}}let _L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({}),n})();const Gw=new tt("NgModelWithFormControlWarning");let FL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[_L]]}),n})(),kL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[FL]}),n})(),GQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gw,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[FL]}),n})();const xd=["*"],Nee=["dialog"],Iee=["ngbNavOutlet",""];function Pee(n,e){}const Oee=function(n){return{$implicit:n}};function Lee(n,e){if(1&n&&(O(0,"div",2),ae(1,Pee,0,0,"ng-template",3),k()),2&n){const t=oe().$implicit,i=oe();j("item",t)("nav",i.nav)("role",i.paneRole),W(1),j("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",Da(5,Oee,t.active||i.isPanelTransitioning(t)))}}function Fee(n,e){if(1&n&&ae(0,Lee,2,7,"div",1),2&n){const t=e.$implicit,i=oe();j("ngIf",t.isPanelInDom()||i.isPanelTransitioning(t))}}function il(n){return null!=n}function Ed(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(n))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const VL={animation:!0,transitionTimerDelayMs:5};let Yi=(()=>{class n{constructor(){this.animation=VL.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({factory:function(){return new n},token:n,providedIn:"root"}),n})();const Gte=()=>{},{transitionTimerDelayMs:Wte}=VL,Tf=new Map,ki=(n,e,t,i)=>{let r=i.context||{};const s=Tf.get(e);if(s)switch(i.runningTransition){case"continue":return Go;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),Tf.delete(e)}const o=t(e,i.animation,r)||Gte;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>o()),Ge(void 0).pipe(function Vte(n){return e=>new wt(t=>e.subscribe(o=>n.run(()=>t.next(o)),o=>n.run(()=>t.error(o)),()=>n.run(()=>t.complete())))}(n));const a=new Ye,l=new Ye,c=a.pipe(function kZ(...n){return e=>El(e,Ge(...n))}(!0));Tf.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const u=function zte(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const d=oi(e,"transitionend").pipe(ci(c),hn(({target:f})=>f===e));(function AO(...n){if(1===n.length){if(!ot(n[0]))return n[0];n=n[0]}return Ld(n,void 0).lift(new RZ)})(function DO(n=0,e,t){let i=-1;return TO(e)?i=Number(e)<1?1:Number(e):xr(e)&&(t=e),xr(t)||(t=CO),new wt(r=>{const s=TO(n)?n:+n-t.now();return t.schedule(AZ,s,{index:0,period:i,subscriber:r})})}(u+Wte).pipe(ci(c)),d,l).pipe(ci(c)).subscribe(()=>{Tf.delete(e),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let $L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})(),jL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})(),XL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({}),n})(),JL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})(),ZL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({}),n})();var $t=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}($t||($t={})),$t))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const iF=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function rF(n){const e=Array.from(n.querySelectorAll(iF)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class Ene{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,t){return this.getAllStyles(e)[t]}isStaticPositioned(e){return"static"===(this.getStyle(e,"position")||"static")}offsetParent(e){let t=e.offsetParent||document.documentElement;for(;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}position(e,t=!0){let i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))i=e.getBoundingClientRect(),i={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{const s=this.offsetParent(e);i=this.offset(e,!1),s!==document.documentElement&&(r=this.offset(s,!1)),r.top+=s.clientTop,r.left+=s.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,t&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i}offset(e,t=!0){const i=e.getBoundingClientRect(),r_top=window.pageYOffset-document.documentElement.clientTop,r_left=window.pageXOffset-document.documentElement.clientLeft;let s={height:i.height||e.offsetHeight,width:i.width||e.offsetWidth,top:i.top+r_top,bottom:i.bottom+r_top,left:i.left+r_left,right:i.right+r_left};return t&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s}positionElements(e,t,i,r){const[s="top",o="center"]=i.split("-"),a=r?this.offset(e,!1):this.position(e,!1),l=this.getAllStyles(t),c=parseFloat(l.marginTop),u=parseFloat(l.marginBottom),d=parseFloat(l.marginLeft),h=parseFloat(l.marginRight);let f=0,p=0;switch(s){case"top":f=a.top-(t.offsetHeight+c+u);break;case"bottom":f=a.top+a.height;break;case"left":p=a.left-(t.offsetWidth+d+h);break;case"right":p=a.left+a.width}switch(o){case"top":f=a.top;break;case"bottom":f=a.top+a.height-t.offsetHeight;break;case"left":p=a.left;break;case"right":p=a.left+a.width-t.offsetWidth;break;case"center":"top"===s||"bottom"===s?p=a.left+a.width/2-t.offsetWidth/2:f=a.top+a.height/2-t.offsetHeight/2}t.style.transform=`translate(${Math.round(p)}px, ${Math.round(f)}px)`;const _=t.getBoundingClientRect(),m=document.documentElement,g=window.innerHeight||m.clientHeight,v=window.innerWidth||m.clientWidth;return _.left>=0&&_.top>=0&&_.right<=v&&_.bottom<=g}},new Date(1882,10,12),new Date(2174,10,25);let pF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi,kL]]}),n})(),lM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({}),n})(),yF=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(q(Yi))},n.\u0275prov=de({factory:function(){return new n(q(Yi))},token:n,providedIn:"root"}),n})();class vc{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}const Vne=()=>{};let vF=(()=>{class n{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):Vne}_adjustBody(t){const i=this._document.body,r=i.style.paddingRight,s=parseFloat(window.getComputedStyle(i)["padding-right"]);return i.style["padding-right"]=`${s+t}px`,()=>i.style["padding-right"]=r}_isPresent(t){const i=this._document.body.getBoundingClientRect();return window.innerWidth-(i.left+i.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const i=this._document.body;i.appendChild(t);const r=t.getBoundingClientRect().width-t.clientWidth;return i.removeChild(t),r}}return n.\u0275fac=function(t){return new(t||n)(q(rn))},n.\u0275prov=de({factory:function(){return new n(q(rn))},token:n,providedIn:"root"}),n})(),Hne=(()=>{class n{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(An(1)).subscribe(()=>{ki(this._zone,this._el.nativeElement,(t,i)=>{i&&Ed(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ki(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(D(Tt),D(Bt))},n.\u0275cmp=tn({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,i){2&t&&(Xs("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),ft("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();class bF{close(e){}dismiss(e){}}class zne{constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Ye,this._dismissed=new Ye,this._hidden=new Ye,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ci(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ci(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();t&&t.then?t.then(i=>{!1!==i&&this._dismiss(e)},()=>{}):!1!==t&&this._dismiss(e)}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Ge(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Zm(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Pf=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(Pf||(Pf={})),Pf))();let Gne=(()=>{class n{constructor(t,i,r){this._document=t,this._elRef=i,this._zone=r,this._closed$=new Ye,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Ae,this.shown=new Ye,this.hidden=new Ye}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(An(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=Zm(ki(this._zone,t,()=>t.classList.remove("show"),i),ki(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const t={animation:this.animation,runningTransition:"continue"};Zm(ki(this._zone,this._elRef.nativeElement,(s,o)=>{o&&Ed(s),s.classList.add("show")},t),ki(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{oi(t,"keydown").pipe(ci(this._closed$),hn(r=>r.which===$t.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Pf.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;oi(this._dialogEl.nativeElement,"mousedown").pipe(ci(this._closed$),Ct(()=>i=!1),si(()=>oi(t,"mouseup").pipe(ci(this._closed$),An(1))),hn(({target:r})=>t===r)).subscribe(()=>{i=!0}),oi(t,"click").pipe(ci(this._closed$)).subscribe(({target:r})=>{t===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(Pf.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),r=rF(t)[0];(i||r||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&ki(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(D(rn),D(Tt),D(Bt))},n.\u0275cmp=tn({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(1&t&&Vo(Nee,7),2&t){let r;un(r=dn())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,i){2&t&&(nn("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),Xs("modal d-block"+(i.windowClass?" "+i.windowClass:"")),ft("fade",i.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:xd,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,i){1&t&&(function yl(n){const e=fe()[16][6];if(!e.projection){const i=e.projection=qd(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?oH(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}(),O(0,"div",0,1)(2,"div",2),function vl(n,e=0,t){const i=fe(),r=sn(),s=Xc(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),yy(),64!=(64&s.flags)&&function aU(n,e,t){US(e[11],0,e,t,AS(n,t,e),PS(t.parent||e[6],t,e))}(r,i,s)}(3),k()()),2&t&&Xs("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),wF=(()=>{class n{constructor(t,i,r,s,o,a){this._applicationRef=t,this._injector=i,this._document=r,this._scrollBar=s,this._rendererFactory=o,this._ngZone=a,this._activeWindowCmptHasChanged=new Ye,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new Ae,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,i=!1)=>{n.runOutsideAngular(()=>{const r=oi(e,"focusin").pipe(ci(t),ze(s=>s.target));oi(e,"keydown").pipe(ci(t),hn(s=>s.which===$t.Tab),Sw(r)).subscribe(([s,o])=>{const[a,l]=rF(e);(o===a||o===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&oi(e,"click").pipe(ci(t),Sw(r),ze(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(t,i,r,s){const o=s.container instanceof HTMLElement?s.container:il(s.container)?this._document.querySelector(s.container):this._document.body,a=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.compensate(),c=()=>{this._modalRefs.length||(a.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!o)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);const u=new bF,d=this._getContentRef(t,s.injector||i,r,u,s);let h=!1!==s.backdrop?this._attachBackdrop(t,o):void 0,f=this._attachWindowComponent(t,o,d),p=new zne(f,d,h,s.beforeDismiss);return this._registerModalRef(p),this._registerWindowCmpt(f),p.result.then(l,l),p.result.then(c,c),u.close=_=>{p.close(_)},u.dismiss=_=>{p.dismiss(_)},this._applyWindowOptions(f.instance,s),1===this._modalRefs.length&&a.addClass(this._document.body,"modal-open"),h&&h.instance&&(this._applyBackdropOptions(h.instance,s),h.changeDetectorRef.detectChanges()),f.changeDetectorRef.detectChanges(),p}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,i){let s=t.resolveComponentFactory(Hne).create(this._injector);return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_attachWindowComponent(t,i,r){let o=t.resolveComponentFactory(Gne).create(this._injector,r.nodes);return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_applyWindowOptions(t,i){this._windowAttributes.forEach(r=>{il(i[r])&&(t[r]=i[r])})}_applyBackdropOptions(t,i){this._backdropAttributes.forEach(r=>{il(i[r])&&(t[r]=i[r])})}_getContentRef(t,i,r,s,o){return r?r instanceof Sn?this._createFromTemplateRef(r,s):function u_(n){return"string"==typeof n}(r)?this._createFromString(r):this._createFromComponent(t,i,r,s,o):new vc([])}_createFromTemplateRef(t,i){const s=t.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(s),new vc([s.rootNodes],s)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new vc([[i]])}_createFromComponent(t,i,r,s,o){const a=t.resolveComponentFactory(r),l=Gn.create({providers:[{provide:bF,useValue:s}],parent:i}),c=a.create(l),u=c.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new vc([[u]],c.hostView,c)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(q(Qs),q(Gn),q(rn),q(vF),q(wl),q(Bt))},n.\u0275prov=de({factory:function(){return new n(q(Qs),q(ah),q(rn),q(vF),q(wl),q(Bt))},token:n,providedIn:"root"}),n})(),Wne=(()=>{class n{constructor(t,i,r,s){this._moduleCFR=t,this._injector=i,this._modalStack=r,this._config=s}open(t,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(q(xs),q(Gn),q(wF),q(yF))},n.\u0275prov=de({factory:function(){return new n(q(xs),q(ah),q(wF),q(yF))},token:n,providedIn:"root"}),n})(),MF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({providers:[Wne]}),n})(),$ne=(()=>{class n{constructor(t){this._ngbConfig=t,this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(q(Yi))},n.\u0275prov=de({factory:function(){return new n(q(Yi))},token:n,providedIn:"root"}),n})();const xF=n=>il(n)&&""!==n;let jne=0,uM=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(D(Sn))},n.\u0275dir=ye({type:n,selectors:[["ng-template","ngbNavContent",""]]}),n})(),w_=(()=>{class n{constructor(t,i){this.elementRef=i,this.disabled=!1,this.shown=new Ae,this.hidden=new Ae,this._nav=t}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){il(this.domId)||(this.domId="ngb-nav-"+jne++)}get active(){return this._nav.activeId===this.id}get id(){return xF(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(il(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}}return n.\u0275fac=function(t){return new(t||n)(D(zt(()=>M_)),D(Tt))},n.\u0275dir=ye({type:n,selectors:[["","ngbNavItem",""]],contentQueries:function(t,i,r){if(1&t&&kn(r,uM,4),2&t){let s;un(s=dn())&&(i.contentTpls=s)}},hostVars:2,hostBindings:function(t,i){2&t&&ft("nav-item",!0)},inputs:{disabled:"disabled",domId:"domId",destroyOnHide:"destroyOnHide",_id:["ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"]}),n})(),M_=(()=>{class n{constructor(t,i,r,s){this.role=t,this._cd=r,this._document=s,this.activeIdChange=new Ae,this.shown=new Ae,this.hidden=new Ae,this.destroy$=new Ye,this.navItemChange$=new Ye,this.navChange=new Ae,this.animation=i.animation,this.destroyOnHide=i.destroyOnHide,this.orientation=i.orientation,this.roles=i.roles,this.keyboard=i.keyboard}click(t){t.disabled||this._updateActiveId(t.id)}onKeyDown(t){if("tablist"!==this.roles||!this.keyboard)return;const i=t.which,r=this.links.filter(a=>!a.navItem.disabled),{length:s}=r;let o=-1;if(r.forEach((a,l)=>{a.elRef.nativeElement===this._document.activeElement&&(o=l)}),s){switch(i){case $t.ArrowLeft:if("vertical"===this.orientation)return;o=(o-1+s)%s;break;case $t.ArrowRight:if("vertical"===this.orientation)return;o=(o+1)%s;break;case $t.ArrowDown:if("horizontal"===this.orientation)return;o=(o+1)%s;break;case $t.ArrowUp:if("horizontal"===this.orientation)return;o=(o-1+s)%s;break;case $t.Home:o=0;break;case $t.End:o=s-1}"changeWithArrows"===this.keyboard&&this.select(r[o].navItem.id),r[o].elRef.nativeElement.focus(),t.preventDefault()}}select(t){this._updateActiveId(t,!1)}ngAfterContentInit(){if(!il(this.activeId)){const t=this.items.first?this.items.first.id:null;xF(t)&&(this._updateActiveId(t,!1),this._cd.detectChanges())}this.items.changes.pipe(ci(this.destroy$)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:t}){t&&!t.firstChange&&this._notifyItemChanged(t.currentValue)}ngOnDestroy(){this.destroy$.next()}_updateActiveId(t,i=!0){if(this.activeId!==t){let r=!1;i&&this.navChange.emit({activeId:this.activeId,nextId:t,preventDefault:()=>{r=!0}}),r||(this.activeId=t,this.activeIdChange.emit(t),this._notifyItemChanged(t))}}_notifyItemChanged(t){this.navItemChange$.next(this._getItemById(t))}_getItemById(t){return this.items&&this.items.find(i=>i.id===t)||null}}return n.\u0275fac=function(t){return new(t||n)(Fo("role"),D($ne),D(pi),D(rn))},n.\u0275dir=ye({type:n,selectors:[["","ngbNav",""]],contentQueries:function(t,i,r){if(1&t&&(kn(r,w_,4),kn(r,dM,5)),2&t){let s;un(s=dn())&&(i.items=s),un(s=dn())&&(i.links=s)}},hostVars:6,hostBindings:function(t,i){1&t&&Pe("keydown.arrowLeft",function(s){return i.onKeyDown(s)})("keydown.arrowRight",function(s){return i.onKeyDown(s)})("keydown.arrowDown",function(s){return i.onKeyDown(s)})("keydown.arrowUp",function(s){return i.onKeyDown(s)})("keydown.Home",function(s){return i.onKeyDown(s)})("keydown.End",function(s){return i.onKeyDown(s)}),2&t&&(nn("aria-orientation","vertical"===i.orientation&&"tablist"===i.roles?"vertical":void 0)("role",i.role?i.role:i.roles?"tablist":void 0),ft("nav",!0)("flex-column","vertical"===i.orientation))},inputs:{animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard",activeId:"activeId"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],features:[Dn]}),n})(),dM=(()=>{class n{constructor(t,i,r,s){this.role=t,this.navItem=i,this.nav=r,this.elRef=s}hasNavItemClass(){return this.navItem.elementRef.nativeElement.nodeType===Node.COMMENT_NODE}}return n.\u0275fac=function(t){return new(t||n)(Fo("role"),D(w_),D(M_),D(Tt))},n.\u0275dir=ye({type:n,selectors:[["a","ngbNavLink",""]],hostAttrs:["href",""],hostVars:14,hostBindings:function(t,i){1&t&&Pe("click",function(s){return i.nav.click(i.navItem),s.preventDefault()}),2&t&&(Gr("id",i.navItem.domId),nn("role",i.role?i.role:i.nav.roles?"tab":void 0)("tabindex",i.navItem.disabled?-1:void 0)("aria-controls",i.navItem.isPanelInDom()?i.navItem.panelDomId:null)("aria-selected",i.navItem.active)("aria-disabled",i.navItem.disabled),ft("nav-link",!0)("nav-item",i.hasNavItemClass())("active",i.navItem.active)("disabled",i.navItem.disabled))}}),n})();const qne=({classList:n})=>(n.remove("show"),()=>n.remove("active")),Xne=(n,e)=>{e&&Ed(n),n.classList.add("show")};let hM=(()=>{class n{constructor(t){this.elRef=t}}return n.\u0275fac=function(t){return new(t||n)(D(Tt))},n.\u0275dir=ye({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(t,i){2&t&&(Gr("id",i.item.panelDomId),nn("role",i.role?i.role:i.nav.roles?"tabpanel":void 0)("aria-labelledby",i.item.domId),ft("fade",i.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"}}),n})(),SF=(()=>{class n{constructor(t,i){this._cd=t,this._ngZone=i,this._activePane=null}isPanelTransitioning(t){var i;return(null===(i=this._activePane)||void 0===i?void 0:i.item)===t}ngAfterViewInit(){var t;this._updateActivePane(),this.nav.navItemChange$.pipe(ci(this.nav.destroy$),lg((null===(t=this._activePane)||void 0===t?void 0:t.item)||null),function xw(n,e){return t=>t.lift(new VZ(n,e))}(),Eg(1)).subscribe(i=>{const r={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?ki(this._ngZone,this._activePane.elRef.nativeElement,qne,r).subscribe(()=>{var s;const o=null===(s=this._activePane)||void 0===s?void 0:s.item;this._activePane=this._getPaneForItem(i),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),ki(this._ngZone,this._activePane.elRef.nativeElement,Xne,r).subscribe(()=>{i&&(i.shown.emit(),this.nav.shown.emit(i.id))})),o&&(o.hidden.emit(),this.nav.hidden.emit(o.id))}):this._updateActivePane()})}_updateActivePane(){var t,i;this._activePane=this._getActivePane(),null===(t=this._activePane)||void 0===t||t.elRef.nativeElement.classList.add("show"),null===(i=this._activePane)||void 0===i||i.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(i=>i.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}}return n.\u0275fac=function(t){return new(t||n)(D(pi),D(Bt))},n.\u0275cmp=tn({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(t,i){if(1&t&&Vo(hM,5),2&t){let r;un(r=dn())&&(i._panes=r)}},hostVars:2,hostBindings:function(t,i){2&t&&ft("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},attrs:Iee,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){1&t&&ae(0,Fee,1,1,"ng-template",0),2&t&&j("ngForOf",i.nav.items)},directives:[zi,nr,hM,Ts],encapsulation:2,changeDetection:0}),n})(),fM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})(),IF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})(),LF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})(),FF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})(),kF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})(),HF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})(),zF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})(),GF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({}),n})();new tt("live announcer delay",{providedIn:"root",factory:function wie(){return 100}});let jF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})();const Eie=[$L,jL,XL,JL,ZL,pF,lM,MF,fM,IF,LF,FF,kF,HF,zF,GF,jF];let Cie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[Eie,$L,jL,XL,JL,ZL,pF,lM,MF,fM,IF,LF,FF,kF,HF,zF,GF,jF]}),n})();function Tie(n,e){1&n&&(Qe(0,"p",21),Ni(1,"translate")),2&n&&j("innerHTML",Ii(1,1,e.$implicit),xa)}function Die(n,e){if(1&n&&(O(0,"h4",17),re(1),O(2,"span",18),re(3),k()(),O(4,"h5",19),re(5),k(),ae(6,Tie,2,3,"p",20),Qe(7,"span")),2&n){const t=oe().$implicit;W(1),Ri("",t.Title," | "),W(2),ii(t.Tab),W(2),ii(t.Date),W(1),j("ngForOf",t.Description)}}function Aie(n,e){if(1&n&&(O(0,"li",14)(1,"a",15),re(2),k(),ae(3,Die,8,4,"ng-template",16),k()),2&n){const t=e.$implicit,i=e.index;j("title",t.Tab)("ngbNavItem",i),W(2),ii(t.Tab)}}const Rie=function(n,e){return[n,e,0]};let Nie=(()=>{class n{constructor(t){this.analyticsService=t,this.active=0}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(D(Il))},n.\u0275cmp=tn({type:n,selectors:[["app-jobs"]],decls:18,vars:14,consts:[["id","jobs",1,"section","jobs"],[1,"container"],[2,"display","flex","justify-content","space-between","flex-direction","row"],[1,"section-box"],["data-aos","fade-up","data-aos-duration","1000",1,"about-title","mb-5"],[1,"e-font","section-title"],[1,"code-font","n-section-title"],["data-aos","fade-up","data-aos-duration","1000",1,"jobs-tabs"],["ngbNav","","orientation","vertical",1,"nav-tabs","jobs-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"title","ngbNavItem",4,"ngFor","ngForOf"],[1,"mt-2",3,"ngbNavOutlet"],[2,"padding-top","150px","padding-left","100px"],[3,"animationName","size","position"],[3,"title","ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"title-tab-content"],[1,"company-tab-content"],[1,"job-time"],["class","job-description",3,"innerHTML",4,"ngFor","ngForOf"],[1,"job-description",3,"innerHTML"]],template:function(t,i){if(1&t&&(O(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5)(6,"span",6),re(7,"02."),k(),re(8),Ni(9,"translate"),k()(),O(10,"div",7)(11,"ul",8,9),Pe("activeIdChange",function(s){return i.active=s}),ae(13,Aie,4,3,"li",10),Ni(14,"translate"),k(),Qe(15,"div",11),k()(),O(16,"div",12),Qe(17,"app-human-animation",13),k()()()()),2&t){const r=function Qi(n){return Pc(function o3(){return mt.lFrame.contextLView}(),20+n)}(12);W(8),Ri(" ",Ii(9,7,"Experience.Title")," "),W(3),j("activeId",i.active),W(2),j("ngForOf",Ii(14,9,"Experience.Jobs")),W(2),j("ngbNavOutlet",r),W(2),j("animationName","working")("size",3)("position",Js(11,Rie,-2,-2.5))}},directives:[M_,zi,w_,dM,uM,SF,gw],pipes:[wd],styles:['@charset "UTF-8";  .jobs .jobs-tabs{display:flex}  .jobs .jobs-tabs .tab-content{margin-left:38px}  .jobs .jobs-tabs ul{display:block;width:114.33px;border:none}  .jobs .jobs-tabs a.active{background-color:#112240!important;color:#64ffda!important;border-color:transparent!important;border-radius:0}  .jobs .jobs-tabs a:hover{background-color:#112240!important;color:#64ffda!important;border-color:transparent!important;border-radius:0}  .jobs .jobs-tabs a{display:inline-block;-webkit-text-decoration:none;text-decoration:none;-webkit-text-decoration-skip-ink:auto;text-decoration-skip-ink:auto;color:inherit;position:relative;cursor:pointer;display:flex;align-items:center;width:100%;background-color:transparent;height:42px;padding:0 20px 2px;transition:all .25s cubic-bezier(.645,.045,.355,1);text-align:left;white-space:nowrap;font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace;font-size:13px;color:#8892b0}  .jobs .jobs-tabs li{border-left:2px solid #303C55;border-left-width:2px;border-left-style:solid;border-left-color:#303c55}.jobs[_ngcontent-%COMP%]{max-width:700px;margin:auto}.jobs[_ngcontent-%COMP%]   .title-tab-content[_ngcontent-%COMP%]{color:#ccd6f6;font-size:22px;font-weight:500;margin-bottom:5px}.jobs[_ngcontent-%COMP%]   .title-tab-content[_ngcontent-%COMP%]   .company-tab-content[_ngcontent-%COMP%]{color:#64ffda}.jobs[_ngcontent-%COMP%]   .job-time[_ngcontent-%COMP%]{font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace;font-size:13px;font-weight:400;-webkit-letter-spacing:.05em;-moz-letter-spacing:.05em;-ms-letter-spacing:.05em;letter-spacing:.05em;color:#a8b2d1;margin-bottom:30px}.jobs[_ngcontent-%COMP%]   .job-description[_ngcontent-%COMP%]{position:relative;padding-left:30px;margin-bottom:10px;font-size:18px}.jobs[_ngcontent-%COMP%]   .job-description[_ngcontent-%COMP%]:before{content:"\\25b9";position:absolute;left:0;color:#64ffda}@media (max-width: 768px){.jobs[_ngcontent-%COMP%]   .job-description[_ngcontent-%COMP%]{padding:0}  .jobs-tabs{display:block!important}  .jobs-tabs .tab-content{margin-left:0!important}  .jobs-tabs ul{display:block;width:100%!important;margin-bottom:50px}}']}),n})();function Pie(n,e,t){return 0===t?[e]:(n.push(e),n)}const Lie=function(n,e){return{isMouseDragable:n,isTouchDragable:e}};function Fie(n,e){if(1&n&&(O(0,"div",4),Qe(1,"owl-stage",5),k()),2&n){const t=oe();W(1),j("owlDraggable",Js(3,Lie,null==t.owlDOMData?null:t.owlDOMData.isMouseDragable,null==t.owlDOMData?null:t.owlDOMData.isTouchDragable))("stageData",t.stageData)("slidesData",t.slidesData)}}const kie=function(n,e){return{active:n,"owl-dot-text":e}};function Bie(n,e){if(1&n){const t=bn();O(0,"div",11),Pe("click",function(){const s=Gt(t).$implicit;return oe(2).moveByDot(s.id)}),Qe(1,"span",12),k()}if(2&n){const t=e.$implicit;j("ngClass",Js(2,kie,t.active,t.showInnerContent)),W(1),j("innerHTML",t.innerContent,xa)}}const x_=function(n){return{disabled:n}};function Uie(n,e){if(1&n){const t=bn();Ca(0),O(1,"div",6)(2,"div",7),Pe("click",function(){return Gt(t),oe().prev()}),k(),O(3,"div",8),Pe("click",function(){return Gt(t),oe().next()}),k()(),O(4,"div",9),ae(5,Bie,2,5,"div",10),k(),Ta()}if(2&n){const t=oe();W(1),j("ngClass",Da(7,x_,null==t.navData?null:t.navData.disabled)),W(1),j("ngClass",Da(9,x_,null==t.navData||null==t.navData.prev?null:t.navData.prev.disabled))("innerHTML",null==t.navData||null==t.navData.prev?null:t.navData.prev.htmlText,xa),W(1),j("ngClass",Da(11,x_,null==t.navData||null==t.navData.next?null:t.navData.next.disabled))("innerHTML",null==t.navData||null==t.navData.next?null:t.navData.next.htmlText,xa),W(1),j("ngClass",Da(13,x_,null==t.dotsData?null:t.dotsData.disabled)),W(1),j("ngForOf",null==t.dotsData?null:t.dotsData.dots)}}const Vie=function(n,e,t,i,r){return{"owl-rtl":n,"owl-loaded":e,"owl-responsive":t,"owl-drag":i,"owl-grab":r}};function Hie(n,e){}const zie=function(n,e){return{$implicit:n,index:e}};function Gie(n,e){if(1&n&&ae(0,Hie,0,0,"ng-template",4),2&n){const t=oe(),i=t.$implicit,r=t.index,s=oe();j("ngTemplateOutlet",i.tplRef)("ngTemplateOutletContext",Js(2,zie,s.preparePublicSlide(i),r))}}const Wie=function(n,e,t,i){return{width:n,"margin-left":e,"margin-right":t,left:i}};function $ie(n,e){if(1&n){const t=bn();Ca(0),O(1,"div",2),Pe("animationend",function(){const s=Gt(t).$implicit;return oe().clear(s.id)}),ae(2,Gie,1,5,null,3),k(),Ta()}if(2&n){const t=e.$implicit;W(1),j("ngClass",t.classes)("ngStyle",PT(4,Wie,t.width+"px",t.marginL?t.marginL+"px":"",t.marginR?t.marginR+"px":"",t.left))("@autoHeight",t.heightState),W(1),j("ngIf",t.load)}}const jie=function(n,e,t,i,r){return{width:n,transform:e,transition:t,"padding-left":i,"padding-right":r}};let qF=(()=>{class n{constructor(t){this.eventManager=t,this.resizeSubject=new Ye,this.eventManager.addGlobalEventListener("window","resize",this.onResize.bind(this)),this.eventManager.addGlobalEventListener("window","onload",this.onLoaded.bind(this))}get onResize$(){return this.resizeSubject.asObservable()}onResize(t){this.resizeSubject.next(t.target)}onLoaded(t){this.windowWidth=t.target}}return n.\u0275fac=function(t){return new(t||n)(q(Ah))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class qie{constructor(){this.items=3,this.skip_validateItems=!1,this.loop=!1,this.center=!1,this.rewind=!1,this.mouseDrag=!0,this.touchDrag=!0,this.pullDrag=!0,this.freeDrag=!1,this.margin=0,this.stagePadding=0,this.merge=!1,this.mergeFit=!0,this.autoWidth=!1,this.startPosition=0,this.rtl=!1,this.smartSpeed=250,this.fluidSpeed=!1,this.dragEndSpeed=!1,this.responsive={},this.responsiveRefreshRate=200,this.nav=!1,this.navText=["prev","next"],this.navSpeed=!1,this.slideBy=1,this.dots=!0,this.dotsEach=!1,this.dotsData=!1,this.dotsSpeed=!1,this.autoplay=!1,this.autoplayTimeout=5e3,this.autoplayHoverPause=!1,this.autoplaySpeed=!1,this.autoplayMouseleaveTimeout=1,this.lazyLoad=!1,this.lazyLoadEager=0,this.slideTransition="",this.animateOut=!1,this.animateIn=!1,this.autoHeight=!1,this.URLhashListener=!1}}class Xie{constructor(){this.items="number",this.skip_validateItems="boolean",this.loop="boolean",this.center="boolean",this.rewind="boolean",this.mouseDrag="boolean",this.touchDrag="boolean",this.pullDrag="boolean",this.freeDrag="boolean",this.margin="number",this.stagePadding="number",this.merge="boolean",this.mergeFit="boolean",this.autoWidth="boolean",this.startPosition="number|string",this.rtl="boolean",this.smartSpeed="number",this.fluidSpeed="boolean",this.dragEndSpeed="number|boolean",this.responsive={},this.responsiveRefreshRate="number",this.nav="boolean",this.navText="string[]",this.navSpeed="number|boolean",this.slideBy="number|string",this.dots="boolean",this.dotsEach="number|boolean",this.dotsData="boolean",this.dotsSpeed="number|boolean",this.autoplay="boolean",this.autoplayTimeout="number",this.autoplayHoverPause="boolean",this.autoplaySpeed="number|boolean",this.autoplayMouseleaveTimeout="number",this.lazyLoad="boolean",this.lazyLoadEager="number",this.slideTransition="string",this.animateOut="string|boolean",this.animateIn="string|boolean",this.autoHeight="boolean",this.URLhashListener="boolean"}}let pM=(()=>{class n{constructor(t){this.errorHandler=t}log(t,...i){Aa()&&console.log(t,...i)}error(t){this.errorHandler.handleError(t)}warn(t,...i){console.warn(t,...i)}}return n.\u0275fac=function(t){return new(t||n)(q(gl))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();var S_=(()=>(function(n){n.Event="event",n.State="state"}(S_||(S_={})),S_))(),Ad=(()=>(function(n){n.Default="default",n.Inner="inner",n.Outer="outer"}(Ad||(Ad={})),Ad))();let ha=(()=>{class n{constructor(t){this.logger=t,this._viewSettingsShipper$=new Ye,this._initializedCarousel$=new Ye,this._changeSettingsCarousel$=new Ye,this._changedSettingsCarousel$=new Ye,this._translateCarousel$=new Ye,this._translatedCarousel$=new Ye,this._resizeCarousel$=new Ye,this._resizedCarousel$=new Ye,this._refreshCarousel$=new Ye,this._refreshedCarousel$=new Ye,this._dragCarousel$=new Ye,this._draggedCarousel$=new Ye,this.settings={items:0},this.owlDOMData={rtl:!1,isResponsive:!1,isRefreshed:!1,isLoaded:!1,isLoading:!1,isMouseDragable:!1,isGrab:!1,isTouchDragable:!1},this.stageData={transform:"translate3d(0px,0px,0px)",transition:"0s",width:0,paddingL:0,paddingR:0},this._items=[],this._widths=[],this._supress={},this._plugins={},this._current=null,this._clones=[],this._mergers=[],this._speed=null,this._coordinates=[],this._breakpoint=null,this.clonedIdPrefix="cloned-",this._options={},this._invalidated={},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},this._pipe=[{filter:["width","items","settings"],run:i=>{i.current=this._items&&this._items[this.relative(this._current)].id}},{filter:["width","items","settings"],run:i=>{const r=this.settings.margin||"",o=this.settings.rtl,a={"margin-left":o?r:"","margin-right":o?"":r};!this.settings.autoWidth||this.slidesData.forEach(l=>{l.marginL=a["margin-left"],l.marginR=a["margin-right"]}),i.css=a}},{filter:["width","items","settings"],run:i=>{const r=+(this.width()/this.settings.items).toFixed(3)-this.settings.margin,s=!this.settings.autoWidth,o=[];let a=null,l=this._items.length;for(i.items={merge:!1,width:r};l--;)a=this._mergers[l],a=this.settings.mergeFit&&Math.min(a,this.settings.items)||a,i.items.merge=a>1||i.items.merge,o[l]=s?r*a:this._items[l].width?this._items[l].width:r;this._widths=o,this.slidesData.forEach((c,u)=>{c.width=this._widths[u],c.marginR=i.css["margin-right"],c.marginL=i.css["margin-left"]})}},{filter:["items","settings"],run:()=>{const i=[],r=this._items,s=this.settings,o=Math.max(2*s.items,4),a=2*Math.ceil(r.length/2);let l=[],c=[],u=s.loop&&r.length?s.rewind?o:Math.max(o,a):0;for(u/=2;u--;)i.push(this.normalize(i.length/2,!0)),l.push(Object.assign({},this.slidesData[i[i.length-1]])),i.push(this.normalize(r.length-1-(i.length-1)/2,!0)),c.unshift(Object.assign({},this.slidesData[i[i.length-1]]));this._clones=i,l=l.map(d=>(d.id=`${this.clonedIdPrefix}${d.id}`,d.isActive=!1,d.isCloned=!0,d)),c=c.map(d=>(d.id=`${this.clonedIdPrefix}${d.id}`,d.isActive=!1,d.isCloned=!0,d)),this.slidesData=c.concat(this.slidesData).concat(l)}},{filter:["width","items","settings"],run:()=>{const i=this.settings.rtl?1:-1,r=this._clones.length+this._items.length,s=[];let o=-1,a=0,l=0;for(;++o<r;)a=s[o-1]||0,l=this._widths[this.relative(o)]+this.settings.margin,s.push(a+l*i);this._coordinates=s}},{filter:["width","items","settings"],run:()=>{const i=this.settings.stagePadding,r=this._coordinates,s={width:Math.ceil(Math.abs(r[r.length-1]))+2*i,"padding-left":i||"","padding-right":i||""};this.stageData.width=s.width,this.stageData.paddingL=s["padding-left"],this.stageData.paddingR=s["padding-right"]}},{filter:["width","items","settings"],run:i=>{let r=i.current?this.slidesData.findIndex(s=>s.id===i.current):0;r=Math.max(this.minimum(),Math.min(this.maximum(),r)),this.reset(r)}},{filter:["position"],run:()=>{this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:()=>{const i=this.settings.rtl?1:-1,r=2*this.settings.stagePadding,s=[];let o,a,l,c,u,d;if(o=this.coordinates(this.current()),"number"==typeof o?o+=r:o=0,a=o+this.width()*i,-1===i&&this.settings.center){const h=this._coordinates.filter(f=>this.settings.items%2==1?f>=o:f>o);o=h.length?h[h.length-1]:o}for(u=0,d=this._coordinates.length;u<d;u++)l=Math.ceil(this._coordinates[u-1]||0),c=Math.ceil(Math.abs(this._coordinates[u])+r*i),(this._op(l,"<=",o)&&this._op(l,">",a)||this._op(c,"<",o)&&this._op(c,">",a))&&s.push(u);this.slidesData.forEach(h=>(h.isActive=!1,h)),s.forEach(h=>{this.slidesData[h].isActive=!0}),this.settings.center&&(this.slidesData.forEach(h=>(h.isCentered=!1,h)),this.slidesData[this.current()].isCentered=!0)}}]}get invalidated(){return this._invalidated}get states(){return this._states}getViewCurSettings(){return this._viewSettingsShipper$.asObservable()}getInitializedState(){return this._initializedCarousel$.asObservable()}getChangeState(){return this._changeSettingsCarousel$.asObservable()}getChangedState(){return this._changedSettingsCarousel$.asObservable()}getTranslateState(){return this._translateCarousel$.asObservable()}getTranslatedState(){return this._translatedCarousel$.asObservable()}getResizeState(){return this._resizeCarousel$.asObservable()}getResizedState(){return this._resizedCarousel$.asObservable()}getRefreshState(){return this._refreshCarousel$.asObservable()}getRefreshedState(){return this._refreshedCarousel$.asObservable()}getDragState(){return this._dragCarousel$.asObservable()}getDraggedState(){return this._draggedCarousel$.asObservable()}setOptions(t){const i=new qie,r=this._validateOptions(t,i);this._options=Object.assign(Object.assign({},i),r)}_validateOptions(t,i){const r=Object.assign({},t),s=new Xie,o=(a,l)=>(this.logger.log(`options.${l} must be type of ${a}; ${l}=${t[l]} skipped to defaults: ${l}=${i[l]}`),i[l]);for(const a in r)if(r.hasOwnProperty(a))if("number"===s[a])this._isNumeric(r[a])?(r[a]=+r[a],r[a]="items"===a?this._validateItems(r[a],r.skip_validateItems):r[a]):r[a]=o(s[a],a);else if("boolean"===s[a]&&"boolean"!=typeof r[a])r[a]=o(s[a],a);else if("number|boolean"!==s[a]||this._isNumberOrBoolean(r[a]))if("number|string"!==s[a]||this._isNumberOrString(r[a]))if("string|boolean"!==s[a]||this._isStringOrBoolean(r[a])){if("string[]"===s[a])if(Array.isArray(r[a])){let l=!1;r[a].forEach(c=>{l="string"==typeof c}),l||(r[a]=o(s[a],a))}else r[a]=o(s[a],a)}else r[a]=o(s[a],a);else r[a]=o(s[a],a);else r[a]=o(s[a],a);return r}_validateItems(t,i){let r=t;return t>this._items.length?i?this.logger.log("The option 'items' in your options is bigger than the number of slides. The navigation got disabled"):(r=this._items.length,this.logger.log("The option 'items' in your options is bigger than the number of slides. This option is updated to the current number of slides and the navigation got disabled")):t===this._items.length&&(this.settings.dots||this.settings.nav)&&this.logger.log("Option 'items' in your options is equal to the number of slides. So the navigation got disabled"),r}setCarouselWidth(t){this._width=t}setup(t,i,r){this.setCarouselWidth(t),this.setItems(i),this._defineSlidesData(),this.setOptions(r),this.settings=Object.assign({},this._options),this.setOptionsForViewport(),this._trigger("change",{property:{name:"settings",value:this.settings}}),this.invalidate("settings"),this._trigger("changed",{property:{name:"settings",value:this.settings}})}setOptionsForViewport(){const t=this._width,i=this._options.responsive;let r=-1;if(!Object.keys(i).length)return;if(!t)return void(this.settings.items=1);for(const o in i)i.hasOwnProperty(o)&&+o<=t&&+o>r&&(r=Number(o));this.settings=Object.assign(Object.assign(Object.assign({},this._options),i[r]),{items:i[r]&&i[r].items?this._validateItems(i[r].items,this._options.skip_validateItems):this._options.items}),delete this.settings.responsive,this.owlDOMData.isResponsive=!0,this.owlDOMData.isMouseDragable=this.settings.mouseDrag,this.owlDOMData.isTouchDragable=this.settings.touchDrag;const s=[];this._items.forEach(o=>{s.push(this.settings.merge?o.dataMerge:1)}),this._mergers=s,this._breakpoint=r,this.invalidate("settings")}initialize(t){this.enter("initializing"),this.owlDOMData.rtl=this.settings.rtl,this._mergers.length&&(this._mergers=[]),t.forEach(i=>{this._mergers.push(this.settings.merge?i.dataMerge:1)}),this._clones=[],this.reset(this._isNumeric(this.settings.startPosition)?+this.settings.startPosition:0),this.invalidate("items"),this.refresh(),this.owlDOMData.isLoaded=!0,this.owlDOMData.isMouseDragable=this.settings.mouseDrag,this.owlDOMData.isTouchDragable=this.settings.touchDrag,this.sendChanges(),this.leave("initializing"),this._trigger("initialized")}sendChanges(){this._viewSettingsShipper$.next({owlDOMData:this.owlDOMData,stageData:this.stageData,slidesData:this.slidesData,navData:this.navData,dotsData:this.dotsData})}_optionsLogic(){this.settings.autoWidth&&(this.settings.stagePadding=0,this.settings.merge=!1)}update(){let t=0;const i=this._pipe.length,r=o=>this._invalidated[o],s={};for(;t<i;){const o=this._pipe[t].filter.filter(r);(this._invalidated.all||o.length>0)&&this._pipe[t].run(s),t++}this.slidesData.forEach(o=>o.classes=this.setCurSlideClasses(o)),this.sendChanges(),this._invalidated={},this.is("valid")||this.enter("valid")}width(t){switch(t=t||Ad.Default){case Ad.Inner:case Ad.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}}refresh(){this.enter("refreshing"),this._trigger("refresh"),this._defineSlidesData(),this.setOptionsForViewport(),this._optionsLogic(),this.update(),this.leave("refreshing"),this._trigger("refreshed")}onResize(t){if(!this._items.length)return!1;this.setCarouselWidth(t),this.enter("resizing"),this._trigger("resize"),this.invalidate("width"),this.refresh(),this.leave("resizing"),this._trigger("resized")}prepareDragging(t){let r,i=null;return r=this.stageData.transform.replace(/.*\(|\)| |[^,-\d]\w|\)/g,"").split(","),i={x:+r[0],y:+r[1]},this.is("animating")&&this.invalidate("position"),"mousedown"===t.type&&(this.owlDOMData.isGrab=!0),this.speed(0),i}enterDragging(){this.enter("dragging"),this._trigger("drag")}defineNewCoordsDrag(t,i){let r=null,s=null,o=null;const a=this.difference(i.pointer,this.pointer(t)),l=this.difference(i.stage.start,a);return!!this.is("dragging")&&(this.settings.loop?(r=this.coordinates(this.minimum()),s=+this.coordinates(this.maximum()+1)-r,l.x=((l.x-r)%s+s)%s+r):(r=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),s=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),o=this.settings.pullDrag?-1*a.x/5:0,l.x=Math.max(Math.min(l.x,r+o),s+o)),l)}finishDragging(t,i,r){const o=this.difference(i.pointer,this.pointer(t)),a=i.stage.current,l=["right","left"][+(this.settings.rtl?o.x<+this.settings.rtl:o.x>+this.settings.rtl)];let c,u,d;(0!==o.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(+this.settings.dragEndSpeed||this.settings.smartSpeed),c=this.closest(a.x,0!==o.x?l:i.direction),u=this.current(),d=this.current(-1===c?void 0:c),u!==d&&(this.invalidate("position"),this.update()),i.direction=l,(Math.abs(o.x)>3||(new Date).getTime()-i.time>300)&&r()),this.is("dragging")&&(this.leave("dragging"),this._trigger("dragged"))}closest(t,i){const s=this.width();let o=this.coordinates(),a=-1;this.settings.center&&(o=o.map(l=>(0===l&&(l+=1e-6),l)));for(let l=0;l<o.length&&("left"===i&&t>o[l]-30&&t<o[l]+30?a=l:"right"===i&&t>o[l]-s-30&&t<o[l]-s+30?a=l+1:this._op(t,"<",o[l])&&this._op(t,">",o[l+1]||o[l]-s)?a="left"===i?l+1:l:null===i&&t>o[l]-30&&t<o[l]+30&&(a=l),-1===a);l++);return this.settings.loop||(this._op(t,">",o[this.minimum()])?a=t=this.minimum():this._op(t,"<",o[this.maximum()])&&(a=t=this.maximum())),a}animate(t){const i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this._trigger("translate")),this.stageData.transform="translate3d("+t+"px,0px,0px)",this.stageData.transition=this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}is(t){return this._states.current[t]&&this._states.current[t]>0}current(t){return void 0===t?this._current:0!==this._items.length?(t=this.normalize(t),this._current!==t&&(this._trigger("change",{property:{name:"position",value:t}}),this._current=t,this.invalidate("position"),this._trigger("changed",{property:{name:"position",value:this._current}})),this._current):void 0}invalidate(t){return"string"==typeof t&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),Object.keys(this._invalidated)}reset(t){void 0!==(t=this.normalize(t))&&(this._speed=0,this._current=t,this._suppress(["translate","translated"]),this.animate(this.coordinates(t)),this._release(["translate","translated"]))}normalize(t,i){const r=this._items.length,s=i?0:this._clones.length;return!this._isNumeric(t)||r<1?t=void 0:(t<0||t>=r+s)&&(t=((t-s/2)%r+r)%r+s/2),t}relative(t){return this.normalize(t-=this._clones.length/2,!0)}maximum(t=!1){const i=this.settings;let s,o,a,r=this._coordinates.length;if(i.loop)r=this._clones.length/2+this._items.length-1;else if(i.autoWidth||i.merge){for(s=this._items.length,o=this.slidesData[--s].width,a=this._width;s--&&(o+=+this.slidesData[s].width+this.settings.margin,!(o>a)););r=s+1}else r=i.center?this._items.length-1:this._items.length-i.items;return t&&(r-=this._clones.length/2),Math.max(r,0)}minimum(t=!1){return t?0:this._clones.length/2}items(t){return void 0===t?this._items.slice():(t=this.normalize(t,!0),[this._items[t]])}mergers(t){return void 0===t?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])}clones(t){const i=this._clones.length/2,r=i+this._items.length,s=o=>o%2==0?r+o/2:i-(o+1)/2;return void 0===t?this._clones.map((o,a)=>s(a)):this._clones.map((o,a)=>o===t?s(a):null).filter(o=>o)}speed(t){return void 0!==t&&(this._speed=t),this._speed}coordinates(t){let s,o,i=1,r=t-1;return void 0===t?(o=this._coordinates.map((a,l)=>this.coordinates(l)),o):(this.settings.center?(this.settings.rtl&&(i=-1,r=t+1),s=this._coordinates[t],s+=(this.width()-s+(this._coordinates[r]||0))/2*i):s=this._coordinates[r]||0,s=Math.ceil(s),s)}_duration(t,i,r){return 0===r?0:Math.min(Math.max(Math.abs(i-t),1),6)*Math.abs(+r||this.settings.smartSpeed)}to(t,i){let r=this.current(),s=null,o=t-this.relative(r),a=this.maximum(),l=0;const c=+(o>0)-+(o<0),u=this._items.length,d=this.minimum();this.settings.loop?(!this.settings.rewind&&Math.abs(o)>u/2&&(o+=-1*c*u),s=(((t=r+o)-d)%u+u)%u+d,s!==t&&s-o<=a&&s-o>0&&(r=s-o,t=s,l=30,this.reset(r),this.sendChanges())):this.settings.rewind?(a+=1,t=(t%a+a)%a):t=Math.max(d,Math.min(a,t)),setTimeout(()=>{this.speed(this._duration(r,t,i)),this.current(t),this.update()},l)}next(t){t=t||!1,this.to(this.relative(this.current())+1,t)}prev(t){t=t||!1,this.to(this.relative(this.current())-1,t)}onTransitionEnd(t){if(void 0!==t)return!1;this.leave("animating"),this._trigger("translated")}_viewport(){let t;return this._width?t=this._width:this.logger.log("Can not detect viewport width."),t}setItems(t){this._items=t}_defineSlidesData(){let t;this.slidesData&&this.slidesData.length&&(t=new Map,this.slidesData.forEach(i=>{i.load&&t.set(i.id,i.load)})),this.slidesData=this._items.map(i=>({id:`${i.id}`,isActive:!1,tplRef:i.tplRef,dataMerge:i.dataMerge,width:0,isCloned:!1,load:!!t&&t.get(i.id),hashFragment:i.dataHash}))}setCurSlideClasses(t){const i={active:t.isActive,center:t.isCentered,cloned:t.isCloned,animated:t.isAnimated,"owl-animated-in":t.isDefAnimatedIn,"owl-animated-out":t.isDefAnimatedOut};return this.settings.animateIn&&(i[this.settings.animateIn]=t.isCustomAnimatedIn),this.settings.animateOut&&(i[this.settings.animateOut]=t.isCustomAnimatedOut),i}_op(t,i,r){const s=this.settings.rtl;switch(i){case"<":return s?t>r:t<r;case">":return s?t<r:t>r;case">=":return s?t<=r:t>=r;case"<=":return s?t>=r:t<=r}}_trigger(t,i,r,s,o){switch(t){case"initialized":this._initializedCarousel$.next(t);break;case"change":this._changeSettingsCarousel$.next(i);break;case"changed":this._changedSettingsCarousel$.next(i);break;case"drag":this._dragCarousel$.next(t);break;case"dragged":this._draggedCarousel$.next(t);break;case"resize":this._resizeCarousel$.next(t);break;case"resized":this._resizedCarousel$.next(t);break;case"refresh":this._refreshCarousel$.next(t);break;case"refreshed":this._refreshedCarousel$.next(t);break;case"translate":this._translateCarousel$.next(t);break;case"translated":this._translatedCarousel$.next(t)}}enter(t){[t].concat(this._states.tags[t]||[]).forEach(i=>{void 0===this._states.current[i]&&(this._states.current[i]=0),this._states.current[i]++})}leave(t){[t].concat(this._states.tags[t]||[]).forEach(i=>{(0===this._states.current[i]||this._states.current[i])&&this._states.current[i]--})}register(t){t.type===S_.State&&(this._states.tags[t.name]=this._states.tags[t.name]?this._states.tags[t.name].concat(t.tags):t.tags,this._states.tags[t.name]=this._states.tags[t.name].filter((i,r)=>this._states.tags[t.name].indexOf(i)===r))}_suppress(t){t.forEach(i=>{this._supress[i]=!0})}_release(t){t.forEach(i=>{delete this._supress[i]})}pointer(t){const i={x:null,y:null};return(t=(t=t.originalEvent||t||window.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t).pageX?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i}_isNumeric(t){return!isNaN(parseFloat(t))}_isNumberOrBoolean(t){return this._isNumeric(t)||"boolean"==typeof t}_isNumberOrString(t){return this._isNumeric(t)||"string"==typeof t}_isStringOrBoolean(t){return"string"==typeof t||"boolean"==typeof t}difference(t,i){return null===t||null===i?{x:0,y:0}:{x:t.x-i.x,y:t.y-i.y}}}return n.\u0275fac=function(t){return new(t||n)(q(pM))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),XF=(()=>{class n{constructor(t){this.carouselService=t,this._initialized=!1,this._pages=[],this._navData={disabled:!1,prev:{disabled:!1,htmlText:""},next:{disabled:!1,htmlText:""}},this._dotsData={disabled:!1,dots:[]},this.spyDataStreams()}ngOnDestroy(){this.navSubscription.unsubscribe()}spyDataStreams(){const s=Hr(this.carouselService.getInitializedState().pipe(Ct(o=>{this.initialize(),this._updateNavPages(),this.draw(),this.update(),this.carouselService.sendChanges()})),this.carouselService.getChangedState().pipe(hn(o=>"position"===o.property.name),Ct(o=>{this.update()})),this.carouselService.getRefreshedState().pipe(Ct(()=>{this._updateNavPages(),this.draw(),this.update(),this.carouselService.sendChanges()})));this.navSubscription=s.subscribe(()=>{})}initialize(){this._navData.disabled=!0,this._navData.prev.htmlText=this.carouselService.settings.navText[0],this._navData.next.htmlText=this.carouselService.settings.navText[1],this._dotsData.disabled=!0,this.carouselService.navData=this._navData,this.carouselService.dotsData=this._dotsData}_updateNavPages(){let t,i,r;const s=this.carouselService.clones().length/2,o=s+this.carouselService.items().length,a=this.carouselService.maximum(!0),l=[],c=this.carouselService.settings;let u=c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items;if(u=+u,"page"!==c.slideBy&&(c.slideBy=Math.min(+c.slideBy,c.items)),c.dots||"page"===c.slideBy)for(t=s,i=0,r=0;t<o;t++){if(i>=u||0===i){if(l.push({start:Math.min(a,t-s),end:t-s+u-1}),Math.min(a,t-s)===a)break;i=0,++r}i+=this.carouselService.mergers(this.carouselService.relative(t))}this._pages=l}draw(){let t;const i=this.carouselService.settings,r=this.carouselService.items(),s=r.length<=i.items;if(this._navData.disabled=!i.nav||s,this._dotsData.disabled=!i.dots||s,i.dots)if(t=this._pages.length-this._dotsData.dots.length,i.dotsData&&0!==t)this._dotsData.dots=[],r.forEach(o=>{this._dotsData.dots.push({active:!1,id:`dot-${o.id}`,innerContent:o.dotContent,showInnerContent:!0})});else if(t>0){const o=this._dotsData.dots.length>0?this._dotsData.dots.length:0;for(let a=0;a<t;a++)this._dotsData.dots.push({active:!1,id:`dot-${a+o}`,innerContent:"",showInnerContent:!1})}else t<0&&this._dotsData.dots.splice(t,Math.abs(t));this.carouselService.navData=this._navData,this.carouselService.dotsData=this._dotsData}update(){this._updateNavButtons(),this._updateDots()}_updateNavButtons(){const t=this.carouselService.settings,i=t.loop||t.rewind,r=this.carouselService.relative(this.carouselService.current());t.nav&&(this._navData.prev.disabled=!i&&r<=this.carouselService.minimum(!0),this._navData.next.disabled=!i&&r>=this.carouselService.maximum(!0)),this.carouselService.navData=this._navData}_updateDots(){let t;!this.carouselService.settings.dots||(this._dotsData.dots.forEach(i=>{!0===i.active&&(i.active=!1)}),t=this._current(),this._dotsData.dots.length&&(this._dotsData.dots[t].active=!0),this.carouselService.dotsData=this._dotsData)}_current(){const t=this.carouselService.relative(this.carouselService.current());let i;const r=this._pages.filter((s,o)=>s.start<=t&&s.end>=t).pop();return i=this._pages.findIndex(s=>s.start===r.start&&s.end===r.end),i}_getPosition(t){let i,r;const s=this.carouselService.settings;return"page"===s.slideBy?(i=this._current(),r=this._pages.length,t?++i:--i,i=this._pages[(i%r+r)%r].start):(i=this.carouselService.relative(this.carouselService.current()),r=this.carouselService.items().length,t?i+=+s.slideBy:i-=+s.slideBy),i}next(t){this.carouselService.to(this._getPosition(!0),t)}prev(t){this.carouselService.to(this._getPosition(!1),t)}to(t,i,r){let s;!r&&this._pages.length?(s=this._pages.length,this.carouselService.to(this._pages[(t%s+s)%s].start,i)):this.carouselService.to(t,i)}moveByDot(t){const i=this._dotsData.dots.findIndex(r=>t===r.id);this.to(i,this.carouselService.settings.dotsSpeed)}toSlideById(t){const i=this.carouselService.slidesData.findIndex(r=>r.id===t&&!1===r.isCloned);-1===i||i===this.carouselService.current()||this.carouselService.to(this.carouselService.relative(i),!1)}}return n.\u0275fac=function(t){return new(t||n)(q(ha))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const YF=new tt("WindowToken");class gM{get nativeWindow(){throw new Error("Not implemented.")}}let Yie=(()=>{class n extends gM{constructor(){super()}get nativeWindow(){return window}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const Jie=[{provide:gM,useClass:Yie},{provide:YF,useFactory:function Kie(n,e){return wu(e)?n.nativeWindow:{setTimeout:(i,r)=>{},clearTimeout:i=>{}}},deps:[gM,wo]}],mM=new tt("DocumentToken");class _M{get nativeDocument(){throw new Error("Not implemented.")}}let Zie=(()=>{class n extends _M{constructor(){super()}get nativeDocument(){return document}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const ere=[{provide:_M,useClass:Zie},{provide:mM,useFactory:function Qie(n,e){return wu(e)?n.nativeDocument:{hidden:!1,visibilityState:"visible"}},deps:[_M,wo]}];let KF=(()=>{class n{constructor(t,i,r){this.carouselService=t,this._timeout=null,this._paused=!1,this._isAutoplayStopped=!1,this.winRef=i,this.docRef=r,this.spyDataStreams()}get isAutoplayStopped(){return this._isAutoplayStopped}set isAutoplayStopped(t){this._isAutoplayStopped=t}ngOnDestroy(){this.autoplaySubscription.unsubscribe()}spyDataStreams(){const s=Hr(this.carouselService.getInitializedState().pipe(Ct(()=>{this.carouselService.settings.autoplay&&this.play()})),this.carouselService.getChangedState().pipe(Ct(o=>{this._handleChangeObservable(o)})),this.carouselService.getResizedState().pipe(Ct(()=>{this.carouselService.settings.autoplay?this.play():this.stop()})));this.autoplaySubscription=s.subscribe(()=>{})}play(t,i){this._paused&&(this._paused=!1,this._setAutoPlayInterval(this.carouselService.settings.autoplayMouseleaveTimeout)),!this.carouselService.is("rotating")&&(this.carouselService.enter("rotating"),this._setAutoPlayInterval())}_getNextTimeout(t,i){return this._timeout&&this.winRef.clearTimeout(this._timeout),this._isArtificialAutoplayTimeout=!!t,this.winRef.setTimeout(()=>{this._paused||this.carouselService.is("busy")||this.carouselService.is("interacting")||this.docRef.hidden||this.carouselService.next(i||this.carouselService.settings.autoplaySpeed)},t||this.carouselService.settings.autoplayTimeout)}_setAutoPlayInterval(t){this._timeout=this._getNextTimeout(t)}stop(){!this.carouselService.is("rotating")||(this._paused=!0,this.winRef.clearTimeout(this._timeout),this.carouselService.leave("rotating"))}pause(){!this.carouselService.is("rotating")||(this._paused=!0)}_handleChangeObservable(t){"settings"===t.property.name?this.carouselService.settings.autoplay?this.play():this.stop():"position"===t.property.name&&this.carouselService.settings.autoplay&&this._setAutoPlayInterval()}_playAfterTranslated(){Ge("translated").pipe(si(t=>this.carouselService.getTranslatedState()),Wo(),hn(()=>this._isArtificialAutoplayTimeout),Ct(()=>this._setAutoPlayInterval())).subscribe(()=>{})}startPausing(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&this.pause()}startPlayingMouseLeave(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&(this.play(),this._playAfterTranslated())}startPlayingTouchEnd(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&(this.play(),this._playAfterTranslated())}}return n.\u0275fac=function(t){return new(t||n)(q(ha),q(YF),q(mM))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),JF=(()=>{class n{constructor(t){this.carouselService=t,this.spyDataStreams()}ngOnDestroy(){this.lazyLoadSubscription.unsubscribe()}spyDataStreams(){const s=Hr(this.carouselService.getInitializedState().pipe(Ct(()=>{const o=this.carouselService.settings&&!this.carouselService.settings.lazyLoad;this.carouselService.slidesData.forEach(a=>a.load=!!o)})),this.carouselService.getChangeState(),this.carouselService.getResizedState()).pipe(Ct(o=>this._defineLazyLoadSlides(o)));this.lazyLoadSubscription=s.subscribe(()=>{})}_defineLazyLoadSlides(t){if(this.carouselService.settings&&this.carouselService.settings.lazyLoad&&(t.property&&"position"===t.property.name||"initialized"===t||"resized"===t)){const i=this.carouselService.settings,r=this.carouselService.clones().length;let s=i.center&&Math.ceil(i.items/2)||i.items,o=i.center&&-1*s||0,a=(t.property&&void 0!==t.property.value?t.property.value:this.carouselService.current())+o;for(i.lazyLoadEager>0&&(s+=i.lazyLoadEager,i.loop&&(a-=i.lazyLoadEager,s++));o++<s;)this._load(r/2+this.carouselService.relative(a)),r&&this.carouselService.clones(this.carouselService.relative(a)).forEach(l=>this._load(l)),a++}}_load(t){this.carouselService.slidesData[t].load||(this.carouselService.slidesData[t].load=!0)}}return n.\u0275fac=function(t){return new(t||n)(q(ha))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),yM=(()=>{class n{constructor(t){this.carouselService=t,this.swapping=!0,this.previous=void 0,this.next=void 0,this.spyDataStreams()}ngOnDestroy(){this.animateSubscription.unsubscribe()}spyDataStreams(){const t=this.carouselService.getChangeState().pipe(Ct(c=>{"position"===c.property.name&&(this.previous=this.carouselService.current(),this.next=c.property.value)})),o=Hr(this.carouselService.getDragState(),this.carouselService.getDraggedState(),this.carouselService.getTranslatedState()).pipe(Ct(c=>this.swapping="translated"===c)),l=Hr(t,this.carouselService.getTranslateState().pipe(Ct(c=>{this.swapping&&(this.carouselService._options.animateOut||this.carouselService._options.animateIn)&&this._swap()})),o).pipe();this.animateSubscription=l.subscribe(()=>{})}_swap(){if(1!==this.carouselService.settings.items)return;let t;this.carouselService.speed(0);const i=this.carouselService.slidesData[this.previous],r=this.carouselService.slidesData[this.next],s=this.carouselService.settings.animateIn,o=this.carouselService.settings.animateOut;this.carouselService.current()!==this.previous&&(o&&(t=+this.carouselService.coordinates(this.previous)-+this.carouselService.coordinates(this.next),this.carouselService.slidesData.forEach(a=>{a.id===i.id&&(a.left=`${t}px`,a.isAnimated=!0,a.isDefAnimatedOut=!0,a.isCustomAnimatedOut=!0)})),s&&this.carouselService.slidesData.forEach(a=>{a.id===r.id&&(a.isAnimated=!0,a.isDefAnimatedIn=!0,a.isCustomAnimatedIn=!0)}))}clear(t){this.carouselService.slidesData.forEach(i=>{i.id===t&&(i.left="",i.isAnimated=!1,i.isDefAnimatedOut=!1,i.isCustomAnimatedOut=!1,i.isDefAnimatedIn=!1,i.isCustomAnimatedIn=!1,i.classes=this.carouselService.setCurSlideClasses(i))}),this.carouselService.onTransitionEnd()}}return n.\u0275fac=function(t){return new(t||n)(q(ha))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),ZF=(()=>{class n{constructor(t){this.carouselService=t,this.spyDataStreams()}ngOnDestroy(){this.autoHeightSubscription.unsubscribe()}spyDataStreams(){const s=Hr(this.carouselService.getInitializedState().pipe(Ct(o=>{this.carouselService.settings.autoHeight?this.update():this.carouselService.slidesData.forEach(a=>a.heightState="full")})),this.carouselService.getChangedState().pipe(Ct(o=>{this.carouselService.settings.autoHeight&&"position"===o.property.name&&this.update()})),this.carouselService.getRefreshedState().pipe(Ct(o=>{this.carouselService.settings.autoHeight&&this.update()})));this.autoHeightSubscription=s.subscribe(()=>{})}update(){const t=this.carouselService.settings.items;let i=this.carouselService.current(),r=i+t;this.carouselService.settings.center&&(i=t%2==1?i-(t-1)/2:i-t/2,r=t%2==1?i+t:i+t+1),this.carouselService.slidesData.forEach((s,o)=>{s.heightState=o>=i&&o<r?"full":"nulled"})}}return n.\u0275fac=function(t){return new(t||n)(q(ha))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),QF=(()=>{class n{constructor(t,i,r){this.carouselService=t,this.route=i,this.router=r,this.spyDataStreams(),this.route||(this.route={fragment:Ge("no route").pipe(An(1))}),this.router||(this.router={navigate:(s,o)=>{}})}ngOnDestroy(){this.hashSubscription.unsubscribe()}spyDataStreams(){const r=Hr(this.carouselService.getInitializedState().pipe(Ct(()=>this.listenToRoute())),this.carouselService.getChangedState().pipe(Ct(s=>{if(this.carouselService.settings.URLhashListener&&"position"===s.property.name){const o=this.carouselService.current(),a=this.carouselService.slidesData[o].hashFragment;if(!a||a===this.currentHashFragment)return;this.router.navigate(["./"],{fragment:a,relativeTo:this.route})}})));this.hashSubscription=r.subscribe(()=>{})}rewind(t){const i=this.carouselService.slidesData.findIndex(r=>r.hashFragment===t&&!1===r.isCloned);-1===i||i===this.carouselService.current()||this.carouselService.to(this.carouselService.relative(i),!1)}listenToRoute(){this.route.fragment.pipe(Eg("URLHash"===this.carouselService.settings.startPosition?0:2)).subscribe(i=>{this.currentHashFragment=i,this.rewind(i)})}}return n.\u0275fac=function(t){return new(t||n)(q(ha),q(Xo,8),q(Wi,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),tre=0,e2=(()=>{class n{constructor(t){this.tplRef=t,this.id="owl-slide-"+tre++,this._dataMerge=1,this.width=0,this.dotContent="",this.dataHash=""}set dataMerge(t){this._dataMerge=this.isNumeric(t)?t:1}get dataMerge(){return this._dataMerge}isNumeric(t){return!isNaN(parseFloat(t))}}return n.\u0275fac=function(t){return new(t||n)(D(Sn))},n.\u0275dir=ye({type:n,selectors:[["ng-template","carouselSlide",""]],inputs:{id:"id",width:"width",dotContent:"dotContent",dataHash:"dataHash",dataMerge:"dataMerge"}}),n})(),nre=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h,f){this.el=t,this.resizeService=i,this.carouselService=r,this.navigationService=s,this.autoplayService=o,this.lazyLoadService=a,this.animateService=l,this.autoHeightService=c,this.hashService=u,this.logger=d,this.changeDetectorRef=h,this.translated=new Ae,this.dragging=new Ae,this.change=new Ae,this.changed=new Ae,this.initialized=new Ae,this.slidesData=[],this.carouselLoaded=!1,this.docRef=f}onVisibilityChange(t){if(this.carouselService.settings.autoplay)switch(this.docRef.visibilityState){case"visible":!this.autoplayService.isAutoplayStopped&&this.autoplayService.play();break;case"hidden":this.autoplayService.pause()}}ngOnInit(){this.spyDataStreams(),this.carouselWindowWidth=this.el.nativeElement.querySelector(".owl-carousel").clientWidth}ngAfterContentChecked(){}ngAfterContentInit(){this.slides.toArray().length?(this.carouselService.setup(this.carouselWindowWidth,this.slides.toArray(),this.options),this.carouselService.initialize(this.slides.toArray()),this._winResizeWatcher()):this.logger.log("There are no slides to show. So the carousel won't be rendered"),this._slidesChangesSubscription=this.slides.changes.pipe(Ct(t=>{t.toArray().length?(this.carouselService.setup(this.carouselWindowWidth,t.toArray(),this.options),this.carouselService.initialize(t.toArray())):(this.carouselLoaded=!1,this.logger.log("There are no slides to show. So the carousel won't be re-rendered"))})).subscribe(()=>{})}ngOnDestroy(){this.resizeSubscription&&this.resizeSubscription.unsubscribe(),this._slidesChangesSubscription&&this._slidesChangesSubscription.unsubscribe(),this._allObservSubscription&&this._allObservSubscription.unsubscribe()}spyDataStreams(){this._viewCurSettings$=this.carouselService.getViewCurSettings().pipe(Ct(t=>{this.owlDOMData=t.owlDOMData,this.stageData=t.stageData,this.slidesData=t.slidesData,this.carouselLoaded||(this.carouselLoaded=!0),this.navData=t.navData,this.dotsData=t.dotsData,this.changeDetectorRef.markForCheck()})),this._initializedCarousel$=this.carouselService.getInitializedState().pipe(Ct(()=>{this.gatherTranslatedData(),this.initialized.emit(this.slidesOutputData)})),this._translatedCarousel$=this.carouselService.getTranslatedState().pipe(Ct(()=>{this.gatherTranslatedData(),this.translated.emit(this.slidesOutputData)})),this._changeCarousel$=this.carouselService.getChangeState().pipe(Ct(()=>{this.gatherTranslatedData(),this.change.emit(this.slidesOutputData)})),this._changedCarousel$=this.carouselService.getChangeState().pipe(si(t=>Hr(Ge(t).pipe(hn(()=>"position"===t.property.name),si(()=>Zi(this.slidesData)),Eg(t.property.value),An(this.carouselService.settings.items),ze(r=>{const s=this.carouselService.clonedIdPrefix,o=r.id.indexOf(s)>=0?r.id.slice(s.length):r.id;return Object.assign(Object.assign({},r),{id:o,isActive:!0})}),function Oie(){return function Iie(n,e){return arguments.length>=2?function(i){return No(cg(n,e),Nh(1),q0(e))(i)}:function(i){return No(cg((r,s,o)=>n(r,s,o+1)),Nh(1))(i)}}(Pie,[])}(),ze(r=>({slides:r,startPosition:this.carouselService.relative(t.property.value)}))))),Ct(t=>{this.gatherTranslatedData(),this.changed.emit(t.slides.length?t:this.slidesOutputData)})),this._draggingCarousel$=this.carouselService.getDragState().pipe(Ct(()=>{this.gatherTranslatedData(),this.dragging.emit({dragging:!0,data:this.slidesOutputData})}),si(()=>this.carouselService.getDraggedState().pipe(ze(()=>!!this.carouselService.is("animating")))),si(t=>t?this.carouselService.getTranslatedState().pipe(Wo()):Ge("not animating")),Ct(()=>{this.dragging.emit({dragging:!1,data:this.slidesOutputData})})),this._carouselMerge$=Hr(this._viewCurSettings$,this._translatedCarousel$,this._draggingCarousel$,this._changeCarousel$,this._changedCarousel$,this._initializedCarousel$),this._allObservSubscription=this._carouselMerge$.subscribe(()=>{})}_winResizeWatcher(){Object.keys(this.carouselService._options.responsive).length&&(this.resizeSubscription=this.resizeService.onResize$.pipe(hn(()=>this.carouselWindowWidth!==this.el.nativeElement.querySelector(".owl-carousel").clientWidth),Qm(this.carouselService.settings.responsiveRefreshRate)).subscribe(()=>{this.carouselService.onResize(this.el.nativeElement.querySelector(".owl-carousel").clientWidth),this.carouselWindowWidth=this.el.nativeElement.querySelector(".owl-carousel").clientWidth}))}onTransitionEnd(){this.carouselService.onTransitionEnd()}next(){!this.carouselLoaded||this.navigationService.next(this.carouselService.settings.navSpeed)}prev(){!this.carouselLoaded||this.navigationService.prev(this.carouselService.settings.navSpeed)}moveByDot(t){!this.carouselLoaded||this.navigationService.moveByDot(t)}to(t){!this.carouselLoaded||this.navigationService.toSlideById(t)}gatherTranslatedData(){let t;const i=this.carouselService.clonedIdPrefix,r=this.slidesData.filter(s=>!0===s.isActive).map(s=>({id:s.id.indexOf(i)>=0?s.id.slice(i.length):s.id,width:s.width,marginL:s.marginL,marginR:s.marginR,center:s.isCentered}));t=this.carouselService.relative(this.carouselService.current()),this.slidesOutputData={startPosition:t,slides:r}}startPausing(){this.autoplayService.startPausing()}startPlayML(){this.autoplayService.startPlayingMouseLeave()}startPlayTE(){this.autoplayService.startPlayingTouchEnd()}stopAutoplay(){this.autoplayService.isAutoplayStopped=!0,this.autoplayService.stop()}startAutoplay(){this.autoplayService.isAutoplayStopped=!1,this.autoplayService.play()}}return n.\u0275fac=function(t){return new(t||n)(D(Tt),D(qF),D(ha),D(XF),D(KF),D(JF),D(yM),D(ZF),D(QF),D(pM),D(pi),D(mM))},n.\u0275cmp=tn({type:n,selectors:[["owl-carousel-o"]],contentQueries:function(t,i,r){if(1&t&&kn(r,e2,4),2&t){let s;un(s=dn())&&(i.slides=s)}},hostBindings:function(t,i){1&t&&Pe("visibilitychange",function(s){return i.onVisibilityChange(s)},!1,bS)},inputs:{options:"options"},outputs:{translated:"translated",dragging:"dragging",change:"change",changed:"changed",initialized:"initialized"},features:[cn([XF,KF,ha,JF,yM,ZF,QF])],decls:4,vars:9,consts:[[1,"owl-carousel","owl-theme",3,"ngClass","mouseover","mouseleave","touchstart","touchend"],["owlCarousel",""],["class","owl-stage-outer",4,"ngIf"],[4,"ngIf"],[1,"owl-stage-outer"],[3,"owlDraggable","stageData","slidesData"],[1,"owl-nav",3,"ngClass"],[1,"owl-prev",3,"ngClass","innerHTML","click"],[1,"owl-next",3,"ngClass","innerHTML","click"],[1,"owl-dots",3,"ngClass"],["class","owl-dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"owl-dot",3,"ngClass","click"],[3,"innerHTML"]],template:function(t,i){1&t&&(O(0,"div",0,1),Pe("mouseover",function(){return i.startPausing()})("mouseleave",function(){return i.startPlayML()})("touchstart",function(){return i.startPausing()})("touchend",function(){return i.startPlayTE()}),ae(2,Fie,2,6,"div",2),ae(3,Uie,6,15,"ng-container",3),k()),2&t&&(j("ngClass",Jv(3,Vie,null==i.owlDOMData?null:i.owlDOMData.rtl,null==i.owlDOMData?null:i.owlDOMData.isLoaded,null==i.owlDOMData?null:i.owlDOMData.isResponsive,null==i.owlDOMData?null:i.owlDOMData.isMouseDragable,null==i.owlDOMData?null:i.owlDOMData.isGrab)),W(2),j("ngIf",i.carouselLoaded),W(1),j("ngIf",i.slides.toArray().length))},directives:function(){return[L0,nr,ire,zi]},styles:[".owl-theme[_ngcontent-%COMP%] { display: block; }"]}),n})(),ire=(()=>{class n{constructor(t,i,r,s,o){this.zone=t,this.el=i,this.renderer=r,this.carouselService=s,this.animateService=o,this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null,active:!1,moving:!1},this._oneDragMove$=new Ye,this.preparePublicSlide=a=>{const l=Object.assign({},a);return delete l.tplRef,l},this.bindOneMouseTouchMove=a=>{this._oneMouseTouchMove(a)},this.bindOnDragMove=a=>{this._onDragMove(a)},this.bindOnDragEnd=a=>{this._onDragEnd(a)},this._oneClickHandler=()=>{this.listenerOneClick=this.renderer.listen(this._drag.target,"click",()=>!1),this.listenerOneClick()}}onMouseDown(t){this.owlDraggable.isMouseDragable&&this._onDragStart(t)}onTouchStart(t){if(t.targetTouches.length>=2)return!1;this.owlDraggable.isTouchDragable&&this._onDragStart(t)}onTouchCancel(t){this._onDragEnd(t)}onDragStart(){if(this.owlDraggable.isMouseDragable)return!1}onSelectStart(){if(this.owlDraggable.isMouseDragable)return!1}ngOnInit(){this._oneMoveSubsription=this._oneDragMove$.pipe(Wo()).subscribe(()=>{this._sendChanges()})}ngOnDestroy(){this._oneMoveSubsription.unsubscribe()}_onDragStart(t){let i=null;3!==t.which&&(i=this._prepareDragging(t),this._drag.time=(new Date).getTime(),this._drag.target=t.target,this._drag.stage.start=i,this._drag.stage.current=i,this._drag.pointer=this._pointer(t),this.listenerMouseUp=this.renderer.listen(document,"mouseup",this.bindOnDragEnd),this.listenerTouchEnd=this.renderer.listen(document,"touchend",this.bindOnDragEnd),this.zone.runOutsideAngular(()=>{this.listenerOneMouseMove=this.renderer.listen(document,"mousemove",this.bindOneMouseTouchMove),this.listenerOneTouchMove=this.renderer.listen(document,"touchmove",this.bindOneMouseTouchMove)}))}_oneMouseTouchMove(t){const i=this._difference(this._drag.pointer,this._pointer(t));this.listenerATag&&this.listenerATag(),!(Math.abs(i.x)<3&&Math.abs(i.y)<3&&this._is("valid"))&&(Math.abs(i.x)<3&&Math.abs(i.x)<Math.abs(i.y)&&this._is("valid")||(this.listenerOneMouseMove(),this.listenerOneTouchMove(),this._drag.moving=!0,this.blockClickAnchorInDragging(t),this.listenerMouseMove=this.renderer.listen(document,"mousemove",this.bindOnDragMove),this.listenerTouchMove=this.renderer.listen(document,"touchmove",this.bindOnDragMove),t.preventDefault(),this._enterDragging(),this._oneDragMove$.next(t)))}blockClickAnchorInDragging(t){let i=t.target;for(;i&&!(i instanceof HTMLAnchorElement);)i=i.parentElement;i instanceof HTMLAnchorElement&&(this.listenerATag=this.renderer.listen(i,"click",()=>!1))}_onDragMove(t){let i;const r=this.carouselService.defineNewCoordsDrag(t,this._drag);!1!==r&&(i=r,t.preventDefault(),this._drag.stage.current=i,this._animate(i.x-this._drag.stage.start.x))}_animate(t){this.renderer.setStyle(this.el.nativeElement.children[0],"transform",`translate3d(${t}px,0px,0px`),this.renderer.setStyle(this.el.nativeElement.children[0],"transition","0s")}_onDragEnd(t){this.carouselService.owlDOMData.isGrab=!1,this.listenerOneMouseMove(),this.listenerOneTouchMove(),this._drag.moving&&(this.renderer.setStyle(this.el.nativeElement.children[0],"transform",""),this.renderer.setStyle(this.el.nativeElement.children[0],"transition",this.carouselService.speed(+this.carouselService.settings.dragEndSpeed||this.carouselService.settings.smartSpeed)/1e3+"s"),this._finishDragging(t),this.listenerMouseMove(),this.listenerTouchMove()),this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null,active:!1,moving:!1},this.listenerMouseUp(),this.listenerTouchEnd()}_prepareDragging(t){return this.carouselService.prepareDragging(t)}_finishDragging(t){this.carouselService.finishDragging(t,this._drag,this._oneClickHandler)}_pointer(t){return this.carouselService.pointer(t)}_difference(t,i){return this.carouselService.difference(t,i)}_is(t){return this.carouselService.is(t)}_enter(t){this.carouselService.enter(t)}_sendChanges(){this.carouselService.sendChanges()}onTransitionEnd(){this.carouselService.onTransitionEnd()}_enterDragging(){this.carouselService.enterDragging()}clear(t){this.animateService.clear(t)}}return n.\u0275fac=function(t){return new(t||n)(D(Bt),D(Tt),D(wi),D(ha),D(yM))},n.\u0275cmp=tn({type:n,selectors:[["owl-stage"]],hostBindings:function(t,i){1&t&&Pe("mousedown",function(s){return i.onMouseDown(s)})("touchstart",function(s){return i.onTouchStart(s)})("touchcancel",function(s){return i.onTouchCancel(s)})("dragstart",function(){return i.onDragStart()})("selectstart",function(){return i.onSelectStart()})},inputs:{owlDraggable:"owlDraggable",stageData:"stageData",slidesData:"slidesData"},decls:3,vars:8,consts:[[1,"owl-stage",3,"ngStyle","transitionend"],[4,"ngFor","ngForOf"],[1,"owl-item",3,"ngClass","ngStyle","animationend"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){1&t&&(O(0,"div")(1,"div",0),Pe("transitionend",function(){return i.onTransitionEnd()}),ae(2,$ie,3,9,"ng-container",1),k()()),2&t&&(W(1),j("ngStyle",Jv(2,jie,i.stageData.width+"px",i.stageData.transform,i.stageData.transition,i.stageData.paddingL?i.stageData.paddingL+"px":"",i.stageData.paddingR?i.stageData.paddingR+"px":"")),W(1),j("ngForOf",i.slidesData))},directives:[QD,zi,L0,nr,Ts],encapsulation:2,data:{animation:[xb("autoHeight",[RR("nulled",Ko({height:0})),RR("full",Ko({height:"*"})),Tg("full => nulled",[Cg("700ms 350ms")]),Tg("nulled => full",[Cg(350)])])]}}),n})(),rre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({providers:[Jie,qF,ere,pM],imports:[[Gi]]}),n})();const sre=["imgContainer"];function ore(n,e){if(1&n&&(O(0,"div",23,24),Qe(2,"img",25),k()),2&n){const t=oe().$implicit,i=oe(2).$implicit;W(2),j("src",t,ws)("alt",i.Title)}}function are(n,e){if(1&n&&(Ca(0),ae(1,ore,3,2,"ng-template",22),Ta()),2&n){const t=oe(2),i=t.$implicit,r=t.index,s=oe();W(1),j("id",i.Title+s.slide+r)}}function lre(n,e){if(1&n&&(O(0,"owl-carousel-o",20),ae(1,are,2,1,"ng-container",21),k()),2&n){const t=oe().$implicit;j("options",oe().customOptions),W(1),j("ngForOf",t.imgs)}}function cre(n,e){if(1&n&&(O(0,"div",26)(1,"div",27)(2,"div",28),Qe(3,"img",29),k()()()),2&n){const t=oe().$implicit;W(3),j("src",t.imgs[0],ws)("alt",t.imgs[0])}}function ure(n,e){if(1&n&&(O(0,"li",30)(1,"span",31),re(2),k()()),2&n){const t=e.$implicit;W(2),ii(t)}}function dre(n,e){1&n&&(O(0,"a",32),Qe(1,"i",33),k()),2&n&&j("href",oe().$implicit.ghLink,ws)}function hre(n,e){1&n&&(O(0,"a",32),Qe(1,"i",34),k()),2&n&&j("href",oe().$implicit.demoLink,ws)}function fre(n,e){if(1&n&&(O(0,"div",23),Qe(1,"img",25),k()),2&n){const t=oe().$implicit,i=oe(2).$implicit;W(1),j("src",t,ws)("alt",i.Title)}}function pre(n,e){if(1&n&&(Ca(0),ae(1,fre,2,2,"ng-template",22),Ta()),2&n){const t=oe(2),i=t.$implicit,r=t.index,s=oe();W(1),j("id",i.Title+s.slide+r)}}function gre(n,e){if(1&n&&(O(0,"owl-carousel-o",20),ae(1,pre,2,1,"ng-container",21),k()),2&n){const t=oe().$implicit;j("options",oe().customOptions),W(1),j("ngForOf",t.imgs)}}function mre(n,e){if(1&n&&(O(0,"div",26)(1,"div",27)(2,"div",28),Qe(3,"img",29),k()()()),2&n){const t=oe().$implicit;W(3),j("src",t.imgs[0],ws)("alt",t.imgs[0])}}function _re(n,e){if(1&n){const t=bn();O(0,"div",7),ae(1,lre,2,2,"owl-carousel-o",8),ae(2,cre,4,2,"div",9),O(3,"div",10)(4,"div",11)(5,"h4",12),re(6),Ni(7,"translate"),k(),O(8,"h5",13),re(9),k(),O(10,"div",14),Pe("click",function(){return Gt(t),oe().debug()}),Qe(11,"p",15),k(),O(12,"ul",16),ae(13,ure,3,1,"li",17),k(),O(14,"div",18),ae(15,dre,2,1,"a",19),ae(16,hre,2,1,"a",19),k()()(),ae(17,gre,2,2,"owl-carousel-o",8),ae(18,mre,4,2,"div",9),k()}if(2&n){const t=e.$implicit,i=e.index;W(1),j("ngIf",i%2==0),W(1),j("ngIf",i%2==0),W(1),zC("background-image: url('",t.img,"');"),ft("proyect-info-right",i%2==0)("proyect-info-left",i%2!=0),W(2),ft("text-right",i%2==0)("text-left",i%2!=0),W(1),ii(Ii(7,33,"FeatureProjects.Label")),W(2),ft("text-right",i%2==0)("text-left",i%2!=0),W(1),ii(t.Title),W(2),j("innerHTML",t.Description,xa),W(1),ft("justify-content-end",i%2==0)("justify-content-start",i%2!=0),W(1),j("ngForOf",t.Technologies),W(1),ft("text-right",i%2==0)("text-left",i%2!=0),W(1),j("ngIf",t.ghLink),W(1),j("ngIf",t.demoLink),W(1),j("ngIf",i%2!=0),W(1),j("ngIf",i%2!=0)}}let yre=(()=>{class n{constructor(t){this.analyticsService=t,this.customOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!1,navSpeed:700,items:1,autoplay:!0,autoplayTimeout:3e3}}ngOnInit(){}debug(){this.imgContainer.nativeElement.scroll({top:this.imgContainer.nativeElement.scrollHeight,left:0,behavior:"smooth"})}}return n.\u0275fac=function(t){return new(t||n)(D(Il))},n.\u0275cmp=tn({type:n,selectors:[["app-proyects"]],viewQuery:function(t,i){if(1&t&&Vo(sre,5),2&t){let r;un(r=dn())&&(i.imgContainer=r.first)}},decls:12,vars:6,consts:[["id","proyects",1,"section","proyects"],[1,"container"],[1,"section-box"],["data-aos","fade-up","data-aos-duration","1000"],[1,"section-title"],[1,"n-section-title"],["class","d-flex proyect-container","data-aos","fade-up","data-aos-duration","1000",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000",1,"d-flex","proyect-container"],["class","owl-carousel-o",3,"options",4,"ngIf"],["class","img-feature-proyect-container","data-aos","fade-up","data-aos-duration","1000",4,"ngIf"],[1,"h-100"],[1,"proyect-box"],[1,"feature-proyect"],[1,"proyect-name"],[1,"proyect-description-box",3,"click"],[1,"mb-0",3,"innerHTML"],[1,"proyect-skills"],["class","ml-3",4,"ngFor","ngForOf"],[1,"proyect-links"],["style","color: inherit","target","_blank",3,"href",4,"ngIf"],[1,"owl-carousel-o",3,"options"],[4,"ngFor","ngForOf"],["carouselSlide","",3,"id"],[1,"img-container"],["imgContainer",""],[1,"img-feature-proyect","rounded",3,"src","alt"],["data-aos","fade-up","data-aos-duration","1000",1,"img-feature-proyect-container"],[1,"img-feature-proyect-box"],[1,"img-container",2,"width","auto"],["width","600px",1,"img-feature-proyect","rounded",3,"src","alt"],[1,"ml-3"],[1,"underline","technology"],["target","_blank",2,"color","inherit",3,"href"],[1,"ml-3","fab","fa-github"],[1,"ml-3","fas","fa-external-link-alt"]],template:function(t,i){1&t&&(O(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4)(5,"span",5),re(6,"03."),k(),re(7),Ni(8,"translate"),k()(),ae(9,_re,19,35,"div",6),Ni(10,"translate"),Qe(11,"div"),k()()()),2&t&&(W(7),Ri(" ",Ii(8,2,"FeatureProjects.Title")," "),W(2),j("ngForOf",Ii(10,4,"FeatureProjects.Projects")))},directives:[zi,nr,nre,e2],pipes:[wd],styles:[".proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]{height:360px;margin:100px 0}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-info-left[_ngcontent-%COMP%]{width:50%;margin-right:-57px;margin-left:0;display:table}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-info-right[_ngcontent-%COMP%]{width:50%;margin-left:-57px;margin-right:0;display:table}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]   .feature-proyect[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#64ffda;font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace;margin-top:10px;padding-top:0}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]   .proyect-name[_ngcontent-%COMP%]{font-size:28px;margin:0 0 20px;color:#ccd6f6}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]   .proyect-description-box[_ngcontent-%COMP%]{box-shadow:0 10px 30px -15px #020c1bb3;transition:all .25s cubic-bezier(.645,.045,.355,1);position:relative;z-index:2;padding:25px;background-color:#112240;color:#a8b2d1;font-size:18px;border-radius:3px}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]   .proyect-skills[_ngcontent-%COMP%]{position:relative;z-index:2;display:flex;flex-wrap:wrap;padding:0;margin:25px 0 10px;list-style:none}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]   .proyect-skills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:0;font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace;font-size:13px;color:#8892b0;margin-bottom:7px;white-space:nowrap}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]   .proyect-skills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .technology[_ngcontent-%COMP%]{padding-bottom:5px}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]   .proyect-links[_ngcontent-%COMP%]{margin-top:10px}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]   .proyect-links[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}.owl-carousel-o[_ngcontent-%COMP%]{width:600px}.img-feature-proyect-container[_ngcontent-%COMP%]{display:none}@media (min-width: 768px) and (max-width: 1300px){.owl-carousel-o[_ngcontent-%COMP%]{display:none}.img-feature-proyect-container[_ngcontent-%COMP%]{width:50%;display:table!important;height:-webkit-fill-available}.img-feature-proyect-container[_ngcontent-%COMP%]   .img-feature-proyect-box[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.img-feature-proyect-container[_ngcontent-%COMP%]   .img-feature-proyect[_ngcontent-%COMP%]{width:100%}.proyect-info-right[_ngcontent-%COMP%], .proyect-info-left[_ngcontent-%COMP%]{width:50%}}@media (min-width: 768px){.proyect-info-right[_ngcontent-%COMP%], .proyect-info-left[_ngcontent-%COMP%]{background-image:none!important}}@media (max-width: 768px){.owl-carousel-o[_ngcontent-%COMP%]{display:none}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]{height:100%!important;margin:33px 0!important}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-info-left[_ngcontent-%COMP%], .proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-info-right[_ngcontent-%COMP%]{width:100%}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-description-box[_ngcontent-%COMP%]{padding:0!important;box-shadow:none!important;position:relative;z-index:2;padding:25px;background-color:transparent!important;color:#a8b2d1;font-size:18px;border-radius:3px}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-info-right[_ngcontent-%COMP%], .proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-info-left[_ngcontent-%COMP%]{display:block!important;margin:0!important;background-size:cover;background-position:center;background-repeat:no-repeat;border-radius:3px}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-info-right[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%], .proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .proyect-info-left[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]{display:block}.proyects[_ngcontent-%COMP%]   .proyect-container[_ngcontent-%COMP%]   .img-feature-proyect-container[_ngcontent-%COMP%]{display:none}.proyects[_ngcontent-%COMP%]   .proyect-info-right[_ngcontent-%COMP%], .proyects[_ngcontent-%COMP%]   .proyect-info-left[_ngcontent-%COMP%]{padding:0}.proyects[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%], .proyects[_ngcontent-%COMP%]   .text-left[_ngcontent-%COMP%]{text-align:center!important}.proyects[_ngcontent-%COMP%]   .justify-content-end[_ngcontent-%COMP%], .proyects[_ngcontent-%COMP%]   .justify-content-start[_ngcontent-%COMP%]{justify-content:center!important}.proyects[_ngcontent-%COMP%]   .proyect-info-right[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%], .proyects[_ngcontent-%COMP%]   .proyect-info-left[_ngcontent-%COMP%]   .proyect-box[_ngcontent-%COMP%]{padding:20px;background:#0a192fe3}}  .owl-theme .owl-dots .owl-dot.active span,   .owl-theme .owl-dots .owl-dot:hover span{background-color:#fff!important}  .owl-theme .owl-dots .owl-dot span{background:#ffffff33}.img-container[_ngcontent-%COMP%]{width:600px;max-height:320px;overflow:auto;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 5px #8892b0;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#64ffda;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64ffda}"]}),n})();function vre(n,e){if(1&n&&(O(0,"li")(1,"span",22),re(2),k()()),2&n){const t=e.$implicit;W(2),ii(t)}}function bre(n,e){if(1&n){const t=bn();O(0,"div",9),Pe("click",function(r){const o=Gt(t).$implicit;return oe().redirect(o.demoLink,r)}),O(1,"div",10)(2,"div",11)(3,"div",12),Qe(4,"img",13),k(),O(5,"div",14)(6,"a",15),Pe("click",function(){return Gt(t),oe().analyticsService.sendAnalyticEvent("click_pokemonlist_external_link","proyects","click")}),Qe(7,"i",16),k(),O(8,"a",15),Pe("click",function(){return Gt(t),oe().analyticsService.sendAnalyticEvent("click_pokemonlist_github","proyects","click")}),Qe(9,"i",17),k()(),O(10,"h5",18),re(11),k(),O(12,"p",19),re(13),k()(),O(14,"div")(15,"ul",20),ae(16,vre,3,1,"li",21),k()()()()}if(2&n){const t=e.$implicit;W(6),j("href",t.demoLink,ws),W(2),j("href",t.ghLink,ws),W(3),ii(t.Title),W(2),Ri(" ",t.Description," "),W(3),j("ngForOf",t.Technologies)}}let wre=(()=>{class n{constructor(t,i){this.router=t,this.analyticsService=i}ngOnInit(){this.router.events.subscribe(t=>{t instanceof Na&&window.scrollTo(0,0)})}redirect(t,i){const r=i.target.id;"demoLink"==r||"ghLink"==r||window.open(t,"_blank")}}return n.\u0275fac=function(t){return new(t||n)(D(Wi),D(Il))},n.\u0275cmp=tn({type:n,selectors:[["app-more-proyects"]],decls:13,vars:6,consts:[[1,"section","more-proyects"],[1,"container"],[1,"section-box"],[1,""],[1,"section-title"],[1,"n-section-title"],[1,"mt-5"],[1,"row","p-0"],["class","col-12 col-md-6 col-lg-6 col-xl-4 proyect-col","data-aos","fade-up","data-aos-duration","1000",3,"click",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000",1,"col-12","col-md-6","col-lg-6","col-xl-4","proyect-col",3,"click"],[1,"more-proyect-box"],[1,"row","w-100","text-left","m-0","p-0"],[1,"col-6","p-0"],["src","assets/icons/folder.svg","width","40"],[1,"col-6","d-flex","p-0","justify-content-end"],["target","_blank",2,"color","inherit",3,"href","click"],["id","demoLink",1,"ml-3","fas","fa-external-link-alt"],["id","ghLink",1,"ml-4","fab","fa-github"],[1,"other-proyect-title","mt-4"],[1,"other-proyect-description"],[1,"more-proyects-skills"],[4,"ngFor","ngForOf"],[1,"underline"]],template:function(t,i){1&t&&(O(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4)(5,"span",5),re(6,"04."),k(),re(7),Ni(8,"translate"),k()(),O(9,"div",6)(10,"div",7),ae(11,bre,17,5,"div",8),Ni(12,"translate"),k()()()()()),2&t&&(W(7),Ri(" ",Ii(8,2,"OtherProjects.Title")," "),W(4),j("ngForOf",Ii(12,4,"OtherProjects.Projects")))},directives:[zi],pipes:[wd],styles:[".more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]{padding:10px;height:400px}.more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]   .more-proyect-box[_ngcontent-%COMP%]{box-shadow:0 10px 30px -15px #020c1bb3;display:flex;justify-content:space-between;align-items:center;flex-direction:column;align-items:flex-start;position:relative;padding:2rem 1.75rem;height:100%;border-radius:3px;transition:all .25s cubic-bezier(.645,.045,.355,1);background-color:#112240;cursor:pointer}.more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]   .more-proyect-box[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]   .more-proyect-box[_ngcontent-%COMP%]:hover, .more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]   .more-proyect-box[_ngcontent-%COMP%]:focus{box-shadow:0 20px 30px -15px #020c1bb3}.more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]   .more-proyect-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#64ffda}.more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]   .more-proyect-box[_ngcontent-%COMP%]   .other-proyect-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px;color:#ccd6f6}.more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]   .more-proyect-box[_ngcontent-%COMP%]   .other-proyect-description[_ngcontent-%COMP%]{font-size:17px;color:#a8b2d1}.more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]   .more-proyect-box[_ngcontent-%COMP%]   .more-proyects-skills[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-grow:1;flex-wrap:wrap;padding:0;margin:20px 0 0;list-style:none}.more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]   .more-proyect-box[_ngcontent-%COMP%]   .more-proyects-skills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;color:#8892b0;line-height:1.75;margin-right:15px;font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace}.more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]   .more-proyect-box[_ngcontent-%COMP%]   .more-proyects-skills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]{padding-bottom:3.5px}@media (max-width: 1300px){.more-proyects[_ngcontent-%COMP%]   .proyect-col[_ngcontent-%COMP%]{height:auto}}"]}),n})();const Mre=function(n,e){return[n,e,0]};let xre=(()=>{class n{constructor(t){this.analyticsService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(D(Il))},n.\u0275cmp=tn({type:n,selectors:[["app-contact"]],decls:20,vars:18,consts:[["id","contact",1,"section","contact"],[1,"container"],[2,"display","flex","justify-content","space-evenly","flex-direction","row"],[1,"section-box"],["data-aos","fade-up","data-aos-duration","1000",1,"mb-4"],[1,"contact-pre-title","big-subtitle"],[1,"e-font","contact-title","big-title"],["data-aos","fade-up","data-aos-duration","1000"],[1,"mt-5"],["href","mailto:andresjosehr@gmail.com","target","_blank","data-aos","fade-up","data-aos-duration","1000",1,"main-btn",3,"click"],[2,"padding-top","150px","padding-left","100px"],[3,"animationName","size","position"]],template:function(t,i){1&t&&(O(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),re(6),Ni(7,"translate"),k(),O(8,"h4",6),re(9),Ni(10,"translate"),k()(),O(11,"p",7),re(12),Ni(13,"translate"),k(),O(14,"div",8)(15,"a",9),Pe("click",function(){return i.analyticsService.sendAnalyticEvent("click_send_mail","contact","email")}),re(16),Ni(17,"translate"),k()()(),O(18,"div",10),Qe(19,"app-human-animation",11),k()()()()),2&t&&(W(6),Ri("05. ",Ii(7,7,"Contact.Pretitle"),""),W(3),Ri(" ",Ii(10,9,"Contact.Title")," "),W(3),Ri(" ",Ii(13,11,"Contact.Content")," "),W(4),Ri(" ",Ii(17,13,"Contact.Btn")," "),W(3),j("animationName","dancing")("size",3)("position",Js(15,Mre,-2,-2.5)))},directives:[gw],pipes:[wd],styles:[".contact[_ngcontent-%COMP%]{max-width:1000px;text-align:center;max-width:600px;margin:0 auto;height:100vh;display:table}.contact[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.contact[_ngcontent-%COMP%]   .contact-title[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;white-space:nowrap;font-size:60px;font-weight:600;color:#ccd6f6;margin:auto;width:-moz-fit-content;width:fit-content}.contact[_ngcontent-%COMP%]   .contact-pre-title[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;margin:10px 0 20px;width:100%;white-space:nowrap;font-size:32px;display:block;color:#64ffda;font-size:16px;font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace;font-weight:400;justify-content:center;text-align:center}@media (max-width: 768px){.contact[_ngcontent-%COMP%]{height:100vh;padding:0!important;margin:0 auto!important;display:table}.contact[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}}"]}),n})(),Sre=(()=>{class n{constructor(t){this.analyticsService=t}ngOnInit(){this.analyticsService.sendAnalyticPageView("/inicio","Se entro a inicio")}}return n.\u0275fac=function(t){return new(t||n)(D(Il))},n.\u0275cmp=tn({type:n,selectors:[["app-home"]],decls:7,vars:0,template:function(t,i){1&t&&(O(0,"main"),Qe(1,"app-banner")(2,"app-about")(3,"app-jobs")(4,"app-proyects")(5,"app-more-proyects")(6,"app-contact"),k())},directives:[CZ,DZ,Nie,yre,wre,xre],styles:[""]}),n})();function Ere(n,e){1&n&&(O(0,"section",1)(1,"div",2)(2,"div",3)(3,"h1",4),re(4,"Proyectos"),k(),O(5,"p",5),re(6,"Una lista mas completa"),k()(),O(7,"div",6)(8,"table",7)(9,"thead")(10,"tr")(11,"th"),re(12,"Year"),k(),O(13,"th"),re(14,"Title"),k(),O(15,"th",8),re(16,"Made at"),k(),O(17,"th",8),re(18,"Built with"),k(),O(19,"th"),re(20,"Link"),k()()(),O(21,"tbody")(22,"tr",9)(23,"td",10),re(24,"2020"),k(),O(25,"td",11),re(26,"Sistem web Avicola"),k(),O(27,"td",12)(28,"span"),re(29,"Monagas - VE"),k()(),O(30,"td",13)(31,"span"),re(32,"Laravel"),O(33,"span",14),re(34,"\xb7"),k()(),O(35,"span"),re(36,"Webpack"),k()(),O(37,"td",15)(38,"span")(39,"a",16),Qe(40,"i",17),k()(),O(41,"span")(42,"a",18),Qe(43,"i",19),k()()()(),O(44,"tr",9)(45,"td",10),re(46,"2020"),k(),O(47,"td",11),re(48,"Cenem"),k(),O(49,"td",12)(50,"span"),re(51,"Monagas - VE"),k()(),O(52,"td",13)(53,"span"),re(54,"Wordpress"),O(55,"span",14),re(56,"\xb7"),k()(),O(57,"span"),re(58,"Divi"),k()(),O(59,"td",15)(60,"span")(61,"a",20),Qe(62,"i",19),k()()()(),O(63,"tr",9)(64,"td",10),re(65,"2020"),k(),O(66,"td",11),re(67,"ClerckContable"),k(),O(68,"td",12)(69,"span"),re(70,"Caracas - VE"),k()(),O(71,"td",13)(72,"span"),re(73,"HTML"),O(74,"span",14),re(75,"\xb7"),k()(),O(76,"span"),re(77,"CSS"),k()(),O(78,"td",15)(79,"span")(80,"a",21),Qe(81,"i",17),k()(),O(82,"span")(83,"a",22),Qe(84,"i",19),k()()()(),O(85,"tr",9)(86,"td",10),re(87,"2020"),k(),O(88,"td",11),re(89,"Innerfire"),k(),O(90,"td",12)(91,"span"),re(92,"Monagas - VE"),k()(),O(93,"td",13)(94,"span"),re(95,"Wordpress"),O(96,"span",14),re(97,"\xb7"),k()(),O(98,"span"),re(99,"HTML"),O(100,"span",14),re(101,"\xb7"),k()(),O(102,"span"),re(103,"CSS"),k()(),O(104,"td",15)(105,"span")(106,"a",23),Qe(107,"i",19),k()()()(),O(108,"tr",9)(109,"td",10),re(110,"2020"),k(),O(111,"td",11),re(112,"Inver"),k(),O(113,"td",12)(114,"span"),re(115,"Monagas - VE"),k()(),O(116,"td",13)(117,"span"),re(118,"Wordpress"),O(119,"span",14),re(120,"\xb7"),k()(),O(121,"span"),re(122,"HTML"),O(123,"span",14),re(124,"\xb7"),k()(),O(125,"span"),re(126,"CSS"),k()(),O(127,"td",15)(128,"span")(129,"a",24),Qe(130,"i",17),k()(),O(131,"span")(132,"a",25),Qe(133,"i",19),k()()()(),O(134,"tr",9)(135,"td",10),re(136,"2020"),k(),O(137,"td",11),re(138,"Persimas"),k(),O(139,"td",12)(140,"span"),re(141,"Caracas - VE"),k()(),O(142,"td",13)(143,"span"),re(144,"Bootstrap"),O(145,"span",14),re(146,"\xb7"),k()(),O(147,"span"),re(148,"HTML"),O(149,"span",14),re(150,"\xb7"),k()(),O(151,"span"),re(152,"CSS"),k()(),O(153,"td",15)(154,"span")(155,"a",26),Qe(156,"i",17),k()(),O(157,"span")(158,"a",27),Qe(159,"i",19),k()()()(),O(160,"tr",9)(161,"td",10),re(162,"2020"),k(),O(163,"td",11),re(164,"Rodrigo"),k(),O(165,"td",12)(166,"span"),re(167,"Caracas - VE"),k()(),O(168,"td",13)(169,"span"),re(170,"Bootstrap"),O(171,"span",14),re(172,"\xb7"),k()(),O(173,"span"),re(174,"HTML"),O(175,"span",14),re(176,"\xb7"),k()(),O(177,"span"),re(178,"CSS"),k()(),O(179,"td",15)(180,"span")(181,"a",28),Qe(182,"i",17),k()(),O(183,"span")(184,"a",29),Qe(185,"i",19),k()()()(),O(186,"tr",9)(187,"td",10),re(188,"2020"),k(),O(189,"td",11),re(190,"Salud al Dia"),k(),O(191,"td",12)(192,"span"),re(193,"Caracas - VE"),k()(),O(194,"td",13)(195,"span"),re(196,"Wordpress"),O(197,"span",14),re(198,"\xb7"),k()(),O(199,"span"),re(200,"Divi"),k()(),O(201,"td",15)(202,"span")(203,"a",30),Qe(204,"i",19),k()()()()()()()()()),2&n&&j("@archiveAnimation",void 0)}const Cre=[{path:":language?",component:Sre},{path:":language?/proyectos",component:(()=>{class n{constructor(){this.state=!1}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.state=!0},1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=tn({type:n,selectors:[["app-archive"]],decls:1,vars:1,consts:[["class","section archive",4,"ngIf"],[1,"section","archive"],[1,"container"],[1,"archive-title"],[1,"big-title"],[1,"archive-subtitle","big-subtitle"],[1,"archive-table-container"],[1,"archive__StyledTable-lXDeB","haZMKe"],[1,"hide-on-mobile"],["data-sr-id","3"],[1,"proyect-date"],[1,"proyect-title"],[1,"proyect-company"],[1,"proyect-skills"],[1,"separator"],[1,"proyect-links"],["href","https://github.com/andresjosehr/Avicola",2,"color","inherit"],[1,"ml-4","fab","fa-github"],["href","http://avicola.luzzidigital.fav/",2,"color","inherit"],[1,"ml-4","fas","fa-external-link-alt"],["href","http://cenem.luzzidigital.fav/",2,"color","inherit"],["href","https://github.com/andresjosehr/Clerkcontable",2,"color","inherit"],["href","https://clerckcontable.luzzidigital.fav",2,"color","inherit"],["href","http://innerfire.luzzidigital.fav/",2,"color","inherit"],["href","https://github.com/andresjosehr/inver-content/",2,"color","inherit"],["href","http://inver.luzzidigital.fav/",2,"color","inherit"],["href","https://github.com/andresjosehr/Persimas",2,"color","inherit"],["href","https://persimas.luzzidigital.fav",2,"color","inherit"],["href","https://github.com/andresjosehr/Rodrigo",2,"color","inherit"],["href","https://rodrigo.luzzidigital.fav",2,"color","inherit"],["href","https://saludaldia.luzzidigital.fav",2,"color","inherit"]],template:function(t,i){1&t&&ae(0,Ere,205,1,"section",0),2&t&&j("ngIf",i.state)},styles:[".archive[_ngcontent-%COMP%]{margin:0 auto;width:100%;max-width:1600px;min-height:100vh;padding-top:135px;padding-bottom:200px}.archive[_ngcontent-%COMP%]   .archive-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px;line-height:1.1;font-weight:600;color:#ccd6f6;margin:0 0 10px;font-family:Calibre,San Francisco,SF Pro Text,-apple-system,system-ui,BlinkMacSystemFont,Roboto,Helvetica Neue,Segoe UI,Arial,sans-serif}.archive[_ngcontent-%COMP%]   .archive-subtitle[_ngcontent-%COMP%]{color:#64ffda;margin:0 0 20px;font-size:16px;font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace;font-weight:400;line-height:1.5}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]{visibility:visible;opacity:1;transform:scale(1);transition:opacity .5s cubic-bezier(.645,.045,.355,1) .2s,transform .5s cubic-bezier(.645,.045,.355,1) .2s;margin:100px -20px}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{cursor:default;line-height:1.5;padding:10px 20px}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{visibility:visible;opacity:1;transform:scale(1);transition:all .25s cubic-bezier(.645,.045,.355,1) 0s,opacity .5s cubic-bezier(.645,.045,.355,1) 0s,transform .5s cubic-bezier(.645,.045,.355,1) 0s}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover, .archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:focus{background-color:#112240}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .proyect-date[_ngcontent-%COMP%]{color:#64ffda;font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace;font-size:16px;font-weight:400;cursor:default;line-height:1.5;padding:10px 20px;width:10%}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .proyect-title[_ngcontent-%COMP%]{color:#ccd6f6;font-size:20px;font-weight:700;cursor:default;line-height:1.5;padding:10px 20px}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .proyect-company[_ngcontent-%COMP%]{width:15%;font-size:18px;cursor:default;line-height:1.5;padding:10px 20px}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .proyect-skills[_ngcontent-%COMP%]{font-size:12px;font-family:SF Mono,Fira Code,Fira Mono,Roboto Mono,Lucida Console,Monaco,Monospace;cursor:default;line-height:1.5;padding:10px 20px}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .proyect-links[_ngcontent-%COMP%]{cursor:default;line-height:1.5;padding:10px 20px}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 5px;display:inline-block}.archive[_ngcontent-%COMP%]   .archive-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{cursor:default;line-height:1.5;padding:12.9px 20px}@media (max-width: 768px){.proyect-company[_ngcontent-%COMP%], .proyect-skills[_ngcontent-%COMP%], .hide-on-mobile[_ngcontent-%COMP%]{display:none}}"],data:{animation:[xb("archiveAnimation",[Tg(":enter",[Jj("*",[Ko({opacity:0,transform:"translateY(100%)"}),Zj(15,[Cg("500ms cubic-bezier(0.35, 0, 0.25, 1)",Ko({opacity:1,transform:"none"}))])])])])]}}),n})()},{path:"**",pathMatch:"full",redirectTo:"/"}];let Tre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[pb.forRoot(Cre,{relativeLinkResolution:"legacy"})],pb]}),n})();var Dre=dt(123);let Are=(()=>{class n{constructor(t,i){this.translateService=t,this.location=i}initLanguage(){this.translateService.addLangs(["en","es"]);let t=navigator.language||navigator.userLanguage;t=t.split("-").includes("es")?"es":"en",this.translateService.setDefaultLang(t),this.location.go(t),this.language=t}changeLanguage(t){this.translateService.setDefaultLang(t),this.location.go(t),this.language=t}}return n.\u0275fac=function(t){return new(t||n)(q(hc),q(Eh))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rre=(()=>{class n{constructor(t,i,r,s,o){this.titleService=t,this.metaService=i,this.translateService=r,this.location=s,this.languageService=o,this.title="andresjosehr-portfolio"}ngOnInit(){this.languageService.initLanguage(),this.titleService.setTitle("Jos\xe9 Andr\xe9s | Frontend Developer"),this.metaService.addTags([{name:"keywords",content:"Frontend, software, developer"},{name:"description",content:"Con 4 a\xf1os de experiencia desarrollando sistemas, interfaces, bots y soluciones tecnol\xf3gicas  para hacer de la web un lugar mejor. En mi trabajo me gusta liderar, proponer y ejecutar ideas, escribir y refactorizar c\xf3digo limpio, reutilizable y escalable."}]),Dre.init()}}return n.\u0275fac=function(t){return new(t||n)(D(_A),D(mA),D(hc),D(Eh),D(Are))},n.\u0275cmp=tn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&Qe(0,"router-outlet")},directives:[ob],styles:[""]}),n})();class t2{}class n2{}class fa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof fa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new fa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof fa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Nre{encodeKey(e){return i2(e)}encodeValue(e){return i2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Pre=/%(\d[a-f0-9])/gi,Ore={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function i2(n){return encodeURIComponent(n).replace(Pre,(e,t)=>{var i;return null!==(i=Ore[t])&&void 0!==i?i:e})}function r2(n){return`${n}`}class sl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Nre,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ire(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new sl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(r2(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(r2(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Lre{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function s2(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function o2(n){return"undefined"!=typeof Blob&&n instanceof Blob}function a2(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Of{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Fre(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new fa),this.context||(this.context=new Lre),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new sl,this.urlWithParams=t}serializeBody(){return null===this.body?null:s2(this.body)||o2(this.body)||a2(this.body)||function kre(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof sl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||a2(this.body)?null:o2(this.body)?this.body.type||null:s2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new Of(i,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a})}}var Ei=(()=>((Ei=Ei||{})[Ei.Sent=0]="Sent",Ei[Ei.UploadProgress=1]="UploadProgress",Ei[Ei.ResponseHeader=2]="ResponseHeader",Ei[Ei.DownloadProgress=3]="DownloadProgress",Ei[Ei.Response=4]="Response",Ei[Ei.User=5]="User",Ei))();class vM{constructor(e,t=200,i="OK"){this.headers=e.headers||new fa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class bM extends vM{constructor(e={}){super(e),this.type=Ei.ResponseHeader}clone(e={}){return new bM({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class E_ extends vM{constructor(e={}){super(e),this.type=Ei.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new E_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class l2 extends vM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function wM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let C_=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Of)s=t;else{let l,c;l=r.headers instanceof fa?r.headers:new fa(r.headers),r.params&&(c=r.params instanceof sl?r.params:new sl({fromObject:r.params})),s=new Of(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Ge(s).pipe(Tl(l=>this.handler.handle(l)));if(t instanceof Of||"events"===r.observe)return o;const a=o.pipe(hn(l=>l instanceof E_));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ze(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ze(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ze(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(ze(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new sl).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,wM(r,i))}post(t,i,r={}){return this.request("POST",t,wM(r,i))}put(t,i,r={}){return this.request("PUT",t,wM(r,i))}}return n.\u0275fac=function(t){return new(t||n)(q(t2))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class c2{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const u2=new tt("HTTP_INTERCEPTORS");let Bre=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const Ure=/^\)\]\}',?\n/;let d2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new wt(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((f,p)=>r.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=r.statusText||"OK",p=new fa(r.getAllResponseHeaders()),_=function Vre(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new bM({headers:p,status:r.status,statusText:f,url:_}),o},l=()=>{let{headers:f,status:p,statusText:_,url:m}=a(),g=null;204!==p&&(g=void 0===r.response?r.responseText:r.response),0===p&&(p=g?200:0);let v=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof g){const y=g;g=g.replace(Ure,"");try{g=""!==g?JSON.parse(g):null}catch(b){g=y,v&&(v=!1,g={error:b,text:g})}}v?(i.next(new E_({body:g,headers:f,status:p,statusText:_,url:m||void 0})),i.complete()):i.error(new l2({error:g,headers:f,status:p,statusText:_,url:m||void 0}))},c=f=>{const{url:p}=a(),_=new l2({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});i.error(_)};let u=!1;const d=f=>{u||(i.next(a()),u=!0);let p={type:Ei.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&!!r.responseText&&(p.partialText=r.responseText),i.next(p)},h=f=>{let p={type:Ei.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),i.next(p)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",d),null!==s&&r.upload&&r.upload.addEventListener("progress",h)),r.send(s),i.next({type:Ei.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",d),null!==s&&r.upload&&r.upload.removeEventListener("progress",h)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(q(rA))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const MM=new tt("XSRF_COOKIE_NAME"),xM=new tt("XSRF_HEADER_NAME");class h2{}let Hre=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=YD(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(q(rn),q(wo),q(MM))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),SM=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(q(h2),q(xM))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),zre=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(u2,[]);this.chain=i.reduceRight((r,s)=>new c2(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(q(n2),q(Gn))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Gre=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:SM,useClass:Bre}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:MM,useValue:t.cookieName}:[],t.headerName?{provide:xM,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({providers:[SM,{provide:u2,useExisting:SM,multi:!0},{provide:h2,useClass:Hre},{provide:MM,useValue:"XSRF-TOKEN"},{provide:xM,useValue:"X-XSRF-TOKEN"}]}),n})(),Wre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({providers:[C_,{provide:t2,useClass:zre},d2,{provide:n2,useExisting:d2}],imports:[[Gre.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();class EM{constructor(e,t="/assets/i18n/",i=".json"){this.http=e,this.prefix=t,this.suffix=i}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}}function $re(n){return new EM(n,"./assets/i18n/",".json")}let jre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi,fM,rre,Mw.forChild({loader:{provide:dc,useFactory:$re,deps:[C_]}})]]}),n})();function qre(n){return new EM(n,"./assets/i18n/",".json")}let Xre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi,Cie,pb,lM,kL,GQ,Mw.forChild({loader:{provide:dc,useFactory:qre,deps:[C_]}})]]}),n})();const en=!1;function f2(n){return new Ue(3e3,en)}function Ase(){return"undefined"!=typeof window&&void 0!==window.document}function CM(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ol(n){switch(n.length){case 0:return new Wh;case 1:return n[0];default:return new IR(n)}}function p2(n,e,t,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let _=p,m=u[p];if("offset"!==p)switch(_=e.normalizePropertyName(_,o),m){case"!":m=r[p];break;case Yo:m=s[p];break;default:m=e.normalizeStyleValue(p,_,m,o)}f[_]=m}),h||a.push(f),c=f,l=d}),o.length)throw function yse(n){return new Ue(3502,en)}();return a}function TM(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&DM(t,"start",n)));break;case"done":n.onDone(()=>i(t&&DM(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&DM(t,"destroy",n)))}}function DM(n,e,t){const i=t.totalTime,s=AM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function AM(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function cs(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function g2(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let RM=(n,e)=>!1,m2=(n,e,t)=>[];(CM()||"undefined"!=typeof Element)&&(RM=Ase()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),m2=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let bc=null,_2=!1;function y2(n){bc||(bc=function Nse(){return"undefined"!=typeof document?document.body:null}()||{},_2=!!bc.style&&"WebkitAppearance"in bc.style);let e=!0;return bc.style&&!function Rse(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in bc.style,!e&&_2&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in bc.style)),e}const v2=RM,b2=m2;let w2=(()=>{class n{validateStyleProperty(t){return y2(t)}matchesElement(t,i){return!1}containsElement(t,i){return v2(t,i)}query(t,i,r){return b2(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new Wh(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),NM=(()=>{class n{}return n.NOOP=new w2,n})();const IM="ng-enter",D_="ng-leave",A_="ng-trigger",R_=".ng-trigger",x2="ng-animating",PM=".ng-animating";function wc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:OM(parseFloat(e[1]),e[2])}function OM(n,e){return"s"===e?1e3*n:n}function N_(n,e,t){return n.hasOwnProperty("duration")?n:function Ose(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(f2()),{duration:0,delay:0,easing:""};r=OM(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=OM(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function Yre(){return new Ue(3100,en)}()),a=!0),s<0&&(e.push(function Kre(){return new Ue(3101,en)}()),a=!0),a&&e.splice(l,0,f2())}return{duration:r,delay:s,easing:o}}(n,e,t)}function Nd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function al(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Nd(n,t);return t}function E2(n,e,t){return t?e+":"+t+";":""}function C2(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=E2(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=E2(0,kse(t),n.style[t]));n.setAttribute("style",e)}function Ro(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=FM(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),CM()&&C2(n))}function Mc(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=FM(t);n.style[i]=""}),CM()&&C2(n))}function Lf(n){return Array.isArray(n)?1==n.length?n[0]:AR(n):n}const LM=new RegExp("{{\\s*(.+?)\\s*}}","g");function T2(n){let e=[];if("string"==typeof n){let t;for(;t=LM.exec(n);)e.push(t[1]);LM.lastIndex=0}return e}function I_(n,e,t){const i=n.toString(),r=i.replace(LM,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function Zre(n){return new Ue(3003,en)}()),a=""),a.toString()});return r==i?n:r}function P_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Fse=/-+([a-z0-9])/g;function FM(n){return n.replace(Fse,(...e)=>e[1].toUpperCase())}function kse(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function us(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Qre(n){return new Ue(3004,en)}()}}function D2(n,e){return window.getComputedStyle(n)[e]}function Vse(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Hse(n,e,t){if(":"==n[0]){const l=function zse(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function pse(n){return new Ue(3016,en)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function fse(n){return new Ue(3015,en)}()),e;const r=i[1],s=i[2],o=i[3];e.push(A2(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(A2(o,r))}(i,t,e)):t.push(n),t}const L_=new Set(["true","1"]),F_=new Set(["false","0"]);function A2(n,e){const t=L_.has(n)||F_.has(n),i=L_.has(e)||F_.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?L_.has(n):F_.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?L_.has(e):F_.has(e)),o&&a}}const Gse=new RegExp("s*:selfs*,?","g");function kM(n,e,t){return new Wse(n).build(e,t)}class Wse{constructor(e){this._driver=e}build(e,t){const i=new qse(t);return this._resetContextStyleTimingState(i),us(this,Lf(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function tse(){return new Ue(3006,en)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function nse(){return new Ue(3007,en)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{if(k_(a)){const l=a;Object.keys(l).forEach(c=>{T2(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size&&(P_(s.values()),t.errors.push(function ise(n,e){return new Ue(3008,en)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=us(this,Lf(e.animation),t);return{type:1,matchers:Vse(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:xc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>us(this,i,t)),options:xc(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=us(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:xc(e.options)}}visitAnimate(e,t){const i=function Yse(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return BM(N_(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=BM(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||N_(i,e),BM(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Ko({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Ko(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==Yo?i.push(o):t.errors.push(function rse(n){return new Ue(3002,en)}()):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(k_(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void t.errors.push(function sse(n){return new Ue(3009,en)}());const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(t.errors.push(function ose(n,e,t,i,r){return new Ue(3010,en)}()),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),t.options&&function Lse(n,e,t){const i=e.params||{},r=T2(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function Jre(n){return new Ue(3001,en)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function ase(){return new Ue(3011,en)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(g=>{const v=this._makeStyleAst(g,t);let y=null!=v.offset?v.offset:function Xse(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(k_(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(k_(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(v.styles),b=0;return null!=y&&(s++,b=v.offset=y),l=l||b<0||b>1,a=a||b<c,c=b,o.push(b),v});l&&t.errors.push(function lse(){return new Ue(3012,en)}()),a&&t.errors.push(function cse(){return new Ue(3200,en)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function use(){return new Ue(3202,en)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,_=t.currentAnimateTimings,m=_.duration;return u.forEach((g,v)=>{const y=h>0?v==f?1:h*v:o[v],b=y*m;t.currentTime=p+_.delay+b,_.duration=b,this._validateStyleAst(g,t),g.offset=y,i.styles.push(g)}),i}visitReference(e,t){return{type:8,animation:us(this,Lf(e.animation),t),options:xc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:xc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:xc(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function $se(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Gse,"")),n=n.replace(/@\*/g,R_).replace(/@\w+/g,t=>R_+"-"+t.substr(1)).replace(/:animating/g,PM),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,cs(t.collectedStyles,t.currentQuerySelector,{});const a=us(this,Lf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:xc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function dse(){return new Ue(3013,en)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:N_(e.timings,t.errors,!0);return{type:12,animation:us(this,Lf(e.animation),t),timings:i,options:null}}}class qse{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function k_(n){return!Array.isArray(n)&&"object"==typeof n}function xc(n){return n?(n=Nd(n)).params&&(n.params=function jse(n){return n?Nd(n):null}(n.params)):n={},n}function BM(n,e,t){return{duration:n,delay:e,easing:t}}function UM(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class B_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Zse=new RegExp(":enter","g"),eoe=new RegExp(":leave","g");function VM(n,e,t,i,r,s={},o={},a,l,c=[]){return(new toe).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class toe{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new B_;const d=new HM(e,t,c,r,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),us(this,i,d);const h=d.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const _=h[p];if(_.element===t){f=_;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[UM(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?wc(i.duration):null,a=null!=i.delay?wc(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),us(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=U_);const o=wc(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>us(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?wc(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),us(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return N_(t.params?I_(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?wc(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=U_);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),us(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;us(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const U_={};class HM{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=U_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new V_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=wc(i.duration)),null!=i.delay&&(r.delay=wc(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=I_(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new HM(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=U_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new noe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(Zse,"."+this._enterClassName)).replace(eoe,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function hse(n){return new Ue(3014,en)}()),a}}class V_{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new V_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Yo,this._currentKeyframe[t]=Yo}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function ioe(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=Yo})):al(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=I_(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Yo),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=al(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?e.add(u):d==Yo&&t.add(u)}),i||(c.offset=l/this.duration),r.push(c)});const s=e.size?P_(e.values()):[],o=t.size?P_(t.values()):[];if(i){const a=r[0],l=Nd(a);a.offset=0,l.offset=1,r=[a,l]}return UM(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class noe extends V_{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=al(e[0],!1);l.offset=0,s.push(l);const c=al(e[0],!1);c.offset=I2(a),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=al(e[d],!1);h.offset=I2((t+h.offset*i)/o),s.push(h)}i=o,t=0,r="",e=s}return UM(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function I2(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class zM{}class roe extends zM{normalizePropertyName(e,t){return FM(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(soe[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function ese(n,e){return new Ue(3005,en)}())}return o+s}}const soe=(()=>function ooe(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function P2(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const GM={};class O2{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function aoe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||GM,p=this.buildStyles(i,a&&a.params||GM,d),_=l&&l.params||GM,m=this.buildStyles(r,_,d),g=new Set,v=new Map,y=new Map,b="void"===r,E={params:Object.assign(Object.assign({},h),_)},S=u?[]:VM(e,t,this.ast.animation,s,o,p,m,E,c,d);let M=0;if(S.forEach(U=>{M=Math.max(U.duration+U.delay,M)}),d.length)return P2(t,this._triggerName,i,r,b,p,m,[],[],v,y,M,d);S.forEach(U=>{const w=U.element,R=cs(v,w,{});U.preStyleProps.forEach(Z=>R[Z]=!0);const Q=cs(y,w,{});U.postStyleProps.forEach(Z=>Q[Z]=!0),w!==t&&g.add(w)});const A=P_(g.values());return P2(t,this._triggerName,i,r,b,p,m,S,A,v,y,M)}}class loe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Nd(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=I_(l,r,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),i[c]=l})}}),i}}class uoe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new loe(r.style,r.options&&r.options.params||{},i)}),L2(this.states,"true","1"),L2(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new O2(e,r,this.states))}),this.fallbackTransition=function doe(n,e,t){return new O2(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function L2(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const hoe=new B_;class foe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],r=kM(this._driver,t,i);if(i.length)throw function vse(n){return new Ue(3503,en)}();this._animations[e]=r}_buildPlayer(e,t,i){const r=e.element,s=p2(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=VM(this._driver,t,s,IM,D_,{},{},i,hoe,r),o.forEach(u=>{const d=cs(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(r.push(function bse(){return new Ue(3300,en)}()),o=[]),r.length)throw function wse(n){return new Ue(3504,en)}();a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,Yo)})});const c=ol(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Mse(n){return new Ue(3301,en)}();return t}listen(e,t,i,r){const s=AM(t,"","","");return TM(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const F2="ng-animate-queued",WM="ng-animate-disabled",yoe=[],k2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},voe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Os="__ng_removed";class $M{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function xoe(n){return null!=n?n:null}(i?e.value:e),i){const s=Nd(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Ff="void",jM=new $M(Ff);class boe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ls(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function xse(n,e){return new Ue(3302,en)}();if(null==i||0==i.length)throw function Sse(n){return new Ue(3303,en)}();if(!function Soe(n){return"start"==n||"done"==n}(i))throw function Ese(n,e){return new Ue(3400,en)}();const s=cs(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=cs(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Ls(e,A_),Ls(e,A_+"-"+t),a[t]=jM),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function Cse(n){return new Ue(3401,en)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new qM(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ls(e,A_),Ls(e,A_+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new $M(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=jM),c.value!==Ff&&l.value===c.value){if(!function Toe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const _=[],m=s.matchStyles(l.value,l.params,_),g=s.matchStyles(c.value,c.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{Mc(e,m),Ro(e,g)})}return}const h=cs(this._engine.playersByElement,e,[]);h.forEach(_=>{_.namespaceId==this.id&&_.triggerName==t&&_.queued&&_.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Ls(e,F2),o.onStart(()=>{Id(e,F2)})),o.onDone(()=>{let _=this.players.indexOf(o);_>=0&&this.players.splice(_,1);const m=this._engine.playersByElement.get(e);if(m){let g=m.indexOf(o);g>=0&&m.splice(g,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,R_,!0);i.forEach(r=>{if(r[Os])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(e,l,Ff,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&ol(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||jM,u=new $M(Ff),d=new qM(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Os];(!s||s===k2)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ls(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=AM(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,TM(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class woe{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new boe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(H_(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!H_(t))return;const s=t[Os];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ls(e,WM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Id(e,WM))}removeNode(e,t,i,r){if(H_(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Os]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return H_(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,R_,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,PM,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ol(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[Os];if(i&&i.setForRemoval){if(e[Os]=k2,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(WM))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Ls(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?ol(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Tse(n){return new Ue(3402,en)}()}_flushAnimations(e,t){const i=new B_,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(L=>{u.add(L);const V=this.driver.query(L,".ng-animate-queued",!0);for(let H=0;H<V.length;H++)u.add(V[H])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=V2(h,this.collectedEnterElements),p=new Map;let _=0;f.forEach((L,V)=>{const H=IM+_++;p.set(V,H),L.forEach($=>Ls($,H))});const m=[],g=new Set,v=new Set;for(let L=0;L<this.collectedLeaveElements.length;L++){const V=this.collectedLeaveElements[L],H=V[Os];H&&H.setForRemoval&&(m.push(V),g.add(V),H.hasAnimation?this.driver.query(V,".ng-star-inserted",!0).forEach($=>g.add($)):v.add(V))}const y=new Map,b=V2(h,Array.from(g));b.forEach((L,V)=>{const H=D_+_++;y.set(V,H),L.forEach($=>Ls($,H))}),e.push(()=>{f.forEach((L,V)=>{const H=p.get(V);L.forEach($=>Id($,H))}),b.forEach((L,V)=>{const H=y.get(V);L.forEach($=>Id($,H))}),m.forEach(L=>{this.processLeaveNode(L)})});const E=[],S=[];for(let L=this._namespaceList.length-1;L>=0;L--)this._namespaceList[L].drainQueuedTransitions(t).forEach(H=>{const $=H.player,le=H.element;if(E.push($),this.collectedEnterElements.length){const Ne=le[Os];if(Ne&&Ne.setForMove){if(Ne.previousTriggersValues&&Ne.previousTriggersValues.has(H.triggerName)){const Oe=Ne.previousTriggersValues.get(H.triggerName),De=this.statesByElement.get(H.element);De&&De[H.triggerName]&&(De[H.triggerName].value=Oe)}return void $.destroy()}}const he=!d||!this.driver.containsElement(d,le),Me=y.get(le),Xe=p.get(le),z=this._buildInstruction(H,i,Xe,Me,he);if(z.errors&&z.errors.length)return void S.push(z);if(he)return $.onStart(()=>Mc(le,z.fromStyles)),$.onDestroy(()=>Ro(le,z.toStyles)),void r.push($);if(H.isFallbackTransition)return $.onStart(()=>Mc(le,z.fromStyles)),$.onDestroy(()=>Ro(le,z.toStyles)),void r.push($);const pe=[];z.timelines.forEach(Ne=>{Ne.stretchStartingKeyframe=!0,this.disabledNodes.has(Ne.element)||pe.push(Ne)}),z.timelines=pe,i.append(le,z.timelines),o.push({instruction:z,player:$,element:le}),z.queriedElements.forEach(Ne=>cs(a,Ne,[]).push($)),z.preStyleProps.forEach((Ne,Oe)=>{const De=Object.keys(Ne);if(De.length){let Ze=l.get(Oe);Ze||l.set(Oe,Ze=new Set),De.forEach(We=>Ze.add(We))}}),z.postStyleProps.forEach((Ne,Oe)=>{const De=Object.keys(Ne);let Ze=c.get(Oe);Ze||c.set(Oe,Ze=new Set),De.forEach(We=>Ze.add(We))})});if(S.length){const L=[];S.forEach(V=>{L.push(function Dse(n,e){return new Ue(3505,en)}())}),E.forEach(V=>V.destroy()),this.reportError(L)}const M=new Map,A=new Map;o.forEach(L=>{const V=L.element;i.has(V)&&(A.set(V,V),this._beforeAnimationBuild(L.player.namespaceId,L.instruction,M))}),r.forEach(L=>{const V=L.element;this._getPreviousPlayers(V,!1,L.namespaceId,L.triggerName,null).forEach($=>{cs(M,V,[]).push($),$.destroy()})});const U=m.filter(L=>z2(L,l,c)),w=new Map;U2(w,this.driver,v,c,Yo).forEach(L=>{z2(L,l,c)&&U.push(L)});const Q=new Map;f.forEach((L,V)=>{U2(Q,this.driver,new Set(L),l,"!")}),U.forEach(L=>{const V=w.get(L),H=Q.get(L);w.set(L,Object.assign(Object.assign({},V),H))});const Z=[],F=[],K={};o.forEach(L=>{const{element:V,player:H,instruction:$}=L;if(i.has(V)){if(u.has(V))return H.onDestroy(()=>Ro(V,$.toStyles)),H.disabled=!0,H.overrideTotalTime($.totalTime),void r.push(H);let le=K;if(A.size>1){let Me=V;const Xe=[];for(;Me=Me.parentNode;){const z=A.get(Me);if(z){le=z;break}Xe.push(Me)}Xe.forEach(z=>A.set(z,le))}const he=this._buildAnimation(H.namespaceId,$,M,s,Q,w);if(H.setRealPlayer(he),le===K)Z.push(H);else{const Me=this.playersByElement.get(le);Me&&Me.length&&(H.parentPlayer=ol(Me)),r.push(H)}}else Mc(V,$.fromStyles),H.onDestroy(()=>Ro(V,$.toStyles)),F.push(H),u.has(V)&&r.push(H)}),F.forEach(L=>{const V=s.get(L.element);if(V&&V.length){const H=ol(V);L.setRealPlayer(H)}}),r.forEach(L=>{L.parentPlayer?L.syncPlayerEvents(L.parentPlayer):L.destroy()});for(let L=0;L<m.length;L++){const V=m[L],H=V[Os];if(Id(V,D_),H&&H.hasAnimation)continue;let $=[];if(a.size){let he=a.get(V);he&&he.length&&$.push(...he);let Me=this.driver.query(V,PM,!0);for(let Xe=0;Xe<Me.length;Xe++){let z=a.get(Me[Xe]);z&&z.length&&$.push(...z)}}const le=$.filter(he=>!he.destroyed);le.length?Eoe(this,V,le):this.processLeaveNode(V)}return m.length=0,Z.forEach(L=>{this.players.push(L),L.onDone(()=>{L.destroy();const V=this.players.indexOf(L);this.players.splice(V,1)}),L.play()}),Z}elementContainsData(e,t){let i=!1;const r=t[Os];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Ff;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=cs(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Mc(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const _=p.element;u.add(_);const m=_[Os];if(m&&m.removedBeforeQueried)return new Wh(p.duration,p.delay);const g=_!==l,v=function Coe(n){const e=[];return H2(n,e),e}((i.get(_)||yoe).map(M=>M.getRealPlayer())).filter(M=>!!M.element&&M.element===_),y=s.get(_),b=o.get(_),E=p2(0,this._normalizer,0,p.keyframes,y,b),S=this._buildPlayer(p,E,v);if(p.subTimeline&&r&&d.add(_),g){const M=new qM(e,a,_);M.setRealPlayer(S),c.push(M)}return S});c.forEach(p=>{cs(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function Moe(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Ls(p,x2));const f=ol(h);return f.onDestroy(()=>{u.forEach(p=>Id(p,x2)),Ro(l,t.toStyles)}),d.forEach(p=>{cs(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Wh(e.duration,e.delay)}}class qM{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Wh,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>TM(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){cs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function H_(n){return n&&1===n.nodeType}function B2(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function U2(n,e,t,i,r){const s=[];t.forEach(l=>s.push(B2(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=e.computeStyle(c,d,r);(!h||0==h.length)&&(c[Os]=voe,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>B2(l,s[a++])),o}function V2(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Ls(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Id(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Eoe(n,e,t){ol(t).onDone(()=>n.processLeaveNode(e))}function H2(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof IR?H2(i.players,e):e.push(i)}}function z2(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class z_{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new woe(e,t,i),this._timelineEngine=new foe(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=kM(this._driver,s,l);if(l.length)throw function _se(n,e){return new Ue(3404,en)}();a=function coe(n,e,t){return new uoe(n,e,t)}(r,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=g2(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=g2(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Aoe=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ro(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ro(this._element,this._initialStyles),this._endStyles&&(Ro(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Mc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mc(this._element,this._endStyles),this._endStyles=null),Ro(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function XM(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];Roe(r)&&(e=e||{},e[r]=n[r])}return e}function Roe(n){return"display"===n||"position"===n}class G2{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:D2(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Noe{validateStyleProperty(e){return y2(e)}matchesElement(e,t){return!1}containsElement(e,t){return v2(e,t)}query(e,t,i){return b2(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c={},u=o.filter(h=>h instanceof G2);(function Bse(n,e){return 0===n||0===e})(i,r)&&u.forEach(h=>{let f=h.currentSnapshot;Object.keys(f).forEach(p=>c[p]=f[p])}),t=function Use(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(l){a[l]=D2(n,l)})}}return e}(e,t=t.map(h=>al(h,!1)),c);const d=function Doe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=XM(e[0]),e.length>1&&(i=XM(e[e.length-1]))):e&&(t=XM(e)),t||i?new Aoe(n,t,i):null}(e,t);return new G2(e,t,l,d)}}let Ioe=(()=>{class n extends DR{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Hs.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?AR(t):t;return W2(this._renderer,null,i,"register",[r]),new Poe(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(q(wl),q(rn))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class Poe extends class Yj{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Ooe(this._id,e,t||{},this._renderer)}}class Ooe{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return W2(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function W2(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const $2="@.disabled";let Loe=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new j2("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new Foe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(q(wl),q(z_),q(Bt))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class j2{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==$2?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Foe extends j2{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$2?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function koe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Boe(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let Uoe=(()=>{class n extends z_{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(q(rn),q(NM),q(zM))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const q2=new tt("AnimationModuleType"),X2=[{provide:DR,useClass:Ioe},{provide:zM,useFactory:function Voe(){return new roe}},{provide:z_,useClass:Uoe},{provide:wl,useFactory:function Hoe(n,e,t){return new Loe(n,e,t)},deps:[sg,z_,Bt]}],Y2=[{provide:NM,useFactory:()=>new Noe},{provide:q2,useValue:"BrowserAnimations"},...X2],zoe=[{provide:NM,useClass:w2},{provide:q2,useValue:"NoopAnimations"},...X2];let Goe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?zoe:Y2}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({providers:Y2,imports:[gA]}),n})(),K2=(()=>{class n{constructor(){this.scrollSub=new $e,this.resizeSub=new $e,this.manageScrollPos(),this.scrollObs="undefined"!=typeof window?oi(window,"scroll"):Go,this.scrollSub=this.scrollObs.subscribe(()=>this.manageScrollPos()),this.resizeObs="undefined"!=typeof window?oi(window,"resize"):Go,this.resizeSub=this.resizeObs.subscribe(()=>this.manageScrollPos())}manageScrollPos(){this.pos="undefined"!=typeof window?window.pageYOffset:0}ngOnDestroy(){this.scrollSub.unsubscribe(),this.resizeSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Woe=(()=>{class n{static forRoot(){return{ngModule:n,providers:[K2]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({imports:[[Gi]]}),n})();const kf="Service workers are disabled or not supported by this browser";class W_{constructor(e){if(this.serviceWorker=e,e){const i=oi(e,"controllerchange").pipe(ze(()=>e.controller)),s=El(Mu(()=>Ge(e.controller)),i);this.worker=s.pipe(hn(u=>!!u)),this.registration=this.worker.pipe(si(()=>e.getRegistration()));const c=oi(e,"message").pipe(ze(u=>u.data)).pipe(hn(u=>u&&u.type)).pipe(function $oe(n){return n?K_(()=>new Ye,n):K_(new Ye)}());c.connect(),this.events=c}else this.worker=this.events=this.registration=function joe(n){return Mu(()=>yO(new Error(n)))}(kf)}postMessage(e,t){return this.worker.pipe(An(1),Ct(i=>{i.postMessage(Object.assign({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,i){const r=this.waitForOperationCompleted(i),s=this.postMessage(e,t);return Promise.all([s,r]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?i=>i.type===e:i=>e.includes(i.type),this.events.pipe(hn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(An(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(hn(t=>t.nonce===e),An(1),ze(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let qoe=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new Ye,!t.isEnabled)return this.messages=da,this.notificationClicks=da,void(this.subscription=da);this.messages=this.sw.eventsOfType("PUSH").pipe(ze(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ze(r=>r.data)),this.pushManager=this.sw.registration.pipe(ze(r=>r.pushManager));const i=this.pushManager.pipe(si(r=>r.getSubscription()));this.subscription=Hr(i,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(kf));const i={userVisibleOnly:!0};let r=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return i.applicationServerKey=s,this.pushManager.pipe(si(o=>o.subscribe(i)),An(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(An(1),si(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(kf))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(q(W_))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Xoe=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=da,this.available=da,this.activated=da,void(this.unrecoverable=da);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(hn(i=>"VERSION_READY"===i.type),ze(i=>({type:"UPDATE_AVAILABLE",current:i.currentVersion,available:i.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(kf));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(kf));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(q(W_))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class YM{}const J2=new tt("NGSW_REGISTER_SCRIPT");function Yoe(n,e,t,i){return()=>{if(!wu(i)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[a,...l]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":s=Ge(null);break;case"registerWithDelay":s=Z2(+l[0]||0);break;case"registerWhenStable":s=l[0]?Hr(Q2(n),Z2(+l[0])):Q2(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(Bt).runOutsideAngular(()=>s.pipe(An(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function Z2(n){return Ge(null).pipe(Qm(n))}function Q2(n){return n.get(Qs).isStable.pipe(hn(t=>t))}function Koe(n,e){return new W_(wu(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let Joe=(()=>{class n{static register(t,i={}){return{ngModule:n,providers:[{provide:J2,useValue:t},{provide:YM,useValue:i},{provide:W_,useFactory:Koe,deps:[YM,wo]},{provide:yu,useFactory:Yoe,deps:[Gn,J2,YM,wo],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n}),n.\u0275inj=Nt({providers:[qoe,Xoe]}),n})();function Zoe(n){return new EM(n,"./assets/i18n/",".json")}let Qoe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kt({type:n,bootstrap:[Rre]}),n.\u0275inj=Nt({providers:[hc],imports:[[Goe,jre,Xre,Woe.forRoot(),gA,Tre,Wre,Joe.register("ngsw-worker.js",{enabled:true}),TR.forRoot("G-4ML1VNCP9T"),Mw.forRoot({loader:{provide:dc,useFactory:Zoe,deps:[C_]}})]]}),n})();(function lG(){if(xD)throw new Error("Cannot enable prod mode after platform setup.");MD=!1})(),w8().bootstrapModule(Qoe).catch(n=>console.error(n))},123:function(Mr){Mr.exports=function(on){function dt(lt){if(ht[lt])return ht[lt].exports;var vt=ht[lt]={exports:{},id:lt,loaded:!1};return on[lt].call(vt.exports,vt,vt.exports,dt),vt.loaded=!0,vt.exports}var ht={};return dt.m=on,dt.c=ht,dt.p="dist/",dt(0)}([function(on,dt,ht){"use strict";function lt(gt){return gt&&gt.__esModule?gt:{default:gt}}var vt=Object.assign||function(gt){for(var Ye=1;Ye<arguments.length;Ye++){var Br=arguments[Ye];for(var xr in Br)Object.prototype.hasOwnProperty.call(Br,xr)&&(gt[xr]=Br[xr])}return gt},Zn=(lt(ht(1)),ht(6)),ot=lt(Zn),Ht=lt(ht(7)),$e=lt(ht(8)),Ci=lt(ht(9)),an=lt(ht(10)),ll=lt(ht(11)),hs=lt(ht(14)),Ui=[],No=!1,Nn={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},wt=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(No=!0),No)return Ui=(0,ll.default)(Ui,Nn),(0,an.default)(Ui,Nn.once),Ui},ks=function(){Ui=(0,hs.default)(),wt()};on.exports={init:function(gt){Nn=vt(Nn,gt),Ui=(0,hs.default)();var Ye=document.all&&!window.atob;return function(gt){return!0===gt||"mobile"===gt&&Ci.default.mobile()||"phone"===gt&&Ci.default.phone()||"tablet"===gt&&Ci.default.tablet()||"function"==typeof gt&&!0===gt()}(Nn.disable)||Ye?void Ui.forEach(function(gt,Ye){gt.node.removeAttribute("data-aos"),gt.node.removeAttribute("data-aos-easing"),gt.node.removeAttribute("data-aos-duration"),gt.node.removeAttribute("data-aos-delay")}):(Nn.disableMutationObserver||$e.default.isSupported()||(console.info('\n      aos: MutationObserver is not supported on this browser,\n      code mutations observing has been disabled.\n      You may have to call "refreshHard()" by yourself.\n    '),Nn.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",Nn.easing),document.querySelector("body").setAttribute("data-aos-duration",Nn.duration),document.querySelector("body").setAttribute("data-aos-delay",Nn.delay),"DOMContentLoaded"===Nn.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1?wt(!0):"load"===Nn.startEvent?window.addEventListener(Nn.startEvent,function(){wt(!0)}):document.addEventListener(Nn.startEvent,function(){wt(!0)}),window.addEventListener("resize",(0,Ht.default)(wt,Nn.debounceDelay,!0)),window.addEventListener("orientationchange",(0,Ht.default)(wt,Nn.debounceDelay,!0)),window.addEventListener("scroll",(0,ot.default)(function(){(0,an.default)(Ui,Nn.once)},Nn.throttleDelay)),Nn.disableMutationObserver||$e.default.ready("[data-aos]",ks),Ui)},refresh:wt,refreshHard:ks}},function(on,dt){},,,,,function(on,dt){(function(ht){"use strict";function lt(ke,ln,gt){function Ye(mn){var cr=Vr,gs=ps;return Vr=ps=void 0,Ji=mn,yi=ke.apply(gs,cr)}function Br(mn){return Ji=mn,Qn=setTimeout(co,ln),ze?Ye(mn):yi}function fs(mn){var cr=mn-ei;return void 0===ei||cr>=ln||cr<0||Us&&mn-Ji>=Yr}function co(){var mn=ct();return fs(mn)?Tc(mn):void(Qn=setTimeout(co,function xr(mn){var Uf=ln-(mn-ei);return Us?ks(Uf,Yr-(mn-Ji)):Uf}(mn)))}function Tc(mn){return Qn=void 0,Ln&&Vr?Ye(mn):(Vr=ps=void 0,yi)}function Bs(){var mn=ct(),cr=fs(mn);if(Vr=arguments,ps=this,ei=mn,cr){if(void 0===Qn)return Br(ei);if(Us)return Qn=setTimeout(co,ln),Ye(ei)}return void 0===Qn&&(Qn=setTimeout(co,ln)),yi}var Vr,ps,Yr,yi,Qn,ei,Ji=0,ze=!1,Us=!1,Ln=!0;if("function"!=typeof ke)throw new TypeError(Jt);return ln=gn(ln)||0,pn(gt)&&(ze=!!gt.leading,Yr=(Us="maxWait"in gt)?wt(gn(gt.maxWait)||0,ln):Yr,Ln="trailing"in gt?!!gt.trailing:Ln),Bs.cancel=function Pd(){void 0!==Qn&&clearTimeout(Qn),Ji=0,Vr=ei=ps=Qn=void 0},Bs.flush=function Ur(){return void 0===Qn?yi:Tc(ct())},Bs}function pn(ke){var ln=void 0===ke?"undefined":Ht(ke);return!!ke&&("object"==ln||"function"==ln)}function ot(ke){return"symbol"==(void 0===ke?"undefined":Ht(ke))||function Zn(ke){return!!ke&&"object"==(void 0===ke?"undefined":Ht(ke))}(ke)&&Nn.call(ke)==Mn}function gn(ke){if("number"==typeof ke)return ke;if(ot(ke))return $e;if(pn(ke)){var ln="function"==typeof ke.valueOf?ke.valueOf():ke;ke=pn(ln)?ln+"":ln}if("string"!=typeof ke)return 0===ke?ke:+ke;ke=ke.replace(Ci,"");var gt=an.test(ke);return gt||ga.test(ke)?ll(ke.slice(2),gt?2:8):kr.test(ke)?$e:+ke}var Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ke){return typeof ke}:function(ke){return ke&&"function"==typeof Symbol&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke},Jt="Expected a function",$e=NaN,Mn="[object Symbol]",Ci=/^\s+|\s+$/g,kr=/^[-+]0x[0-9a-f]+$/i,an=/^0b[01]+$/i,ga=/^0o[0-7]+$/i,ll=parseInt,cl="object"==(void 0===ht?"undefined":Ht(ht))&&ht&&ht.Object===Object&&ht,hs="object"==("undefined"==typeof self?"undefined":Ht(self))&&self&&self.Object===Object&&self,Ui=cl||hs||Function("return this")(),Nn=Object.prototype.toString,wt=Math.max,ks=Math.min,ct=function(){return Ui.Date.now()};on.exports=function vt(ke,ln,gt){var Ye=!0,Br=!0;if("function"!=typeof ke)throw new TypeError(Jt);return pn(gt)&&(Ye="leading"in gt?!!gt.leading:Ye,Br="trailing"in gt?!!gt.trailing:Br),lt(ke,ln,{leading:Ye,maxWait:ln,trailing:Br})}}).call(dt,function(){return this}())},function(on,dt){(function(ht){"use strict";function vt(ct){var ke=void 0===ct?"undefined":gn(ct);return!!ct&&("object"==ke||"function"==ke)}function Zn(ct){return"symbol"==(void 0===ct?"undefined":gn(ct))||function pn(ct){return!!ct&&"object"==(void 0===ct?"undefined":gn(ct))}(ct)&&No.call(ct)==$e}function ot(ct){if("number"==typeof ct)return ct;if(Zn(ct))return Jt;if(vt(ct)){var ke="function"==typeof ct.valueOf?ct.valueOf():ct;ct=vt(ke)?ke+"":ke}if("string"!=typeof ct)return 0===ct?ct:+ct;ct=ct.replace(Mn,"");var ln=kr.test(ct);return ln||an.test(ct)?ga(ct.slice(2),ln?2:8):Ci.test(ct)?Jt:+ct}var gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ct){return typeof ct}:function(ct){return ct&&"function"==typeof Symbol&&ct.constructor===Symbol&&ct!==Symbol.prototype?"symbol":typeof ct},Ht="Expected a function",Jt=NaN,$e="[object Symbol]",Mn=/^\s+|\s+$/g,Ci=/^[-+]0x[0-9a-f]+$/i,kr=/^0b[01]+$/i,an=/^0o[0-7]+$/i,ga=parseInt,ll="object"==(void 0===ht?"undefined":gn(ht))&&ht&&ht.Object===Object&&ht,cl="object"==("undefined"==typeof self?"undefined":gn(self))&&self&&self.Object===Object&&self,hs=ll||cl||Function("return this")(),No=Object.prototype.toString,Nn=Math.max,wt=Math.min,ks=function(){return hs.Date.now()};on.exports=function lt(ct,ke,ln){function gt(Ln){var mn=Bs,cr=Vr;return Bs=Vr=void 0,ei=Ln,Yr=ct.apply(cr,mn)}function Ye(Ln){return ei=Ln,yi=setTimeout(fs,ke),Ji?gt(Ln):Yr}function xr(Ln){var mn=Ln-Qn;return void 0===Qn||mn>=ke||mn<0||ze&&Ln-ei>=ps}function fs(){var Ln=ks();return xr(Ln)?co(Ln):void(yi=setTimeout(fs,function Br(Ln){var gs=ke-(Ln-Qn);return ze?wt(gs,ps-(Ln-ei)):gs}(Ln)))}function co(Ln){return yi=void 0,Us&&Bs?gt(Ln):(Bs=Vr=void 0,Yr)}function Ur(){var Ln=ks(),mn=xr(Ln);if(Bs=arguments,Vr=this,Qn=Ln,mn){if(void 0===yi)return Ye(Qn);if(ze)return yi=setTimeout(fs,ke),gt(Qn)}return void 0===yi&&(yi=setTimeout(fs,ke)),Yr}var Bs,Vr,ps,Yr,yi,Qn,ei=0,Ji=!1,ze=!1,Us=!0;if("function"!=typeof ct)throw new TypeError(Ht);return ke=ot(ke)||0,vt(ln)&&(Ji=!!ln.leading,ps=(ze="maxWait"in ln)?Nn(ot(ln.maxWait)||0,ke):ps,Us="trailing"in ln?!!ln.trailing:Us),Ur.cancel=function Tc(){void 0!==yi&&clearTimeout(yi),ei=0,Bs=Qn=Vr=yi=void 0},Ur.flush=function Pd(){return void 0===yi?Yr:co(ks())},Ur}}).call(dt,function(){return this}())},function(on,dt){"use strict";function ht(gn){var Ht=void 0,Jt=void 0;for(Ht=0;Ht<gn.length;Ht+=1)if((Jt=gn[Ht]).dataset&&Jt.dataset.aos||Jt.children&&ht(Jt.children))return!0;return!1}function lt(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function Zn(gn){gn&&gn.forEach(function(Ht){var Jt=Array.prototype.slice.call(Ht.addedNodes),$e=Array.prototype.slice.call(Ht.removedNodes);if(ht(Jt.concat($e)))return ot()})}Object.defineProperty(dt,"__esModule",{value:!0});var ot=function(){};dt.default={isSupported:function vt(){return!!lt()},ready:function pn(gn,Ht){var Jt=window.document,Mn=new(lt())(Zn);ot=Ht,Mn.observe(Jt.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}}},function(on,dt){"use strict";function lt(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(dt,"__esModule",{value:!0});var vt=function(){function Jt($e,Mn){for(var Ci=0;Ci<Mn.length;Ci++){var kr=Mn[Ci];kr.enumerable=kr.enumerable||!1,kr.configurable=!0,"value"in kr&&(kr.writable=!0),Object.defineProperty($e,kr.key,kr)}}return function($e,Mn,Ci){return Mn&&Jt($e.prototype,Mn),Ci&&Jt($e,Ci),$e}}(),pn=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,Zn=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,ot=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,gn=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,Ht=function(){function Jt(){!function ht(Jt,$e){if(!(Jt instanceof $e))throw new TypeError("Cannot call a class as a function")}(this,Jt)}return vt(Jt,[{key:"phone",value:function(){var $e=lt();return!(!pn.test($e)&&!Zn.test($e.substr(0,4)))}},{key:"mobile",value:function(){var $e=lt();return!(!ot.test($e)&&!gn.test($e.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),Jt}();dt.default=new Ht},function(on,dt){"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.default=function(vt,pn){var Zn=window.pageYOffset,ot=window.innerHeight;vt.forEach(function(gn,Ht){!function(vt,pn,Zn){var ot=vt.node.getAttribute("data-aos-once");pn>vt.position?vt.node.classList.add("aos-animate"):void 0!==ot&&("false"===ot||!Zn&&"true"!==ot)&&vt.node.classList.remove("aos-animate")}(gn,ot+Zn,pn)})}},function(on,dt,ht){"use strict";Object.defineProperty(dt,"__esModule",{value:!0});var pn=function lt(ot){return ot&&ot.__esModule?ot:{default:ot}}(ht(12));dt.default=function(ot,gn){return ot.forEach(function(Ht,Jt){Ht.node.classList.add("aos-init"),Ht.position=(0,pn.default)(Ht.node,gn.offset)}),ot}},function(on,dt,ht){"use strict";Object.defineProperty(dt,"__esModule",{value:!0});var pn=function lt(ot){return ot&&ot.__esModule?ot:{default:ot}}(ht(13));dt.default=function(ot,gn){var Ht=0,Jt=0,$e=window.innerHeight,Mn={offset:ot.getAttribute("data-aos-offset"),anchor:ot.getAttribute("data-aos-anchor"),anchorPlacement:ot.getAttribute("data-aos-anchor-placement")};switch(Mn.offset&&!isNaN(Mn.offset)&&(Jt=parseInt(Mn.offset)),Mn.anchor&&document.querySelectorAll(Mn.anchor)&&(ot=document.querySelectorAll(Mn.anchor)[0]),Ht=(0,pn.default)(ot).top,Mn.anchorPlacement){case"top-bottom":break;case"center-bottom":Ht+=ot.offsetHeight/2;break;case"bottom-bottom":Ht+=ot.offsetHeight;break;case"top-center":Ht+=$e/2;break;case"bottom-center":Ht+=$e/2+ot.offsetHeight;break;case"center-center":Ht+=$e/2+ot.offsetHeight/2;break;case"top-top":Ht+=$e;break;case"bottom-top":Ht+=ot.offsetHeight+$e;break;case"center-top":Ht+=ot.offsetHeight/2+$e}return Mn.anchorPlacement||Mn.offset||isNaN(gn)||(Jt=gn),Ht+Jt}},function(on,dt){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.default=function(lt){for(var vt=0,pn=0;lt&&!isNaN(lt.offsetLeft)&&!isNaN(lt.offsetTop);)vt+=lt.offsetLeft-("BODY"!=lt.tagName?lt.scrollLeft:0),pn+=lt.offsetTop-("BODY"!=lt.tagName?lt.scrollTop:0),lt=lt.offsetParent;return{top:pn,left:vt}}},function(on,dt){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.default=function(lt){return lt=lt||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(lt,function(vt){return{node:vt}})}}])}},Mr=>{Mr(Mr.s=318)}]);